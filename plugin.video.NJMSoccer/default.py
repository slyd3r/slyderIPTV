import base64;exec base64.b64decode('aW1wb3J0IHVybGxpYgppbXBvcnQgdXJsbGliMgppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IHJlCmltcG9ydCBvcwppbXBvcnQgeGJtY3BsdWdpbgppbXBvcnQgeGJtY2d1aQppbXBvcnQgeGJtY2FkZG9uCmltcG9ydCB4Ym1jdmZzCmltcG9ydCB0cmFjZWJhY2sKaW1wb3J0IGNvb2tpZWxpYgpmcm9tIGFkZG9uIC4gY29tbW9uIC4gbmV0IGltcG9ydCBOZXQKZnJvbSBCZWF1dGlmdWxTb3VwIGltcG9ydCBCZWF1dGlmdWxTdG9uZVNvdXAgLCBCZWF1dGlmdWxTb3VwICwgQmVhdXRpZnVsU09BUAp0cnkgOgogaW1wb3J0IGpzb24KZXhjZXB0IDoKIGltcG9ydCBzaW1wbGVqc29uIGFzIGpzb24KaW1wb3J0IFNpbXBsZURvd25sb2FkZXIgYXMgZG93bmxvYWRlcgppbXBvcnQgdGltZQppbXBvcnQgcmVxdWVzdHMKaWYgNjQgLSA2NDogaTExaUlpaUlpaQppZiA2NSAtIDY1OiBPMCAvIGlJaWkxSTExSTFJSTEgJSBPb29vb29vb09PIC0gaTFJSWkKbzBPTzAwID0gTmV0ICggdXNlcl9hZ2VudCA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjEpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8yOC4wLjE1MDAuNzIgU2FmYXJpLzUzNy4zNicgKQpvbyA9IHsKICdBY2NlcHQnIDogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL3dlYnAsKi8qO3E9MC44JwogfQppZiAyNyAtIDI3OiBvTzBPb29Pb08gKiBvME9vCmkxSWlJMUkxMSA9IFsgJzE4MHVwbG9hZC5jb20nICwgJ2FsbG15dmlkZW9zLm5ldCcgLCAnYmVzdHJlYW1zLm5ldCcgLCAnY2xpY2tudXBsb2FkLmNvbScgLCAnY2xvdWR6aWxsYS50bycgLCAnbW92c2hhcmUubmV0JyAsICdub3ZhbW92LmNvbScgLCAnbm93dmlkZW8uc3gnICwgJ3ZpZGVvd2VlZC5lcycgLCAnZGFjbGlwcy5pbicgLCAnZGF0ZW11bGUuY29tJyAsICdmYXN0dmlkZW8uaW4nICwgJ2Zhc3RzdHJlYW0uaW4nICwgJ2ZpbGVob290LmNvbScgLCAnZmlsZW51a2UuY29tJyAsICdzaGFyZXNpeC5jb20nICwgJ2RvY3MuZ29vZ2xlLmNvbScgLCAncGx1cy5nb29nbGUuY29tJyAsICdwaWNhc2F3ZWIuZ29vZ2xlLmNvbScgLCAnZ29yaWxsYXZpZC5jb20nICwgJ2dvcmlsbGF2aWQuaW4nICwgJ2dyaWZ0aG9zdC5jb20nICwgJ2h1Z2VmaWxlcy5uZXQnICwgJ2lwaXRob3MudG8nICwgJ2lzaGFyZWQuZXUnICwgJ2tpbmdmaWxlcy5uZXQnICwgJ21haWwucnUnICwgJ215Lm1haWwucnUnICwgJ3ZpZGVvYXBpLm15Lm1haWwucnUnICwgJ21pZ2h0eXVwbG9hZC5jb20nICwgJ21vb3NoYXJlLmJpeicgLCAnbW92ZGl2eC5jb20nICwgJ21vdnBvZC5uZXQnICwgJ21vdnBvZC5pbicgLCAnbW92cmVlbC5jb20nICwgJ21yZmlsZS5tZScgLCAnbm9zdmlkZW8uY29tJyAsICdvcGVubG9hZC5pbycgLCAncGxheWVkLnRvJyAsICdiaXRzaGFyZS5jb20nICwgJ2ZpbGVmYWN0b3J5LmNvbScgLCAnazJzLmNjJyAsICdvYm9vbS5jb20nICwgJ3JhcGlkZ2F0b3IubmV0JyAsICd1cGxvYWRlZC5uZXQnICwgJ3ByaW1lc2hhcmUudHYnICwgJ2JpdHNoYXJlLmNvbScgLCAnZmlsZWZhY3RvcnkuY29tJyAsICdrMnMuY2MnICwgJ29ib29tLmNvbScgLCAncmFwaWRnYXRvci5uZXQnICwgJ3VwbG9hZGVkLm5ldCcgLCAnc2hhcmVyZXBvLmNvbScgLCAnc3RhZ2V2dS5jb20nICwgJ3N0cmVhbWNsb3VkLmV1JyAsICdzdHJlYW1pbi50bycgLCAndGhlZmlsZS5tZScgLCAndGhldmlkZW8ubWUnICwgJ3R1c2ZpbGVzLm5ldCcgLCAndXBsb2FkYy5jb20nICwgJ3phbGFhLmNvbScgLCAndXBsb2Fkcm9ja2V0Lm5ldCcgLCAndXB0b2JveC5jb20nICwgJ3Ytdmlkcy5jb20nICwgJ3ZlZWhkLmNvbScgLCAndmlkYnVsbC5jb20nICwgJ3ZpZGVvbWVnYS50dicgLCAndmlkcGxheS5uZXQnICwgJ3ZpZHNwb3QubmV0JyAsICd2aWR0by5tZScgLCAndmlkemkudHYnICwgJ3ZpbWVvLmNvbScgLCAndmsuY29tJyAsICd2b2Rsb2NrZXIuY29tJyAsICd4ZmlsZWxvYWQuY29tJyAsICd4dmlkc3RhZ2UuY29tJyAsICd6ZXR0YWhvc3QudHYnIF0KSUlpSWlJSTExaSA9IFsgJ3BsdWdpbi52aWRlby5kcmFtYXNvbmxpbmUnICwgJ3BsdWdpbi52aWRlby5mNG1UZXN0ZXInICwgJ3BsdWdpbi52aWRlby5zaGFoaWRtYmNuZXQnICwgJ3BsdWdpbi52aWRlby5TcG9ydHNEZXZpbCcgLCAncGx1Z2luLnN0cmVhbS52YXVnaG5saXZlLnR2JyAsICdwbHVnaW4udmlkZW8uWmVtVFYtc2hhbmknIF0KaWYgNTEgLSA1MTogb09vME8wT29vICogSTFpaTExaUlpMTFpCmNsYXNzIEkxSWlJICggdXJsbGliMiAuIEhUVFBFcnJvclByb2Nlc3NvciApIDoKIGRlZiBodHRwX3Jlc3BvbnNlICggc2VsZiAsIHJlcXVlc3QgLCByZXNwb25zZSApIDoKICByZXR1cm4gcmVzcG9uc2UKIGh0dHBzX3Jlc3BvbnNlID0gaHR0cF9yZXNwb25zZQogaWYgNzMgLSA3MzogT09vb09PbyAvIGlpMTFpaTFpaQpPMDBvb09PID0gJ2h0dHA6Ly9uam1zb2NjZXIuYXJlcy1wcm9qZWN0LmNvbS9tYWluLnhtbCcKaWYgNDcgLSA0Nzogb08wb29PICUgaUkxSWkxMTExMWlJaSArIGlpMUlJMTFJMWlpMUkgKyBvTzBvMG9vTzAgLSBpaUlJSUlJMWkxaUkKbzBvTzAgPSB4Ym1jYWRkb24gLiBBZGRvbiAoICdwbHVnaW4udmlkZW8uTkpNU29jY2VyJyApCm9vMDAgPSBvMG9PMCAuIGdldEFkZG9uSW5mbyAoICd2ZXJzaW9uJyApCm8wMCA9IHhibWMgLiB0cmFuc2xhdGVQYXRoICggbzBvTzAgLiBnZXRBZGRvbkluZm8gKCAncHJvZmlsZScgKSAuIGRlY29kZSAoICd1dGYtOCcgKSApCk9vMG9PMG9vbyA9IHhibWMgLiB0cmFuc2xhdGVQYXRoICggbzBvTzAgLiBnZXRBZGRvbkluZm8gKCAncGF0aCcgKSAuIGRlY29kZSAoICd1dGYtOCcgKSApCm8wb09vTzAwbyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAnZmF2b3JpdGVzJyApCmkxID0gb3MgLiBwYXRoIC4gam9pbiAoIG8wMCAsICdoaXN0b3J5JyApCmlmIDY0IC0gNjQ6IG9vTzBPb29vMDAgJSBPb28wCm9vMDAwMDBvMCA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAnbGlzdF9yZXZpc2lvbicgKQpJMTFpMWkxMWkxSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvTzBvb28gLCAnaWNvbi5wbmcnICkKSWlpaSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvTzBvb28gLCAnZmFuYXJ0LmpwZycgKQpPT08wTyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAnc291cmNlX2ZpbGUnICkKb28wb29PMG9PT09PbyA9IG8wMAppZiA3MSAtIDcxOiBPMDBPb09vbzAwCmRvd25sb2FkZXIgPSBkb3dubG9hZGVyIC4gU2ltcGxlRG93bmxvYWRlciAoICkKaUlpaUkxID0gbzBvTzAgLiBnZXRTZXR0aW5nICggJ2RlYnVnJyApCmlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG8wb09vTzAwbyApID09IFRydWUgOgogT29Pb29PT09PID0gb3BlbiAoIG8wb09vTzAwbyApIC4gcmVhZCAoICkKZWxzZSA6IE9vT29vT09PTyA9IFsgXQppZiBvcyAuIHBhdGggLiBleGlzdHMgKCBPT08wTyApID09IFRydWUgOgogaTExaWlJSSA9IG9wZW4gKCBPT08wTyApIC4gcmVhZCAoICkKZWxzZSA6IGkxMWlpSUkgPSBbIF0KaWYgMzQgLSAzNDogb29vTyAlIE8wICogaUkxSWkxMTExMWlJaSArIGlpMUlJMTFJMWlpMUkgLyBPT29vT09vCmlmIDI1IC0gMjU6IGlpSUlJSUkxaTFpSSAuIGlJaWkxSTExSTFJSTEgJSBPb29vb29vb09PICsgb29vTwpkZWYgbzBPMCAoIHN0cmluZyApIDoKIyAgICBpZiBkZWJ1ZyA9PSAndHJ1ZSc6CiBpZiBpSWlpSTEgPT0gJ2ZhbHNlJyA6CiAgeGJtYyAuIGxvZyAoICJbYWRkb24ubGl2ZS5OSk1Tb2NjZXJyMy0lc106ICVzIiAlICggb28wMCAsIHN0cmluZyApICkKICBpZiA2NyAtIDY3OiBvb29PIC0gaUkxSWkxMTExMWlJaSAqIGlpMTFpaTFpaSAlIGlpMTFpaTFpaSAlIG9PMG8wb29PMCAqIE9Pb29PT28KICBpZiAyNiAtIDI2OiBpaUlJSUlJMWkxaUkgLSBpaTExaWkxaWkKZGVmIG9vaWlpMTFpSUkgKCB1cmwgLCBoZWFkZXJzID0gTm9uZSApIDoKIHRyeSA6CiAgaWYgaGVhZGVycyBpcyBOb25lIDoKICAgaGVhZGVycyA9IHsgJ1VzZXItYWdlbnQnIDogJ0FnZW50MDA3JyB9CiAgaTFJMTExSSA9IHVybGxpYjIgLiBSZXF1ZXN0ICggdXJsICwgTm9uZSAsIGhlYWRlcnMgKQogIGkxMUkxSUlpaUlpID0gdXJsbGliMiAuIHVybG9wZW4gKCBpMUkxMTFJICkKICBJaUlpSWkgPSBpMTFJMUlJaWlJaSAuIHJlYWQgKCApCiAgaTExSTFJSWlpSWkgLiBjbG9zZSAoICkKICByZXR1cm4gSWlJaUlpCiBleGNlcHQgdXJsbGliMiAuIFVSTEVycm9yICwgSUkgOgogIG8wTzAgKCAnVVJMOiAnICsgdXJsICkKICBpZiBoYXNhdHRyICggSUkgLCAnY29kZScgKSA6CiAgIG8wTzAgKCAnV2UgZmFpbGVkIHdpdGggZXJyb3IgY29kZSAtICVzLicgJSBJSSAuIGNvZGUgKQogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oTkpNU29jY2VyLFdlIGZhaWxlZCB3aXRoIGVycm9yIGNvZGUgLSAiICsgc3RyICggSUkgLiBjb2RlICkgKyAiLDEwMDAwLCIgKyBJMTFpMWkxMWkxSSArICIpIiApCiAgZWxpZiBoYXNhdHRyICggSUkgLCAncmVhc29uJyApIDoKICAgbzBPMCAoICdXZSBmYWlsZWQgdG8gcmVhY2ggYSBzZXJ2ZXIuJyApCiAgIG8wTzAgKCAnUmVhc29uOiAlcycgJSBJSSAuIHJlYXNvbiApCiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihOSk1Tb2NjZXIsV2UgZmFpbGVkIHRvIHJlYWNoIGEgc2VydmVyLiAtICIgKyBzdHIgKCBJSSAuIHJlYXNvbiApICsgIiwxMDAwMCwiICsgSTExaTFpMTFpMUkgKyAiKSIgKQogICBpZiAxNCAtIDE0OiBvT28wTzBPb28gLiBvME9vIC8gaWlJSUlJSTFpMWlJCiAgIGlmIDM4IC0gMzg6IG9PME9vb09vTyAlIGkxMWlJaWlJaWkgLiBvb29PIC0gaWkxSUkxMUkxaWkxSSArIGlpSUlJSUkxaTFpSQpkZWYgT29vb28wT28wMG9PMCAoICkgOgogSWlpaTExSTFpMUlpMSAoIE8wMG9vT08gLCAnJyApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgODYgLSA4Njogb29vTyAuIG8wT28gJSBvT28wTzBPb28gKyBpaTExaWkxaWkKIGlmIDM1IC0gMzU6IGlJaWkxSTExSTFJSTEgJSBpSTFJaTExMTExaUlpICogb08wbzBvb08wICUgb08wbzBvb08wICsgb08wT29vT29PICogb29PME9vb28wMAogaWYgNTQgLSA1NDogb08wbzBvb08wICsgT29vMCAvIG9vTzBPb29vMDAKZGVmIElJSUkgKCApIDoKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG8wb09vTzAwbyApID09IFRydWUgOgogIElpMUkgKCAnRmF2b3JpdGVzJyAsICd1cmwnICwgNCAsIG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvTzBvb28gLCAncmVzb3VyY2VzJyAsICdmYXZvcml0ZS5wbmcnICkgLCBJaWlpICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgbzBvTzAgLiBnZXRTZXR0aW5nICggImJyb3dzZV94bWxfZGF0YWJhc2UiICkgPT0gInRydWUiIDoKICBJaTFJICggJ1hNTCBEYXRhYmFzZScgLCAnaHR0cDovL3hibWNwbHVzLnhiLmZ1bnBpYy5kZS93d3ctZGF0YS9maWxlc3lzdGVtLycgLCAxNSAsIEkxMWkxaTExaTFJICwgSWlpaSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIG8wb08wIC4gZ2V0U2V0dGluZyAoICJicm93c2VfY29tbXVuaXR5IiApID09ICJ0cnVlIiA6CiAgSWkxSSAoICdDb21tdW5pdHkgRmlsZXMnICwgJ2NvbW11bml0eV9maWxlcycgLCAxNiAsIEkxMWkxaTExaTFJICwgSWlpaSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIGkxICkgPT0gVHJ1ZSA6CiAgSWkxSSAoICdTZWFyY2ggSGlzdG9yeScgLCAnaGlzdG9yeScgLCAyNSAsIG9zIC4gcGF0aCAuIGpvaW4gKCBPbzBvTzBvb28gLCAncmVzb3VyY2VzJyAsICdmYXZvcml0ZS5wbmcnICkgLCBJaWlpICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgbzBvTzAgLiBnZXRTZXR0aW5nICggInNlYXJjaHl0IiApID09ICJ0cnVlIiA6CiAgSWkxSSAoICdTZWFyY2g6WW91dHViZScgLCAneW91dHViZScgLCAyNSAsIEkxMWkxaTExaTFJICwgSWlpaSAsICcnICwgJycgLCAnJyAsICcnICkKIGlmIG8wb08wIC4gZ2V0U2V0dGluZyAoICJzZWFyY2hETSIgKSA9PSAidHJ1ZSIgOgogIElpMUkgKCAnU2VhcmNoOmRhaWx5bW90aW9uJyAsICdkbW90aW9uJyAsIDI1ICwgSTExaTFpMTFpMUkgLCBJaWlpICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgbzBvTzAgLiBnZXRTZXR0aW5nICggIlB1bHNhck0iICkgPT0gInRydWUiIDoKICBJaTFJICggJ1B1bHNhcjpJTURCJyAsICdJTURCaWRwbGF5JyAsIDI3ICwgSTExaTFpMTFpMUkgLCBJaWlpICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgb3MgLiBwYXRoIC4gZXhpc3RzICggT09PME8gKSA9PSBUcnVlIDoKICBPbzBvMCA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBPT08wTyAsICJyIiApIC4gcmVhZCAoICkgKQogIGlmIDQ5IC0gNDk6IGlJMUlpMTExMTFpSWkgJSBpaUlJSUlJMWkxaUkgKyBpMUlJaSAuIG8wT28gJSBvTzBvb08KICBpZiBsZW4gKCBPbzBvMCApID4gMSA6CiAgIGZvciBJMWkxaWlpIGluIE9vMG8wIDoKICAgIGlmIDIwIC0gMjA6IGlpMTFpaTFpaQogICAgaWYgaXNpbnN0YW5jZSAoIEkxaTFpaWkgLCBsaXN0ICkgOgogICAgIElpMUkgKCBJMWkxaWlpIFsgMCBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgSTFpMWlpaSBbIDEgXSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDEgLCBJMTFpMWkxMWkxSSAsIElpaWkgLCAnJyAsICcnICwgJycgLCAnJyAsICdzb3VyY2UnICkKICAgIGVsc2UgOgogICAgIG9PMDAgPSBJMTFpMWkxMWkxSQogICAgIG9vbyA9IElpaWkKICAgICBpaTFJMWkxSSA9ICcnCiAgICAgT09vbzBPMCA9ICcnCiAgICAgY3JlZGl0cyA9ICcnCiAgICAgaWlpSWkxaTFJID0gJycKICAgICBpZiBJMWkxaWlpIC4gaGFzX2tleSAoICd0aHVtYm5haWwnICkgOgogICAgICBvTzAwID0gSTFpMWlpaSBbICd0aHVtYm5haWwnIF0KICAgICBpZiBJMWkxaWlpIC4gaGFzX2tleSAoICdmYW5hcnQnICkgOgogICAgICBvb28gPSBJMWkxaWlpIFsgJ2ZhbmFydCcgXQogICAgIGlmIEkxaTFpaWkgLiBoYXNfa2V5ICggJ2Rlc2NyaXB0aW9uJyApIDoKICAgICAgaWkxSTFpMUkgPSBJMWkxaWlpIFsgJ2Rlc2NyaXB0aW9uJyBdCiAgICAgaWYgSTFpMWlpaSAuIGhhc19rZXkgKCAnZGF0ZScgKSA6CiAgICAgIE9Pb28wTzAgPSBJMWkxaWlpIFsgJ2RhdGUnIF0KICAgICBpZiBJMWkxaWlpIC4gaGFzX2tleSAoICdnZW5yZScgKSA6CiAgICAgIGlpaUlpMWkxSSA9IEkxaTFpaWkgWyAnZ2VucmUnIF0KICAgICBpZiBJMWkxaWlpIC4gaGFzX2tleSAoICdjcmVkaXRzJyApIDoKICAgICAgY3JlZGl0cyA9IEkxaTFpaWkgWyAnY3JlZGl0cycgXQogICAgIElpMUkgKCBJMWkxaWlpIFsgJ3RpdGxlJyBdIC4gZW5jb2RlICggJ3V0Zi04JyApICwgSTFpMWlpaSBbICd1cmwnIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCAxICwgb08wMCAsIG9vbyAsIGlpMUkxaTFJICwgaWlpSWkxaTFJICwgT09vbzBPMCAsIGNyZWRpdHMgLCAnc291cmNlJyApCiAgICAgaWYgODAgLSA4MDogT09vb09PbyAtIEkxaWkxMWlJaTExaQogIGVsc2UgOgogICBpZiBsZW4gKCBPbzBvMCApID09IDEgOgogICAgaWYgaXNpbnN0YW5jZSAoIE9vMG8wIFsgMCBdICwgbGlzdCApIDoKICAgICBJaWlpMTFJMWkxSWkxICggT28wbzAgWyAwIF0gWyAxIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCBJaWlpICkKICAgIGVsc2UgOgogICAgIElpaWkxMUkxaTFJaTEgKCBPbzBvMCBbIDAgXSBbICd1cmwnIF0gLCBPbzBvMCBbIDAgXSBbICdmYW5hcnQnIF0gKQogICAgIGlmIDg3IC0gODc6IGlJMUlpMTExMTFpSWkgLyBvTzBvMG9vTzAgLSBpMUlJaSAqIGlpMUlJMTFJMWlpMUkgLyBPb29vb29vb09PIC4gTzAKICAgICBpZiAxIC0gMTogb08wT29vT29PIC0gb08wbzBvb08wIC8gb08wbzBvb08wCmRlZiBJMUlJMUlJSTExaWlpICggdXJsID0gTm9uZSApIDoKIGlmIHVybCBpcyBOb25lIDoKICBpZiBub3QgbzBvTzAgLiBnZXRTZXR0aW5nICggIm5ld19maWxlX3NvdXJjZSIgKSA9PSAiIiA6CiAgIE9vMDAwID0gbzBvTzAgLiBnZXRTZXR0aW5nICggJ25ld19maWxlX3NvdXJjZScgKSAuIGRlY29kZSAoICd1dGYtOCcgKQogIGVsaWYgbm90IG8wb08wIC4gZ2V0U2V0dGluZyAoICJuZXdfdXJsX3NvdXJjZSIgKSA9PSAiIiA6CiAgIE9vMDAwID0gbzBvTzAgLiBnZXRTZXR0aW5nICggJ25ld191cmxfc291cmNlJyApIC4gZGVjb2RlICggJ3V0Zi04JyApCiBlbHNlIDoKICBPbzAwMCA9IHVybAogaWYgT28wMDAgPT0gJycgb3IgT28wMDAgaXMgTm9uZSA6CiAgcmV0dXJuCiBvME8wICggJ0FkZGluZyBOZXcgU291cmNlOiAnICsgT28wMDAgLiBlbmNvZGUgKCAndXRmLTgnICkgKQogaWYgNTEgLSA1MTogaTExaUlpaUlpaSAuIG8wT28gKyBvTzBPb29Pb08KIElJMTExaWkxSUkxaSA9IE5vbmUKIGlmIDU5IC0gNTk6IE8wICsgbzBPbyArIE9vbzAgJSBvME9vCiBJaUlpSWkgPSBvME9Pb28wT08wT09PICggT28wMDAgKQogcHJpbnQgJ3NvdXJjZV91cmwnICwgT28wMDAKIGlmIGlzaW5zdGFuY2UgKCBJaUlpSWkgLCBCZWF1dGlmdWxTT0FQICkgOgogIGlmIElpSWlJaSAuIGZpbmQgKCAnY2hhbm5lbHNfaW5mbycgKSA6CiAgIElJMTExaWkxSUkxaSA9IElpSWlJaSAuIGNoYW5uZWxzX2luZm8KICBlbGlmIElpSWlJaSAuIGZpbmQgKCAnaXRlbXNfaW5mbycgKSA6CiAgIElJMTExaWkxSUkxaSA9IElpSWlJaSAuIGl0ZW1zX2luZm8KIGlmIElJMTExaWkxSUkxaSA6CiAgaUkxaUkxSTFpMUkgPSB7IH0KICBpSTFpSTFJMWkxSSBbICd1cmwnIF0gPSBPbzAwMAogIHRyeSA6IGlJMWlJMUkxaTFJIFsgJ3RpdGxlJyBdID0gSUkxMTFpaTFJSTFpIC4gdGl0bGUgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogaUkxaUkxSTFpMUkgWyAndGh1bWJuYWlsJyBdID0gSUkxMTFpaTFJSTFpIC4gdGh1bWJuYWlsIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IGlJMWlJMUkxaTFJIFsgJ2ZhbmFydCcgXSA9IElJMTExaWkxSUkxaSAuIGZhbmFydCAuIHN0cmluZwogIGV4Y2VwdCA6IHBhc3MKICB0cnkgOiBpSTFpSTFJMWkxSSBbICdnZW5yZScgXSA9IElJMTExaWkxSUkxaSAuIGdlbnJlIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIHRyeSA6IGlJMWlJMUkxaTFJIFsgJ2Rlc2NyaXB0aW9uJyBdID0gSUkxMTFpaTFJSTFpIC4gZGVzY3JpcHRpb24gLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogaUkxaUkxSTFpMUkgWyAnZGF0ZScgXSA9IElJMTExaWkxSUkxaSAuIGRhdGUgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgdHJ5IDogaUkxaUkxSTFpMUkgWyAnY3JlZGl0cycgXSA9IElJMTExaWkxSUkxaSAuIGNyZWRpdHMgLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiBlbHNlIDoKICBpZiAnLycgaW4gT28wMDAgOgogICBpSWkxMUlpMSA9IE9vMDAwIC4gc3BsaXQgKCAnLycgKSBbIC0gMSBdIC4gc3BsaXQgKCAnLicgKSBbIDAgXQogIGlmICdcXCcgaW4gT28wMDAgOgogICBpSWkxMUlpMSA9IE9vMDAwIC4gc3BsaXQgKCAnXFwnICkgWyAtIDEgXSAuIHNwbGl0ICggJy4nICkgWyAwIF0KICBpZiAnJScgaW4gaUlpMTFJaTEgOgogICBpSWkxMUlpMSA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIGlJaTExSWkxICkKICBJaTExaUlJMSA9IHhibWMgLiBLZXlib2FyZCAoIGlJaTExSWkxICwgJ0Rpc3BsYXllZCBOYW1lLCBSZW5hbWU/JyApCiAgSWkxMWlJSTEgLiBkb01vZGFsICggKQogIGlmICggSWkxMWlJSTEgLiBpc0NvbmZpcm1lZCAoICkgPT0gRmFsc2UgKSA6CiAgIHJldHVybgogIE9vME8wTzBvb08wTyA9IElpMTFpSUkxIC4gZ2V0VGV4dCAoICkKICBpZiBsZW4gKCBPbzBPME8wb29PME8gKSA9PSAwIDoKICAgcmV0dXJuCiAgaUkxaUkxSTFpMUkgPSB7IH0KICBpSTFpSTFJMWkxSSBbICd0aXRsZScgXSA9IE9vME8wTzBvb08wTwogIGlJMWlJMUkxaTFJIFsgJ3VybCcgXSA9IE9vMDAwCiAgaUkxaUkxSTFpMUkgWyAnZmFuYXJ0JyBdID0gb29vCiAgaWYgMTUgLSAxNTogb08wb29PICsgT09vb09PbyAtIE9vb29vb29vT08gLyBpaTFJSTExSTFpaTFJCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBPT08wTyApID09IEZhbHNlIDoKICBvbzAwME9PMDBPbyA9IFsgXQogIG9vMDAwT08wME9vIC4gYXBwZW5kICggaUkxaUkxSTFpMUkgKQogIE8wT09PME9Pb08wTyA9IG9wZW4gKCBPT08wTyAsICJ3IiApCiAgTzBPT08wT09vTzBPIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBvbzAwME9PMDBPbyApICkKICBPME9PTzBPT29PME8gLiBjbG9zZSAoICkKIGVsc2UgOgogIE9vMG8wID0ganNvbiAuIGxvYWRzICggb3BlbiAoIE9PTzBPICwgInIiICkgLiByZWFkICggKSApCiAgT28wbzAgLiBhcHBlbmQgKCBpSTFpSTFJMWkxSSApCiAgTzBPT08wT09vTzBPID0gb3BlbiAoIE9PTzBPICwgInciICkKICBPME9PTzBPT29PME8gLiB3cml0ZSAoIGpzb24gLiBkdW1wcyAoIE9vMG8wICkgKQogIE8wT09PME9Pb08wTyAuIGNsb3NlICggKQogbzBvTzAgLiBzZXRTZXR0aW5nICggJ25ld191cmxfc291cmNlJyAsICIiICkKIG8wb08wIC4gc2V0U2V0dGluZyAoICduZXdfZmlsZV9zb3VyY2UnICwgIiIgKQogeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKE5KTVNvY2NlcixOZXcgc291cmNlIGFkZGVkLiw1MDAwLCIgKyBJMTFpMWkxMWkxSSArICIpIiApCiBpZiBub3QgdXJsIGlzIE5vbmUgOgogIGlmICd4Ym1jcGx1cy54Yi5mdW5waWMuZGUnIGluIHVybCA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5VcGRhdGUoJXM/bW9kZT0xNCxyZXBsYWNlKSIgJSBzeXMgLiBhcmd2IFsgMCBdICkKICBlbGlmICdjb21tdW5pdHktbGlua3MnIGluIHVybCA6CiAgIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5VcGRhdGUoJXM/bW9kZT0xMCxyZXBsYWNlKSIgJSBzeXMgLiBhcmd2IFsgMCBdICkKIGVsc2UgOiBvMG9PMCAuIG9wZW5TZXR0aW5ncyAoICkKIGlmIDcwIC0gNzA6IE9vbzAgKiBvT28wTzBPb28gKiBvTzBvMG9vTzAgLyBpaUlJSUlJMWkxaUkKIGlmIDg4IC0gODg6IE8wCmRlZiBPME9vTzBPMDBvMG9PICggbmFtZSApIDoKIE9vMG8wID0ganNvbiAuIGxvYWRzICggb3BlbiAoIE9PTzBPICwgInIiICkgLiByZWFkICggKSApCiBmb3IgSTFpaTFJaTEgaW4gcmFuZ2UgKCBsZW4gKCBPbzBvMCApICkgOgogIGlmIGlzaW5zdGFuY2UgKCBPbzBvMCBbIEkxaWkxSWkxIF0gLCBsaXN0ICkgOgogICBpZiBPbzBvMCBbIEkxaWkxSWkxIF0gWyAwIF0gPT0gbmFtZSA6CiAgICBkZWwgT28wbzAgWyBJMWlpMUlpMSBdCiAgICBPME9PTzBPT29PME8gPSBvcGVuICggT09PME8gLCAidyIgKQogICAgTzBPT08wT09vTzBPIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBPbzBvMCApICkKICAgIE8wT09PME9Pb08wTyAuIGNsb3NlICggKQogICAgYnJlYWsKICBlbHNlIDoKICAgaWYgT28wbzAgWyBJMWlpMUlpMSBdIFsgJ3RpdGxlJyBdID09IG5hbWUgOgogICAgZGVsIE9vMG8wIFsgSTFpaTFJaTEgXQogICAgTzBPT08wT09vTzBPID0gb3BlbiAoIE9PTzBPICwgInciICkKICAgIE8wT09PME9Pb08wTyAuIHdyaXRlICgganNvbiAuIGR1bXBzICggT28wbzAgKSApCiAgICBPME9PTzBPT29PME8gLiBjbG9zZSAoICkKICAgIGJyZWFrCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Db250YWluZXIuUmVmcmVzaCIgKQogaWYgMTUgLSAxNTogb08wT29vT29PIC8gb29PME9vb28wMCAuIE8wME9vT29vMDAKIGlmIDY4IC0gNjg6IEkxaWkxMWlJaTExaQogaWYgMzUgLSAzNTogSTFpaTExaUlpMTFpIC0gb29PME9vb28wMCAvIG9PbzBPME9vbyAvIE9Pb29PT28KZGVmIEkxaTFJaUkxICggdXJsICwgYnJvd3NlID0gRmFsc2UgKSA6CiBpZiB1cmwgaXMgTm9uZSA6CiAgdXJsID0gJ2h0dHA6Ly94Ym1jcGx1cy54Yi5mdW5waWMuZGUvd3d3LWRhdGEvZmlsZXN5c3RlbS8nCiBvTzBvME9PT08gPSBCZWF1dGlmdWxTb3VwICggb29paWkxMWlJSSAoIHVybCApICwgY29udmVydEVudGl0aWVzID0gQmVhdXRpZnVsU291cCAuIEhUTUxfRU5USVRJRVMgKQogZm9yIEkxaTFpaWkgaW4gb08wbzBPT09PICggJ2EnICkgOgogIE8wTzBPb09PMCA9IEkxaTFpaWkgWyAnaHJlZicgXQogIGlmIG5vdCBPME8wT29PTzAgLiBzdGFydHN3aXRoICggJz8nICkgOgogICBpaWlJMUkxMWkxID0gSTFpMWlpaSAuIHN0cmluZwogICBpZiBpaWlJMUkxMWkxIG5vdCBpbiBbICdQYXJlbnQgRGlyZWN0b3J5JyAsICdyZWN5Y2xlX2Jpbi8nIF0gOgogICAgaWYgTzBPME9vT08wIC4gZW5kc3dpdGggKCAnLycgKSA6CiAgICAgaWYgYnJvd3NlIDoKICAgICAgSWkxSSAoIGlpaUkxSTExaTEgLCB1cmwgKyBPME8wT29PTzAgLCAxNSAsIEkxMWkxaTExaTFJICwgb29vICwgJycgLCAnJyAsICcnICkKICAgICBlbHNlIDoKICAgICAgSWkxSSAoIGlpaUkxSTExaTEgLCB1cmwgKyBPME8wT29PTzAgLCAxNCAsIEkxMWkxaTExaTFJICwgb29vICwgJycgLCAnJyAsICcnICkKICAgIGVsaWYgTzBPME9vT08wIC4gZW5kc3dpdGggKCAnLnhtbCcgKSA6CiAgICAgaWYgYnJvd3NlIDoKICAgICAgSWkxSSAoIGlpaUkxSTExaTEgLCB1cmwgKyBPME8wT29PTzAgLCAxICwgSTExaTFpMTFpMUkgLCBvb28gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICAgIGVsc2UgOgogICAgICBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBPT08wTyApID09IFRydWUgOgogICAgICAgaWYgaWlpSTFJMTFpMSBpbiBpMTFpaUlJIDoKICAgICAgICBJaTFJICggaWlpSTFJMTFpMSArICcgKGluIHVzZSknICwgdXJsICsgTzBPME9vT08wICwgMTEgLCBJMTFpMWkxMWkxSSAsIG9vbyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgICBlbHNlIDoKICAgICAgICBJaTFJICggaWlpSTFJMTFpMSAsIHVybCArIE8wTzBPb09PMCAsIDExICwgSTExaTFpMTFpMUkgLCBvb28gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICAgICBlbHNlIDoKICAgICAgIElpMUkgKCBpaWlJMUkxMWkxICwgdXJsICsgTzBPME9vT08wICwgMTEgLCBJMTFpMWkxMWkxSSAsIG9vbyAsICcnICwgJycgLCAnJyAsICcnICwgJ2Rvd25sb2FkJyApCiAgICAgICBpZiA0OSAtIDQ5OiBvME9vICUgb29vTyAuIG9vb08gLiBvTzBvMG9vTzAgKiBvb29PCiAgICAgICBpZiA5NyAtIDk3OiBpaUlJSUlJMWkxaUkgKyBpaTExaWkxaWkgLiBpaTFJSTExSTFpaTFJICsgb08wb29PICUgb29PME9vb28wMApkZWYgb28wTyAoIGJyb3dzZSA9IEZhbHNlICkgOgogbzAgPSAnaHR0cDovL2NvbW11bml0eS1saW5rcy5nb29nbGVjb2RlLmNvbS9zdm4vdHJ1bmsvJwogb08wbzBPT09PID0gQmVhdXRpZnVsU291cCAoIG9vaWlpMTFpSUkgKCBvMCApICwgY29udmVydEVudGl0aWVzID0gQmVhdXRpZnVsU291cCAuIEhUTUxfRU5USVRJRVMgKQogb28wb09vID0gb08wbzBPT09PICggJ3VsJyApIFsgMCBdICggJ2xpJyApIFsgMSA6IF0KIGZvciBJMWkxaWlpIGluIG9vMG9PbyA6CiAgaWlpSTFJMTFpMSA9IEkxaTFpaWkgKCAnYScgKSBbIDAgXSBbICdocmVmJyBdCiAgaWYgYnJvd3NlIDoKICAgSWkxSSAoIGlpaUkxSTExaTEgLCBvMCArIGlpaUkxSTExaTEgLCAxICwgSTExaTFpMTFpMUkgLCBvb28gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogIGVsc2UgOgogICBJaTFJICggaWlpSTFJMTFpMSAsIG8wICsgaWlpSTFJMTFpMSAsIDExICwgSTExaTFpMTFpMUkgLCBvb28gLCAnJyAsICcnICwgJycgLCAnJyAsICdkb3dubG9hZCcgKQogICBpZiA4OSAtIDg5OiBPT29vT09vCiAgIGlmIDY4IC0gNjg6IEkxaWkxMWlJaTExaSAqIE9vb29vb29vT08gJSBPMCArIEkxaWkxMWlJaTExaSArIG9vb08KZGVmIG8wT09vbzBPTzBPT08gKCB1cmwgLCBkYXRhID0gTm9uZSApIDoKIHByaW50ICdnZXRzb3VwJyAsIHVybCAsIGRhdGEKIGlmIHVybCAuIHN0YXJ0c3dpdGggKCAnaHR0cDovLycgKSBvciB1cmwgLiBzdGFydHN3aXRoICggJ2h0dHBzOi8vJyApIDoKICBkYXRhID0gb29paWkxMWlJSSAoIHVybCApCiAgaWYgcmUgLiBzZWFyY2ggKCAiI0VYVE0zVSIgLCBkYXRhICkgb3IgJ20zdScgaW4gdXJsIDoKICAgcHJpbnQgJ2ZvdW5kIG0zdSBkYXRhJyAsIGRhdGEKICAgcmV0dXJuIGRhdGEKICAgaWYgNCAtIDQ6IG9vb08gKyBPMCAqIGlpMUlJMTFJMWlpMUkKIGVsaWYgZGF0YSA9PSBOb25lIDoKICBpZiB4Ym1jdmZzIC4gZXhpc3RzICggdXJsICkgOgogICBpZiB1cmwgLiBzdGFydHN3aXRoICggInNtYjovLyIgKSBvciB1cmwgLiBzdGFydHN3aXRoICggIm5mczovLyIgKSA6CiAgICBPT29vME8gPSB4Ym1jdmZzIC4gY29weSAoIHVybCAsIG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAndGVtcCcgLCAnc29yY2VfdGVtcC50eHQnICkgKQogICAgaWYgT09vbzBPIDoKICAgICBkYXRhID0gb3BlbiAoIG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAndGVtcCcgLCAnc29yY2VfdGVtcC50eHQnICkgLCAiciIgKSAuIHJlYWQgKCApCiAgICAgeGJtY3ZmcyAuIGRlbGV0ZSAoIG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAndGVtcCcgLCAnc29yY2VfdGVtcC50eHQnICkgKQogICAgZWxzZSA6CiAgICAgbzBPMCAoICJmYWlsZWQgdG8gY29weSBmcm9tIHNtYjoiICkKICAgZWxzZSA6CiAgICBkYXRhID0gb3BlbiAoIHVybCAsICdyJyApIC4gcmVhZCAoICkKICAgIGlmIHJlIC4gbWF0Y2ggKCAiI0VYVE0zVSIgLCBkYXRhICkgb3IgJ20zdScgaW4gdXJsIDoKICAgICBwcmludCAnZm91bmQgbTN1IGRhdGEnICwgZGF0YQogICAgIHJldHVybiBkYXRhCiAgZWxzZSA6CiAgIG8wTzAgKCAiU291cCBEYXRhIG5vdCBmb3VuZCEiICkKICAgcmV0dXJuCiByZXR1cm4gQmVhdXRpZnVsU09BUCAoIGRhdGEgLCBjb252ZXJ0RW50aXRpZXMgPSBCZWF1dGlmdWxTdG9uZVNvdXAgLiBYTUxfRU5USVRJRVMgKQogaWYgNjcgLSA2NzogaTExaUlpaUlpaSAtIGkxSUlpICUgb08wb29PIC4gTzAKIGlmIDc3IC0gNzc6IE9vbzAgLyBvME9vCmRlZiBJaWlpMTFJMWkxSWkxICggdXJsICwgZmFuYXJ0ICkgOgogcHJpbnQgJ3VybC1nZXREYXRhJyAsIHVybAogSTEgPSAiTGlzdCIKIGlmIDE1IC0gMTU6IG9PME9vb09vTwogb08wbzBPT09PID0gbzBPT29vME9PME9PTyAoIHVybCApCiBpZiAxOCAtIDE4OiBpMTFpSWlpSWlpIC4gaTFJSWkgJSBPb29vb29vb09PIC8gTzAKIGlmIGlzaW5zdGFuY2UgKCBvTzBvME9PT08gLCBCZWF1dGlmdWxTT0FQICkgOgogIGlmIGxlbiAoIG9PMG8wT09PTyAoICdsYXlvdXR5cGUnICkgKSA+IDAgOgogICBJMSA9ICJUaHVtYm5haWwiCiAgIGlmIDc1IC0gNzU6IE9Pb29PT28gJSBpaTExaWkxaWkgJSBpaTExaWkxaWkgLiBPMDBPb09vbzAwCiAgaWYgbGVuICggb08wbzBPT09PICggJ2NoYW5uZWxzJyApICkgPiAwIDoKICAgSUlJMWlJSTFJMWlpID0gb08wbzBPT09PICggJ2NoYW5uZWwnICkKICAgZm9yIG9PT28wIGluIElJSTFpSUkxSTFpaSA6CiAgICBpZiA1NCAtIDU0OiBPMCAtIE9vbzAgJSBpaTFJSTExSTFpaTFJCiAgICBpZiA3NyAtIDc3OiBPT29vT09vIC8gbzBPbyAvIEkxaWkxMWlJaTExaSArIEkxaWkxMWlJaTExaSAuIGlpMUlJMTFJMWlpMUkKICAgIGlpMWlpMTFJSUlpaUkgPSAnJwogICAgTzAwT09Pb09vbzBPID0gMAogICAgdHJ5IDoKICAgICBpaTFpaTExSUlJaWlJID0gb09PbzAgKCAnZXh0ZXJuYWxsaW5rJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgTzAwT09Pb09vbzBPID0gbGVuICggb09PbzAgKCAnZXh0ZXJuYWxsaW5rJyApICkKICAgIGV4Y2VwdCA6IHBhc3MKICAgIGlmIDc3IC0gNzc6IG9vTzBPb29vMDAgJSBvb08wT29vbzAwICogaUkxSWkxMTExMWlJaSAtIGkxMWlJaWlJaWkKICAgIGlmIE8wME9PT29Pb28wTyA+IDEgOiBpaTFpaTExSUlJaWlJID0gJycKICAgIGlmIDkzIC0gOTM6IE9vb29vb29vT08gLyBvME9vICUgaTExaUlpaUlpaSArIG9PMG9vTyAqIEkxaWkxMWlJaTExaQogICAgaWlpSTFJMTFpMSA9IG9PT28wICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcKICAgIEkxaUkxMUlpID0gb09PbzAgKCAndGh1bWJuYWlsJyApIFsgMCBdIC4gc3RyaW5nCiAgICBpZiBJMWlJMTFJaSA9PSBOb25lIDoKICAgICBJMWlJMTFJaSA9ICcnCiAgICAgaWYgNiAtIDY6IGlJMUlpMTExMTFpSWkKICAgIHRyeSA6CiAgICAgaWYgbm90IG9PT28wICggJ2ZhbmFydCcgKSA6CiAgICAgIGlmIG8wb08wIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICAgIG9PT28wb09vMCA9IEkxaUkxMUlpCiAgICAgIGVsc2UgOgogICAgICAgb09PbzBvT28wID0gZmFuYXJ0CiAgICAgZWxzZSA6CiAgICAgIG9PT28wb09vMCA9IG9PT28wICggJ2ZhbmFydCcgKSBbIDAgXSAuIHN0cmluZwogICAgIGlmIG9PT28wb09vMCA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgb09PbzBvT28wID0gZmFuYXJ0CiAgICAgaWYgNDkgLSA0OTogb09vME8wT29vIC4gaTExaUlpaUlpaSAtIGkxSUlpIC8gb08wT29vT29PIC4gbzBPbwogICAgdHJ5IDoKICAgICBpaTFJMWkxSSA9IG9PT28wICggJ2luZm8nICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBpaTFJMWkxSSA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgaWkxSTFpMUkgPSAnJwogICAgIGlmIDEgLSAxOiBvT28wTzBPb28gLyBpaTExaWkxaWkgJSBvb08wT29vbzAwICogT29vMCAuIGkxMWlJaWlJaWkKICAgIHRyeSA6CiAgICAgaWlpSWkxaTFJID0gb09PbzAgKCAnZ2VucmUnICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBpaWlJaTFpMUkgPT0gTm9uZSA6CiAgICAgIHJhaXNlCiAgICBleGNlcHQgOgogICAgIGlpaUlpMWkxSSA9ICcnCiAgICAgaWYgMiAtIDI6IG9PMG9vTyAqIG9PMG8wb29PMCAtIGlJaWkxSTExSTFJSTEgKyBvME9vIC4gaUkxSWkxMTExMWlJaSAlIG9vTzBPb29vMDAKICAgIHRyeSA6CiAgICAgT09vbzBPMCA9IG9PT28wICggJ2RhdGUnICkgWyAwIF0gLiBzdHJpbmcKICAgICBpZiBPT29vME8wID09IE5vbmUgOgogICAgICByYWlzZQogICAgZXhjZXB0IDoKICAgICBPT29vME8wID0gJycKICAgICBpZiA5MiAtIDkyOiBvb08wT29vbzAwCiAgICB0cnkgOgogICAgIGNyZWRpdHMgPSBvT09vMCAoICdjcmVkaXRzJyApIFsgMCBdIC4gc3RyaW5nCiAgICAgaWYgY3JlZGl0cyA9PSBOb25lIDoKICAgICAgcmFpc2UKICAgIGV4Y2VwdCA6CiAgICAgY3JlZGl0cyA9ICcnCiAgICAgaWYgMjUgLSAyNTogb09vME8wT29vIC0gbzBPbyAvIE9vb29vb29vT08gLyBpaTExaWkxaWkKICAgIHRyeSA6CiAgICAgaWYgaWkxaWkxMUlJSWlpSSA9PSAnJyA6CiAgICAgIElpMUkgKCBpaWlJMUkxMWkxIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgLCB1cmwgLiBlbmNvZGUgKCAndXRmLTgnICkgLCAyICwgSTFpSTExSWkgLCBvT09vMG9PbzAgLCBpaTFJMWkxSSAsIGlpaUlpMWkxSSAsIE9Pb28wTzAgLCBjcmVkaXRzICwgVHJ1ZSApCiAgICAgZWxzZSA6CiAgICAgIGlmIDEyIC0gMTI6IG8wT28gKiBvb08wT29vbzAwICUgaTFJSWkgJSBpSWlpMUkxMUkxSUkxCiAgICAgIElpMUkgKCBpaWlJMUkxMWkxIC4gZW5jb2RlICggJ3V0Zi04JyApICwgaWkxaWkxMUlJSWlpSSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDEgLCBJMWlJMTFJaSAsIG9PT28wb09vMCAsIGlpMUkxaTFJICwgaWlpSWkxaTFJICwgT09vbzBPMCAsIE5vbmUgLCAnc291cmNlJyApCiAgICBleGNlcHQgOgogICAgIG8wTzAgKCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgZGlyZWN0b3J5IGZyb20gZ2V0RGF0YSgpOiAnICsgaWlpSTFJMTFpMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICBlbHNlIDoKICAgbzBPMCAoICdObyBDaGFubmVsczogZ2V0SXRlbXMnICkKICAgSUlpMUkxMUkxSUkgKCBvTzBvME9PT08gKCAnaXRlbScgKSAsIGZhbmFydCApCiBlbHNlIDoKICBPb29Pb29vT28gKCBvTzBvME9PT08gKQogIGlmIDQ2IC0gNDY6IG9vTzBPb29vMDAKIGlmIEkxID09ICJUaHVtYm5haWwiIDoKICBJSUlJSTExSTFJaUkgKCApCiAgaWYgMTYgLSAxNjogaUlpaTFJMTFJMUlJMQogIGlmIDkwIC0gOTA6IGlpMTFpaTFpaSAlIGkxSUlpIC8gSTFpaTExaUlpMTFpCiAgaWYgNDQgLSA0NDogb09vME8wT29vIC4gSTFpaTExaUlpMTFpIC8gb08wb29PICsgaWlJSUlJSTFpMWlJCiAgaWYgNjUgLSA2NTogTzAKICBpZiA2OCAtIDY4OiBpaTFJSTExSTFpaTFJICUgTzAwT29Pb28wMApkZWYgT29vT29vb09vICggZGF0YSApIDoKIG9vTzAwT08wID0gZGF0YSAuIHJzdHJpcCAoICkKIGkxMTExMUlJSUlJID0gcmUgLiBjb21waWxlICggcicjRVhUSU5GOiguKz8pLCguKj8pW1xuXHJdKyhbXlxuXSspJyApIC4gZmluZGFsbCAoIG9vTzAwT08wICkKIGlJaWlpMWkxMTFpSTEgPSBsZW4gKCBpMTExMTFJSUlJSSApCiBwcmludCAndG90YWwgbTN1IGxpbmtzJyAsIGlJaWlpMWkxMTFpSTEKIGZvciBpMTEgLCBvTzBvT28wICwgSTFJMUkgaW4gaTExMTExSUlJSUkgOgogIGlmICd0dmctbG9nbycgaW4gaTExIDoKICAgSTFpSTExSWkgPSBPb09PMDAwICggaTExICwgJ3R2Zy1sb2dvPVtcJyJdKC4qPylbXCciXScgKQogICBpZiBJMWlJMTFJaSA6CiAgICBpZiBJMWlJMTFJaSAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgICAgSTFpSTExSWkgPSBJMWlJMTFJaQogICAgIGlmIDE0IC0gMTQ6IE9vbzAgLSBvTzBvb08KICAgIGVsaWYgbm90IG8wb08wIC4gZ2V0U2V0dGluZyAoICdsb2dvLWZvbGRlclBhdGgnICkgPT0gIiIgOgogICAgIElpMWkxaUkxaUlJaSA9IG8wb08wIC4gZ2V0U2V0dGluZyAoICdsb2dvLWZvbGRlclBhdGgnICkKICAgICBJMWlJMTFJaSA9IElpMWkxaUkxaUlJaSArIEkxaUkxMUlpCiAgICAgaWYgNiAtIDY6IG9vb08gLyBpMTFpSWlpSWlpICsgb29PME9vb28wMCAqIGlJMUlpMTExMTFpSWkKICAgIGVsc2UgOgogICAgIEkxaUkxMUlpID0gSTFpSTExSWkKICAgICBpZiA4MCAtIDgwOiBvTzBPb29Pb08KICAgICBpZiA4MyAtIDgzOiBvTzBvMG9vTzAgLiBpMTFpSWlpSWlpICsgb08wT29vT29PIC4gaWkxMWlpMWlpICogb08wbzBvb08wCiAgZWxzZSA6CiAgIEkxaUkxMUlpID0gJycKICBpZiAndHlwZScgaW4gaTExIDoKICAgb29vTzAgPSBPb09PMDAwICggaTExICwgJ3R5cGU9W1wnIl0oLio/KVtcJyJdJyApCiAgIGlmIG9vb08wID09ICd5dC1kbCcgOgogICAgSTFJMUkgPSBJMUkxSSArICImbW9kZT0xOCIKICAgZWxpZiBvb29PMCA9PSAncmVnZXgnIDoKICAgIG8wID0gSTFJMUkgLiBzcGxpdCAoICcmcmVnZXhzPScgKQogICAgaWYgNDYgLSA0NjogTzAwT29Pb28wMAogICAgb29vT09vT08gPSBJSU9PT08wb28wICggbzBPT29vME9PME9PTyAoICcnICwgZGF0YSA9IG8wIFsgMSBdICkgKQogICAgaWYgMzUgLSAzNTogaWlJSUlJSTFpMWlJIC0gbzBPbyAlIGlpMTFpaTFpaSAuIE9vb29vb29vT08gJSBpaUlJSUlJMWkxaUkKICAgIEkxaTFJaWlpaSAoIG8wIFsgMCBdICwgb08wb09vMCAsIEkxaUkxMUlpICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCBvb29PT29PTyAsIGlJaWlpMWkxMTFpSTEgKQogICAgY29udGludWUKICBJMWkxSWlpaWkgKCBJMUkxSSAsIG9PMG9PbzAgLCBJMWlJMTFJaSAsICcnICwgJycgLCAnJyAsICcnICwgJycgLCBOb25lICwgJycgLCBpSWlpaTFpMTExaUkxICkKICBpZiA5NCAtIDk0OiBpaTExaWkxaWkgKiBpaUlJSUlJMWkxaUkgLyBvT28wTzBPb28gLyBpaUlJSUlJMWkxaUkKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJDb250YWluZXIuU2V0Vmlld01vZGUoNTApIiApCiBpZiA4NyAtIDg3OiBvT28wTzBPb28gLiBPb28wCmRlZiBPME9PME8gKCBuYW1lICwgdXJsICwgZmFuYXJ0ICkgOgogb08wbzBPT09PID0gbzBPT29vME9PME9PTyAoIHVybCApCiBPTyA9IG9PMG8wT09PTyAuIGZpbmQgKCAnY2hhbm5lbCcgLCBhdHRycyA9IHsgJ25hbWUnIDogbmFtZSAuIGRlY29kZSAoICd1dGYtOCcgKSB9ICkKIE9vT29PID0gT08gKCAnaXRlbScgKQogdHJ5IDoKICBvT09vMG9PbzAgPSBPTyAoICdmYW5hcnQnICkgWyAwIF0gLiBzdHJpbmcKICBpZiBvT09vMG9PbzAgPT0gTm9uZSA6CiAgIHJhaXNlCiBleGNlcHQgOgogIG9PT28wb09vMCA9IGZhbmFydAogZm9yIG9PT28wIGluIE9PICggJ3N1YmNoYW5uZWwnICkgOgogIG5hbWUgPSBvT09vMCAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nCiAgdHJ5IDoKICAgSTFpSTExSWkgPSBvT09vMCAoICd0aHVtYm5haWwnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgSTFpSTExSWkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIEkxaUkxMUlpID0gJycKICB0cnkgOgogICBpZiBub3Qgb09PbzAgKCAnZmFuYXJ0JyApIDoKICAgIGlmIG8wb08wIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICBvT09vMG9PbzAgPSBJMWlJMTFJaQogICBlbHNlIDoKICAgIG9PT28wb09vMCA9IG9PT28wICggJ2ZhbmFydCcgKSBbIDAgXSAuIHN0cmluZwogICBpZiBvT09vMG9PbzAgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIHBhc3MKICB0cnkgOgogICBpaTFJMWkxSSA9IG9PT28wICggJ2luZm8nICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgaWkxSTFpMUkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIGlpMUkxaTFJID0gJycKICAgaWYgNDMgLSA0MzogaTExaUlpaUlpaSArIG9PbzBPME9vbyAqIG9PME9vb09vTyAqIE8wME9vT29vMDAgKiBPMAogIHRyeSA6CiAgIGlpaUlpMWkxSSA9IG9PT28wICggJ2dlbnJlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGlpaUlpMWkxSSA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgaWlpSWkxaTFJID0gJycKICAgaWYgNjQgLSA2NDogaWkxSUkxMUkxaWkxSSAlIGlJaWkxSTExSTFJSTEgKiBpSTFJaTExMTExaUlpCiAgdHJ5IDoKICAgT09vbzBPMCA9IG9PT28wICggJ2RhdGUnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgT09vbzBPMCA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgT09vbzBPMCA9ICcnCiAgIGlmIDc5IC0gNzk6IE8wCiAgdHJ5IDoKICAgY3JlZGl0cyA9IG9PT28wICggJ2NyZWRpdHMnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgY3JlZGl0cyA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgY3JlZGl0cyA9ICcnCiAgIGlmIDc4IC0gNzg6IG9PMG9vTyArIGlpMUlJMTFJMWlpMUkgLSBPMDBPb09vbzAwCiAgdHJ5IDoKICAgSWkxSSAoIG5hbWUgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIHVybCAuIGVuY29kZSAoICd1dGYtOCcgKSAsIDMgLCBJMWlJMTFJaSAsIG9PT28wb09vMCAsIGlpMUkxaTFJICwgaWlpSWkxaTFJICwgY3JlZGl0cyAsIE9Pb28wTzAgKQogIGV4Y2VwdCA6CiAgIG8wTzAgKCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgZGlyZWN0b3J5IC0gJyArIG5hbWUgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSApCiBJSWkxSTExSTFJSSAoIE9vT29PICwgb09PbzBvT28wICkKIGlmIDM4IC0gMzg6IGlpMTFpaTFpaSAtIGlJMUlpMTExMTFpSWkgKyBpSWlpMUkxMUkxSUkxIC8gT09vb09PbyAlIG9PbzBPME9vbwogaWYgNTcgLSA1NzogSTFpaTExaUlpMTFpIC8gb29vTwpkZWYgSWkxSTFJaSAoIG5hbWUgLCB1cmwgLCBmYW5hcnQgKSA6CiBvTzBvME9PT08gPSBvME9Pb28wT08wT09PICggdXJsICkKIE9PID0gb08wbzBPT09PIC4gZmluZCAoICdzdWJjaGFubmVsJyAsIGF0dHJzID0geyAnbmFtZScgOiBuYW1lIC4gZGVjb2RlICggJ3V0Zi04JyApIH0gKQogT29Pb08gPSBPTyAoICdzdWJpdGVtJyApCiBJSWkxSTExSTFJSSAoIE9vT29PICwgZmFuYXJ0ICkKIGlmIDY5IC0gNjk6IG8wT28gLyBpaTExaWkxaWkgLiBPb28wICogTzAwT29Pb28wMCAlIGlpSUlJSUkxaTFpSSAtIGlpMTFpaTFpaQogaWYgMTMgLSAxMzogaWlJSUlJSTFpMWlJIC4gaTExaUlpaUlpaQpkZWYgb09Pb28wME8wMG8gKCBuYW1lICwgdXJsICwgaWNvbmltYWdlICwgZmFuYXJ0ICkgOgogTzBPMDBPbyA9IFsgXSA7IG9vb29vbzBPMDAwbyA9IFsgXSA7IE9vTyA9IDAKIG9vTzBPME8wb29PT08gPSBvT09vME8wMG8gKCB1cmwgLCAnc3VibGluazonICwgJyMnICkKIGZvciBpSWlJaTExIGluIG9vTzBPME8wb29PT08gOgogIGlmICdMSVNUU09VUkNFOicgaW4gaUlpSWkxMSA6CiAgIE9PTyA9IGlpaWlJICggaUlpSWkxMSAsICdMSVNUU09VUkNFOicgLCAnOjonICkKICAgb29vT28wT09Pb28wID0gaWlpaUkgKCBpSWlJaTExICwgJ0xJU1ROQU1FOicgLCAnOjonICkKICBlbHNlIDoKICAgT09PID0gaUlpSWkxMSAuIHJlcGxhY2UgKCAnc3VibGluazonICwgJycgKSAuIHJlcGxhY2UgKCAnIycgLCAnJyApCiAgIG9vb09vME9PT29vMCA9IG5hbWUKICBpZiBsZW4gKCBPT08gKSA+IDEwIDoKICAgT29PID0gT29PICsgMSA7IE8wTzAwT28gLiBhcHBlbmQgKCBvb29PbzBPT09vbzAgKSA7IG9vb29vbzBPMDAwbyAuIGFwcGVuZCAoIE9PTyApCiAgIGlmIDUxIC0gNTE6IG9PbzBPME9vbyAvIE9Pb29PT28gLiBpaTFJSTExSTFpaTFJICogaWkxMWlpMWlpICsgSTFpaTExaUlpMTFpICogT29vMAogaWYgT29PID09IDEgOgogIHRyeSA6CiAgIE9PT29PbyA9IHhibWNndWkgLiBMaXN0SXRlbSAoIG5hbWUgLCBpY29uSW1hZ2UgPSBpY29uaW1hZ2UgLCB0aHVtYm5haWxJbWFnZSA9IGljb25pbWFnZSApIDsgT09Pb09vIC4gc2V0SW5mbyAoIHR5cGUgPSAiVmlkZW8iICwgaW5mb0xhYmVscyA9IHsgIlRpdGxlIiA6IG5hbWUgfSApCiAgIE8wMG8wID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBvb29vb28wTzAwMG8gWyAwIF0gLCBsaXN0aXRlbSA9IE9PT29PbyApCiAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIEkxMWlJSSAoIG9vb29vbzBPMDAwbyBbIDAgXSApICwgT09Pb09vICkKICBleGNlcHQgOgogICBwYXNzCiBlbHNlIDoKICBpSUlJSSA9IHhibWNndWkgLiBEaWFsb2cgKCApCiAgSTExID0gaUlJSUkgLiBzZWxlY3QgKCAnTkpNU29jY2VyIFNlbGVjdCBBIFNvdXJjZScgLCBPME8wME9vICkKICBpZiBJMTEgPj0gMCA6CiAgIGlJMWkxSTExSTExID0gc3RyICggTzBPMDBPbyBbIEkxMSBdICkKICAgbzAwME8wTyA9IHN0ciAoIG9vb29vbzBPMDAwbyBbIEkxMSBdICkKICAgaWYgMTggLSAxODogb29PME9vb28wMCAtIGlpMUlJMTFJMWlpMUkgLiBPMDBPb09vbzAwIC4gaUlpaTFJMTFJMUlJMQogICB0cnkgOgogICAgT09Pb09vID0geGJtY2d1aSAuIExpc3RJdGVtICggaUkxaTFJMTFJMTEgLCBpY29uSW1hZ2UgPSBpY29uaW1hZ2UgLCB0aHVtYm5haWxJbWFnZSA9IGljb25pbWFnZSApIDsgT09Pb09vIC4gc2V0SW5mbyAoIHR5cGUgPSAiVmlkZW8iICwgaW5mb0xhYmVscyA9IHsgIlRpdGxlIiA6IGlJMWkxSTExSTExIH0gKQogICAgTzAwbzAgPSB4Ym1jcGx1Z2luIC4gYWRkRGlyZWN0b3J5SXRlbSAoIGhhbmRsZSA9IGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHVybCA9IG8wMDBPME8gLCBsaXN0aXRlbSA9IE9PT29PbyApCiAgICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBJMTFpSUkgKCBvMDAwTzBPICkgLCBPT09vT28gKQogICBleGNlcHQgOgogICAgcGFzcwogICAgaWYgMiAtIDI6IGlpMUlJMTFJMWlpMUkgLiBJMWlpMTFpSWkxMWkKICAgIGlmIDc4IC0gNzg6IG9PMG8wb29PMCAqIGlJaWkxSTExSTFJSTEgLiBvME9vIC8gaWkxMWlpMWlpIC0gT29vb29vb29PTyAvIE8wME9vT29vMDAKZGVmIGkxSTFJaWlJaTFpICggKSA6CiBpZiAyOSAtIDI5OiBvME9vICUgbzBPbwogT28wTzAgPSAnTmFtZSBvZiBjaGFubmVsIHNob3cgb3IgbW92aWUnCiBPb28wT09vT29PMCA9ICcnCiBJaTExaUlJMSA9IHhibWMgLiBLZXlib2FyZCAoIE9vbzBPT29Pb08wICwgT28wTzAgKQogSWkxMWlJSTEgLiBkb01vZGFsICggKQogaWYgSWkxMWlJSTEgLiBpc0NvbmZpcm1lZCAoICkgOgogIE9vbzBPT29Pb08wID0gSWkxMWlJSTEgLiBnZXRUZXh0ICggKSAuIHJlcGxhY2UgKCAnXG4nICwgJycgKSAuIHN0cmlwICggKQogIGlmIGxlbiAoIE9vbzBPT29Pb08wICkgPT0gMCA6CiAgIHhibWNndWkgLiBEaWFsb2cgKCApIC4gb2sgKCAnTkpNU29jY2VyJyAsICdOb3RoaW5nIEVudGVyZWQnICkKICAgcmV0dXJuCiAgIGlmIDcwIC0gNzA6IGlJMUlpMTExMTFpSWkKIE9vbzBPT29Pb08wID0gT29vME9Pb09vTzAgLiBsb3dlciAoICkKIE8wTzAwT28gPSBbIF0KIE8wTzAwT28gLiBhcHBlbmQgKCBPMDBvb09PICkKIG9PT29PMG8wb08gPSAwCiBvME9vMG9PMG9PTzAwID0gMQogb28wME9PMDAwMG9PID0gMAogSTFJSTEgPSAwCiBvb29PaTFJMWkxMTFJaSA9IHhibWNndWkgLiBEaWFsb2dQcm9ncmVzcyAoICkKIG9vb09pMUkxaTExMUlpIC4gY3JlYXRlICggJ05KTVNvY2NlciBTZWFyY2hpbmcgUGxlYXNlIHdhaXQnICwgJyAnICkKIGlmIDY3IC0gNjc6IG8wT28gLiBpMUlJaQogd2hpbGUgbzBPbzBvTzBvT08wMCA8PiBvbzAwT08wMDAwb08gOgogIGkxaTFpSTFpaWlJID0gTzBPMDBPbyBbIG9vMDBPTzAwMDBvTyBdIC4gc3RyaXAgKCApCiAgcHJpbnQgJ3JlYWQgdGhpcyBvbmUgZnJvbSBmaWxlIGxpc3QgKCcgKyBzdHIgKCBvbzAwT08wMDAwb08gKSArICcpJwogIG9vMDBPTzAwMDBvTyA9IG9vMDBPTzAwMDBvTyArIDEKICBpZiA1MSAtIDUxOiBvME9vICUgTzAwT29Pb28wMCAuIGlJMUlpMTExMTFpSWkgLyBpSWlpMUkxMUkxSUkxIC8gb08wbzBvb08wIC4gaUkxSWkxMTExMWlJaQogIElJSWlpMTEgPSAnJwogIHRyeSA6CiAgIElJSWlpMTEgPSBvME9PMDAgLiBodHRwX0dFVCAoIGkxaTFpSTFpaWlJICkgLiBjb250ZW50CiAgIElJSWlpMTEgPSBJSUlpaTExIC4gZW5jb2RlICggJ2FzY2lpJyAsICdpZ25vcmUnICkgLiBkZWNvZGUgKCAnYXNjaWknICkKICAgaWYgOSAtIDk6IE8wICUgTzAgLSBpaTExaWkxaWkKICBleGNlcHQgOgogICBwYXNzCiAgIGlmIDUxIC0gNTE6IG8wT28gLiBpSWlpMUkxMUkxSUkxIC0gb08wb29PIC8gTzAKICBpZiBsZW4gKCBJSUlpaTExICkgPCAxMCA6CiAgIElJSWlpMTEgPSAnJwogICBvT09vTzBvMG9PID0gb09Pb08wbzBvTyArIDEKICAgcHJpbnQgJyoqKiBQQVNTRUQgKioqKicgKyBpMWkxaUkxaWlpSSArICcgICoqKioqKioqKioqKiogVG90YWwgUGFzc2VkIFVybHM6ICcgKyBzdHIgKCBvT09vTzBvMG9PICkKICAgdGltZSAuIHNsZWVwICggLjUgKQogICBpZiA1MiAtIDUyOiBpaTExaWkxaWkgKyBPMCArIG9vTzBPb29vMDAgKyBvT28wTzBPb28gJSBvb08wT29vbzAwCiAgT09JaTFpSTExMUlJMUkxID0gaW50ICggKCBvbzAwT08wMDAwb08gLyAzMDAgKSAqIDEwMCApCiAgb09PT09vT08wbyA9ICcgICAgIFBhZ2VzIFJlYWQ6ICcgKyBzdHIgKCBvbzAwT08wMDAwb08gKSArICcgICAgICAgIE1hdGNoZXMgRm91bmQ6ICcgKyBzdHIgKCBJMUlJMSApCiAgb29vT2kxSTFpMTExSWkgLiB1cGRhdGUgKCBPT0lpMWlJMTExSUkxSTEgLCAiIiAsIG9PT09Pb09PMG8gLCAiIiApCiAgaWYgMSAtIDE6IG9PME9vb09vTwogIGlmIG9vb09pMUkxaTExMUlpIC4gaXNjYW5jZWxlZCAoICkgOgogICByZXR1cm4KICAgaWYgNjggLSA2ODogb29PME9vb28wMCAtIG8wT28gLyBPMDBPb09vbzAwIC8gb08wbzBvb08wCiAgaWYgbGVuICggSUlJaWkxMSApID4gMTAgOgogICBJMTFpaWlpID0gb09PbzBPMDBvICggSUlJaWkxMSAsICc8Y2hhbm5lbD4nICwgJzwvY2hhbm5lbD4nICkKICAgZm9yIGlJaUlpMTEgaW4gSTExaWlpaSA6CiAgICBPT08gPSBpaWlpSSAoIGlJaUlpMTEgLCAnPGV4dGVybmFsbGluaz4nICwgJzwvZXh0ZXJuYWxsaW5rPicgKQogICAgaWYgNjAgLSA2MDogb08wbzBvb08wIC4gaTFJSWkgKyBPb28wIC8gaWkxMWlpMWlpIC4gb08wT29vT29PCiAgICBpZiA4MiAtIDgyOiBvTzBvb08gLyBvME9vICUgaUlpaTFJMTFJMUlJMSAvIGkxSUlpIC0gbzBPbwogICAgaWYgbGVuICggT09PICkgPiA1IDoKICAgICBvME9vMG9PMG9PTzAwID0gbzBPbzBvTzBvT08wMCArIDEKICAgICBPME8wME9vIC4gYXBwZW5kICggT09PICkKICAgICBpZiA3IC0gNzogTzAwT29Pb28wMCAqIEkxaWkxMWlJaTExaSAtIG9vb08gKyBpaTFJSTExSTFpaTFJICogbzBPbyAlIEkxaWkxMWlJaTExaQogICAgIGlmIDE1IC0gMTU6IE9Pb29PT28gJSBvME9vICogb08wbzBvb08wCiAgIE8wT29vb08wID0gb09PbzBPMDBvICggSUlJaWkxMSAsICc8aXRlbT4nICwgJzwvaXRlbT4nICkKICAgZm9yIGlJaUlpMTEgaW4gTzBPb29vTzAgOgogICAgT09PID0gaWlpaUkgKCBpSWlJaTExICwgJzxsaW5rPicgLCAnPC9saW5rPicgKQogICAgaWlpSTFJMTFpMSA9IGlpaWlJICggaUlpSWkxMSAsICc8dGl0bGU+JyAsICc8L3RpdGxlPicgKQogICAgb29vME8wbzAwTyA9ICcgICcgKyBpaWlJMUkxMWkxIC4gbG93ZXIgKCApICsgJyAgJwogICAgaWYgNDggLSA0ODogb29vTyAvIE8wME9vT29vMDAgLiBpSWlpMUkxMUkxSUkxICogT09vb09PbyAqIGlJMUlpMTExMTFpSWkgLyBpMUlJaQogICAgaWYgbGVuICggT09PICkgPiA1IGFuZCBvb28wTzBvMDBPIC4gZmluZCAoIE9vbzBPT29Pb08wICkgPiAwIDoKICAgICBJMUlJMSA9IEkxSUkxICsgMQogICAgIG9vbyA9ICcnCiAgICAgSTFpSTExSWkgPSBpaWlpSSAoIGlJaUlpMTEgLCAnPHRodW1ibmFpbD4nICwgJzwvdGh1bWJuYWlsPicgKQogICAgIG9vbyA9IGlpaWlJICggaUlpSWkxMSAsICc8ZmFuYXJ0PicgLCAnPC9mYW5hcnQ+JyApCiAgICAgaWYgbGVuICggb29vICkgPCA1IDoKICAgICAgb29vID0gSTExaTFpMTFpMUkKICAgICBpZiBPT08gLiBmaW5kICggJ3N1YmxpbmsnICkgPiAwIDoKICAgICAgSWkxSSAoIGlpaUkxSTExaTEgLCBPT08gLCAzMCAsIEkxaUkxMUlpICwgb29vICwgJycgLCAnJyAsICcnICwgJycgKQogICAgIGVsc2UgOgogICAgICBJMWkxSWlpaWkgKCBzdHIgKCBPT08gKSAsIGlpaUkxSTExaTEgLCBJMWlJMTFJaSAsIG9vbyAsICcnICwgJycgLCAnJyAsIFRydWUgLCBOb25lICwgJycgLCAxICkKICAgICAgaWYgOTIgLSA5Mjogb09vME8wT29vICUgb09vME8wT29vIC0gaWkxMWlpMWlpIC8gT09vb09PbwogICAgICBpZiAxMCAtIDEwOiBvb08wT29vbzAwICsgb09vME8wT29vICogb08wb29PICsgaUlpaTFJMTFJMUlJMSAvIE8wME9vT29vMDAgLyBvTzBvb08KIG9vb09pMUkxaTExMUlpIC4gY2xvc2UgKCApCiB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiQ29udGFpbmVyLlNldFZpZXdNb2RlKDUwKSIgKQogaWYgNDIgLSA0MjogbzBPbwpkZWYgSUkxaTExSSAoIGRhdGEgLCBTZWFyY2hrZXkgKSA6CiBvb08wME9PMCA9IGRhdGEgLiByc3RyaXAgKCApCiBpMTExMTFJSUlJSSA9IHJlIC4gY29tcGlsZSAoIHInI0VYVElORjooLis/KSwoLio/KVtcblxyXSsoW15cbl0rKScgKSAuIGZpbmRhbGwgKCBvb08wME9PMCApCiBpSWlpaTFpMTExaUkxID0gbGVuICggaTExMTExSUlJSUkgKQogcHJpbnQgJ3RvdGFsIG0zdSBsaW5rcycgLCBpSWlpaTFpMTExaUkxCiBmb3IgaTExICwgb08wb09vMCAsIEkxSTFJIGluIGkxMTExMUlJSUlJIDoKICBpZiAndHZnLWxvZ28nIGluIGkxMSA6CiAgIEkxaUkxMUlpID0gT29PTzAwMCAoIGkxMSAsICd0dmctbG9nbz1bXCciXSguKj8pW1wnIl0nICkKICAgaWYgSTFpSTExSWkgOgogICAgaWYgSTFpSTExSWkgLiBzdGFydHN3aXRoICggJ2h0dHAnICkgOgogICAgIEkxaUkxMUlpID0gSTFpSTExSWkKICAgICBpZiA1MCAtIDUwOiBPb29vb29vb09PICUgb08wbzBvb08wCiAgICBlbGlmIG5vdCBvMG9PMCAuIGdldFNldHRpbmcgKCAnbG9nby1mb2xkZXJQYXRoJyApID09ICIiIDoKICAgICBJaTFpMWlJMWlJSWkgPSBvMG9PMCAuIGdldFNldHRpbmcgKCAnbG9nby1mb2xkZXJQYXRoJyApCiAgICAgSTFpSTExSWkgPSBJaTFpMWlJMWlJSWkgKyBJMWlJMTFJaQogICAgIGlmIDQ5IC0gNDk6IGlJMUlpMTExMTFpSWkgLSBpMTFpSWlpSWlpIC4gTzAwT29Pb28wMCAqIGlpSUlJSUkxaTFpSSAlIG9vTzBPb29vMDAgKyBpMUlJaQogICAgZWxzZSA6CiAgICAgSTFpSTExSWkgPSBJMWlJMTFJaQogICAgIGlmIDcxIC0gNzE6IGlpMTFpaTFpaQogICAgIGlmIDM4IC0gMzg6IGlJMUlpMTExMTFpSWkgJSBPT29vT09vICsgb08wb29PIC4gaTExaUlpaUlpaQogIGVsc2UgOgogICBJMWlJMTFJaSA9ICcnCiAgaWYgJ3R5cGUnIGluIGkxMSA6CiAgIG9vb08wID0gT29PTzAwMCAoIGkxMSAsICd0eXBlPVtcJyJdKC4qPylbXCciXScgKQogICBpZiBvb29PMCA9PSAneXQtZGwnIDoKICAgIEkxSTFJID0gSTFJMUkgKyAiJm1vZGU9MTgiCiAgIGVsaWYgb29vTzAgPT0gJ3JlZ2V4JyA6CiAgICBvMCA9IEkxSTFJIC4gc3BsaXQgKCAnJnJlZ2V4cz0nICkKICAgIGlmIDUzIC0gNTM6IGkxMWlJaWlJaWkgKiBvb08wT29vbzAwCiAgICBvb29PT29PTyA9IElJT09PTzBvbzAgKCBvME9Pb28wT08wT09PICggJycgLCBkYXRhID0gbzAgWyAxIF0gKSApCiAgICBpZiA2OCAtIDY4OiBpSWlpMUkxMUkxSUkxICogaUlpaTFJMTFJMUlJMSAuIGlpMTFpaTFpaSAvIG9PME9vb09vTyAlIG9PbzBPME9vbwogICAgSTFpMUlpaWlpICggbzAgWyAwIF0gLCBvTzBvT28wICwgSTFpSTExSWkgLCAnJyAsICcnICwgJycgLCAnJyAsICcnICwgTm9uZSAsIG9vb09Pb09PICwgaUlpaWkxaTExMWlJMSApCiAgICBjb250aW51ZQogIEkxaTFJaWlpaSAoIEkxSTFJICwgb08wb09vMCAsIEkxaUkxMUlpICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIGlJaWlpMWkxMTFpSTEgKQogIGlmIDM4IC0gMzg6IG9vb08gLSBpaTFJSTExSTFpaTFJIC8gb29PME9vb28wMApkZWYgT29PT29vb09PME8gKCB0ZXh0ICwgcGF0dGVybiApIDoKIG9vbzAwT29vID0gIiIKIHRyeSA6CiAgT28wbzBPMDAgPSByZSAuIGZpbmRhbGwgKCBwYXR0ZXJuICwgdGV4dCAsIGZsYWdzID0gcmUgLiBET1RBTEwgKQogIG9vbzAwT29vID0gT28wbzBPMDAgWyAwIF0KIGV4Y2VwdCA6CiAgb29vMDBPb28gPSAiIgogIGlmIDQwIC0gNDA6IE9vb29vb29vT08KIHJldHVybiBvb28wME9vbwogaWYgMjUgLSAyNTogT29vMCArIGlpSUlJSUkxaTFpSSAvIG9vb08gLiBpaTExaWkxaWkgJSBPMCAqIEkxaWkxMWlJaTExaQpkZWYgb09PbzBPMDBvICggdGV4dCAsIHN0YXJ0X3dpdGggLCBlbmRfd2l0aCApIDoKIG8wTzBvbzBPTzBPID0gcmUgLiBmaW5kYWxsICggIig/aSkoIiArIHN0YXJ0X3dpdGggKyAiW1xTXHNdKz8iICsgZW5kX3dpdGggKyAiKSIgLCB0ZXh0ICkKIHJldHVybiBvME8wb28wT08wTwogaWYgNjggLSA2ODogaUkxSWkxMTExMWlJaSAuIG9PMG8wb29PMCAlIE9vb29vb29vT08gLiBvTzBvMG9vTzAKZGVmIGlpaWlJICggdGV4dCAsIGZyb21fc3RyaW5nICwgdG9fc3RyaW5nICwgZXhjbHVkaW5nID0gVHJ1ZSApIDoKIGlmIGV4Y2x1ZGluZyA6CiAgdHJ5IDogbzBPMG9vME9PME8gPSByZSAuIHNlYXJjaCAoICIoP2kpIiArIGZyb21fc3RyaW5nICsgIihbXFNcc10rPykiICsgdG9fc3RyaW5nICwgdGV4dCApIC4gZ3JvdXAgKCAxICkKICBleGNlcHQgOiBvME8wb28wT08wTyA9ICcnCiBlbHNlIDoKICB0cnkgOiBvME8wb28wT08wTyA9IHJlIC4gc2VhcmNoICggIig/aSkoIiArIGZyb21fc3RyaW5nICsgIltcU1xzXSs/IiArIHRvX3N0cmluZyArICIpIiAsIHRleHQgKSAuIGdyb3VwICggMSApCiAgZXhjZXB0IDogbzBPMG9vME9PME8gPSAnJwogcmV0dXJuIG8wTzBvbzBPTzBPCiBpZiA2NCAtIDY0OiBpSWlpMUkxMUkxSUkxIC8gbzBPbyAuIG9PME9vb09vTyArIE9vb29vb29vT08gLiBJMWlpMTFpSWkxMWkKZGVmIElJaTFJMTFJMUlJICggaXRlbXMgLCBmYW5hcnQgKSA6CiBpSWlpaTFpMTExaUkxID0gbGVuICggaXRlbXMgKQogcHJpbnQgJ1NUQVJUIEdFVCBJVEVNUyAqKioqKicKIG8wTzAgKCAnVG90YWwgSXRlbXM6ICVzJyAlIGlJaWlpMWkxMTFpSTEgKQogZm9yIG9PIGluIGl0ZW1zIDoKICBJSWlJaSA9IEZhbHNlCiAgT09vT29vT29PT09vbyA9IEZhbHNlCiAgdHJ5IDoKICAgaWlpSTFJMTFpMSA9IG9PICggJ3RpdGxlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGlpaUkxSTExaTEgaXMgTm9uZSA6CiAgICBpaWlJMUkxMWkxID0gJ3Vua25vd24/JwogIGV4Y2VwdCA6CiAgIG8wTzAgKCAnTmFtZSBFcnJvcicgKQogICBpaWlJMUkxMWkxID0gJycKICAgaWYgMjUgLSAyNTogT29vb29vb29PTyAtIG8wT28gLiBvME9vICogaUkxSWkxMTExMWlJaQogICBpZiA4MSAtIDgxOiBvb08wT29vbzAwICsgT29vMAogIHRyeSA6CiAgIGlmIG9PICggJ2VwZycgKSA6CiAgICBpZiBvTyAuIGVwZ191cmwgOgogICAgIG8wTzAgKCAnR2V0IEVQRyBSZWdleCcgKQogICAgIG8wb28wID0gb08gLiBlcGdfdXJsIC4gc3RyaW5nCiAgICAgb09Pb08wT29PTyA9IG9PIC4gZXBnX3JlZ2V4IC4gc3RyaW5nCiAgICAgTzBPME9vMDAgPSBvT29PMDBvICggbzBvbzAgLCBvT09vTzBPb09PICkKICAgICBpZiBPME8wT28wMCA6CiAgICAgIGlpaUkxSTExaTEgKz0gJyAtICcgKyBPME8wT28wMAogICAgZWxpZiBvTyAoICdlcGcnICkgWyAwIF0gLiBzdHJpbmcgPiAxIDoKICAgICBpaWlJMUkxMWkxICs9IG9PMDBPMCAoIG9PICggJ2VwZycgKSBbIDAgXSAuIHN0cmluZyApCiAgIGVsc2UgOgogICAgcGFzcwogIGV4Y2VwdCA6CiAgIG8wTzAgKCAnRVBHIEVycm9yJyApCiAgdHJ5IDoKICAgbzAgPSBbIF0KICAgaWYgbGVuICggb08gKCAnbGluaycgKSApID4gMCA6CiAgICBpZiAzNiAtIDM2OiBpSTFJaTExMTExaUlpIC0gaWlJSUlJSTFpMWlJIC4gb09vME8wT29vIC0gaTExaUlpaUlpaSAtIGlpMUlJMTFJMWlpMUkgKiBvT28wTzBPb28KICAgIGZvciBJMWkxaWlpIGluIG9PICggJ2xpbmsnICkgOgogICAgIGlmIG5vdCBJMWkxaWlpIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBvMCAuIGFwcGVuZCAoIEkxaTFpaWkgLiBzdHJpbmcgKQogICAgICBpZiA3NiAtIDc2OiBpMTFpSWlpSWlpICsgaWkxMWlpMWlpIC8gb08wb29PIC0gSTFpaTExaUlpMTFpIC0gaWlJSUlJSTFpMWlJICsgb08wb29PCiAgIGVsaWYgbGVuICggb08gKCAnc3BvcnRzZGV2aWwnICkgKSA+IDAgOgogICAgZm9yIEkxaTFpaWkgaW4gb08gKCAnc3BvcnRzZGV2aWwnICkgOgogICAgIGlmIG5vdCBJMWkxaWlpIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBvb0kxaSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uU3BvcnRzRGV2aWwvP21vZGU9MSZhbXA7aXRlbT1jYXRjaGVyJTNkc3RyZWFtcyUyNnVybD0nICsgSTFpMWlpaSAuIHN0cmluZwogICAgICBpSUlJID0gb08gKCAncmVmZXJlcicgKSBbIDAgXSAuIHN0cmluZwogICAgICBpZiBpSUlJIDoKICAgICAgIGlmIDcwIC0gNzA6IG9vTzBPb29vMDAgLyBpSWlpMUkxMUkxSUkxCiAgICAgICBvb0kxaSA9IG9vSTFpICsgJyUyNnJlZmVyZXI9JyArIGlJSUkKICAgICAgbzAgLiBhcHBlbmQgKCBvb0kxaSApCiAgIGVsaWYgbGVuICggb08gKCAncGxleHVzJyApICkgPiAwIDoKICAgIGZvciBJMWkxaWlpIGluIG9PICggJ3BsZXh1cycgKSA6CiAgICAgaWYgbm90IEkxaTFpaWkgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmICdzb3A6Ly8nIGluIEkxaTFpaWkgOgogICAgICAgT28wb29vTzBvTyA9ICdwbHVnaW46Ly9wcm9ncmFtLnBsZXh1cy8/bW9kZT0xJnVybD1hY2VzdHJlYW06Ly8nICsgSTFpMWlpaSAuIHN0cmluZyArICcmbmFtZT1NeSthY2VzdHJlYW0rY2hhbm5lbCcKICAgICAgIG8wIC4gYXBwZW5kICggT28wb29vTzBvTyApCiAgICAgIGVsc2UgOgogICAgICAgSWlJaUlJMSA9ICdwbHVnaW46Ly9wcm9ncmFtLnBsZXh1cy8/bW9kZT0xJnVybD1hY2VzdHJlYW06Ly8nICsgSTFpMWlpaSAuIHN0cmluZyArICcmbmFtZT1NeSthY2VzdHJlYW0rY2hhbm5lbCcKICAgICAgIG8wIC4gYXBwZW5kICggSWlJaUlJMSApCiAgIGVsaWYgbGVuICggb08gKCAndmF1Z2huJyApICkgPiAwIDoKICAgIGZvciBJMWkxaWlpIGluIG9PICggJ3ZhdWdobicgKSA6CiAgICAgaWYgbm90IEkxaTFpaWkgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIElpaTFpaUlpMUlJID0gJ3BsdWdpbjovL3BsdWdpbi5zdHJlYW0udmF1Z2hubGl2ZS50di8/bW9kZT1QbGF5TGl2ZVN0cmVhbSZhbXA7Y2hhbm5lbD0nICsgSTFpMWlpaSAuIHN0cmluZwogICAgICBvMCAuIGFwcGVuZCAoIElpaTFpaUlpMUlJICkKICAgZWxpZiBsZW4gKCBvTyAoICdpbGl2ZScgKSApID4gMCA6CiAgICBmb3IgSTFpMWlpaSBpbiBvTyAoICdpbGl2ZScgKSA6CiAgICAgaWYgbm90IEkxaTFpaWkgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmIG5vdCAnaHR0cCcgaW4gSTFpMWlpaSAuIHN0cmluZyA6CiAgICAgICBPTzBPMDBvT28gPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnRiaC5pbGl2ZS8/dXJsPWh0dHA6Ly93d3cuc3RyZWFtbGl2ZS50by92aWV3LycgKyBJMWkxaWlpIC4gc3RyaW5nICsgJyZhbXA7bGluaz05OSZhbXA7bW9kZT1pTGl2ZVBsYXknCiAgICAgIGVsc2UgOgogICAgICAgT08wTzAwb09vID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby50YmguaWxpdmUvP3VybD0nICsgSTFpMWlpaSAuIHN0cmluZyArICcmYW1wO2xpbms9OTkmYW1wO21vZGU9aUxpdmVQbGF5JwogICBlbGlmIGxlbiAoIG9PICggJ3l0LWRsJyApICkgPiAwIDoKICAgIGZvciBJMWkxaWlpIGluIG9PICggJ3l0LWRsJyApIDoKICAgICBpZiBub3QgSTFpMWlpaSAuIHN0cmluZyA9PSBOb25lIDoKICAgICAgaWkxSUkgPSBJMWkxaWlpIC4gc3RyaW5nICsgJyZtb2RlPTE4JwogICAgICBvMCAuIGFwcGVuZCAoIGlpMUlJICkKICAgZWxpZiBsZW4gKCBvTyAoICd1dHViZScgKSApID4gMCA6CiAgICBmb3IgSTFpMWlpaSBpbiBvTyAoICd1dHViZScgKSA6CiAgICAgaWYgbm90IEkxaTFpaWkgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmIGxlbiAoIEkxaTFpaWkgLiBzdHJpbmcgKSA9PSAxMSA6CiAgICAgICBpSTFJID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvP3ZpZGVvX2lkPScgKyBJMWkxaWlpIC4gc3RyaW5nCiAgICAgIGVsaWYgSTFpMWlpaSAuIHN0cmluZyAuIHN0YXJ0c3dpdGggKCAnUEwnICkgYW5kIG5vdCAnJm9yZGVyPScgaW4gSTFpMWlpaSAuIHN0cmluZyA6CiAgICAgICBpSTFJID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby55b3V0dWJlL3BsYXkvPyZvcmRlcj1kZWZhdWx0JnBsYXlsaXN0X2lkPScgKyBJMWkxaWlpIC4gc3RyaW5nCiAgICAgIGVsc2UgOgogICAgICAgaUkxSSA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ueW91dHViZS9wbGF5Lz9wbGF5bGlzdF9pZD0nICsgSTFpMWlpaSAuIHN0cmluZwogICAgbzAgLiBhcHBlbmQgKCBpSTFJICkKICAgZWxpZiBsZW4gKCBvTyAoICdpbWRiJyApICkgPiAwIDoKICAgIGZvciBJMWkxaWlpIGluIG9PICggJ2ltZGInICkgOgogICAgIGlmIG5vdCBJMWkxaWlpIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBpZiBvMG9PMCAuIGdldFNldHRpbmcgKCAnZ2VuZXNpc29ycHVsc2FyJyApID09ICcwJyA6CiAgICAgICBPb29Pb09vID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5nZW5lc2lzLz9hY3Rpb249cGxheSZpbWRiPScgKyBJMWkxaWlpIC4gc3RyaW5nCiAgICAgIGVsc2UgOgogICAgICAgT29vT29PbyA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucHVsc2FyL21vdmllL3R0JyArIEkxaTFpaWkgLiBzdHJpbmcgKyAnL3BsYXknCiAgICAgIG8wIC4gYXBwZW5kICggT29vT29PbyApCiAgICAgIGlmIDE0IC0gMTQ6IGlpMTFpaTFpaSAqIGlpMUlJMTFJMWlpMUkgKyBvb08wT29vbzAwICsgTzAgKyBpMTFpSWlpSWlpCiAgIGVsaWYgbGVuICggb08gKCAnZjRtJyApICkgPiAwIDoKICAgIGZvciBJMWkxaWlpIGluIG9PICggJ2Y0bScgKSA6CiAgICAgaWYgbm90IEkxaTFpaWkgLiBzdHJpbmcgPT0gTm9uZSA6CiAgICAgIGlmICcuZjRtJyBpbiBJMWkxaWlpIC4gc3RyaW5nIDoKICAgICAgIG9Pb08wID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5mNG1UZXN0ZXIvP3VybD0nICsgdXJsbGliIC4gcXVvdGVfcGx1cyAoIEkxaTFpaWkgLiBzdHJpbmcgKQogICAgICBlbGlmICcubTN1OCcgaW4gSTFpMWlpaSAuIHN0cmluZyA6CiAgICAgICBvT29PMCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZjRtVGVzdGVyLz91cmw9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBJMWkxaWlpIC4gc3RyaW5nICkgKyAnJmFtcDtzdHJlYW10eXBlPUhMUycKICAgICAgIGlmIDc3IC0gNzc6IGlJaWkxSTExSTFJSTEgLiBvb08wT29vbzAwICUgb29PME9vb28wMCArIGkxMWlJaWlJaWkKICAgICAgZWxzZSA6CiAgICAgICBvT29PMCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8uZjRtVGVzdGVyLz91cmw9JyArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBJMWkxaWlpIC4gc3RyaW5nICkgKyAnJmFtcDtzdHJlYW10eXBlPVNJTVBMRScKICAgIG8wIC4gYXBwZW5kICggb09vTzAgKQogICBlbGlmIGxlbiAoIG9PICggJ2Z0dicgKSApID4gMCA6CiAgICBmb3IgSTFpMWlpaSBpbiBvTyAoICdmdHYnICkgOgogICAgIGlmIG5vdCBJMWkxaWlpIC4gc3RyaW5nID09IE5vbmUgOgogICAgICBPbzAwbzBPTzBPMDBvID0gJ3BsdWdpbjovL3BsdWdpbi52aWRlby5GLlQuVi8/bmFtZT0nICsgdXJsbGliIC4gcXVvdGUgKCBpaWlJMUkxMWkxICkgKyAnJnVybD0nICsgSTFpMWlpaSAuIHN0cmluZyArICcmbW9kZT0xMjUmY2hfZmFuYXJ0PW5hJwogICAgIG8wIC4gYXBwZW5kICggT28wMG8wT08wTzAwbyApCiAgIGlmIGxlbiAoIG8wICkgPCAxIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgbzBPMCAoICdFcnJvciA8bGluaz4gZWxlbWVudCwgUGFzc2luZzonICsgaWlpSTFJMTFpMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICAgY29udGludWUKICAgaWYgODIgLSA4Mjogb08wbzBvb08wICsgT29vb29vb29PTyAtIGkxSUlpIC4gaTFJSWkKICBJSWlJaSA9IEZhbHNlCiAgaWYgNiAtIDY6IGlpMTFpaTFpaSAvIG9PMG8wb29PMCAvIG9PME9vb09vTwogIHRyeSA6CiAgIElJaUlpID0gb08gKCAnZXh0ZXJuYWxsaW5rJyApIFsgMCBdIC4gc3RyaW5nCiAgZXhjZXB0IDogcGFzcwogIGlmIDI3IC0gMjc6IGlpMUlJMTFJMWlpMUkgKiBvb29PIC4gTzAwT29Pb28wMCAlIE9vbzAgKiBPb28wIC4gaTFJSWkKICBpZiBJSWlJaSA6CiAgIE8wT09vT09PMG9PID0gWyBJSWlJaSBdCiAgIElJaUlpID0gVHJ1ZQogIGVsc2UgOgogICBJSWlJaSA9IEZhbHNlCiAgdHJ5IDoKICAgT09vT29vT29PT09vbyA9IG9PICggJ2pzb25ycGMnICkgWyAwIF0gLiBzdHJpbmcKICBleGNlcHQgOiBwYXNzCiAgaWYgT09vT29vT29PT09vbyA6CiAgIE8wT09vT09PMG9PID0gWyBPT29Pb29Pb09PT29vIF0KICAgT09vT29vT29PT09vbyA9IFRydWUKICBlbHNlIDoKICAgT09vT29vT29PT09vbyA9IEZhbHNlCiAgdHJ5IDoKICAgSTFpSTExSWkgPSBvTyAoICd0aHVtYm5haWwnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgSTFpSTExSWkgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIEkxaUkxMUlpID0gJycKICB0cnkgOgogICBpZiBub3Qgb08gKCAnZmFuYXJ0JyApIDoKICAgIGlmIG8wb08wIC4gZ2V0U2V0dGluZyAoICd1c2VfdGh1bWInICkgPT0gInRydWUiIDoKICAgICBvT09vMG9PbzAgPSBJMWlJMTFJaQogICAgZWxzZSA6CiAgICAgb09PbzBvT28wID0gZmFuYXJ0CiAgIGVsc2UgOgogICAgb09PbzBvT28wID0gb08gKCAnZmFuYXJ0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIG9PT28wb09vMCA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgb09PbzBvT28wID0gZmFuYXJ0CiAgdHJ5IDoKICAgaWkxSTFpMUkgPSBvTyAoICdpbmZvJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIGlpMUkxaTFJID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBpaTFJMWkxSSA9ICcnCiAgIGlmIDI4IC0gMjg6IG9vb08gKyBpMTFpSWlpSWlpIC8gb08wbzBvb08wICUgT09vb09PbyAlIG9PbzBPME9vbyAtIE8wCiAgdHJ5IDoKICAgaWlpSWkxaTFJID0gb08gKCAnZ2VucmUnICkgWyAwIF0gLiBzdHJpbmcKICAgaWYgaWlpSWkxaTFJID09IE5vbmUgOgogICAgcmFpc2UKICBleGNlcHQgOgogICBpaWlJaTFpMUkgPSAnJwogICBpZiA1NCAtIDU0OiBpMUlJaSArIG9PME9vb09vTwogIHRyeSA6CiAgIE9Pb28wTzAgPSBvTyAoICdkYXRlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGlmIE9Pb28wTzAgPT0gTm9uZSA6CiAgICByYWlzZQogIGV4Y2VwdCA6CiAgIE9Pb28wTzAgPSAnJwogICBpZiA4MyAtIDgzOiBvTzBvb08gLSBvME9vICsgaWkxSUkxMUkxaWkxSQogIG9vb09Pb09PID0gTm9uZQogIGlmIG9PICggJ3JlZ2V4JyApIDoKICAgdHJ5IDoKICAgIGlJaTFJaTFpMWlJID0gb08gKCAncmVnZXgnICkKICAgIG9vb09Pb09PID0gSUlPT09PMG9vMCAoIGlJaTFJaTFpMWlJICkKICAgZXhjZXB0IDoKICAgIHBhc3MKICAgIGlmIDE2IC0gMTY6IGlpMUlJMTFJMWlpMUkgLyBvT28wTzBPb28gLyBPb29vb29vb09PICogbzBPbyArIGkxSUlpICUgaWkxSUkxMUkxaWkxSQogIHRyeSA6CiAgIGlmIGxlbiAoIG8wICkgPiAxIDoKICAgIGlmIDcxIC0gNzE6IE9Pb29PT28KICAgIGlpMTExSWlpSTEgPSAwCiAgICBpaTExaTFpSWlJSTEgPSBbIF0KICAgIGZvciBJMWkxaWlpIGluIG8wIDoKICAgICBpZiBvMG9PMCAuIGdldFNldHRpbmcgKCAnYXNrX3BsYXlsaXN0X2l0ZW1zJyApID09ICd0cnVlJyA6CiAgICAgIGlmIG9vb09Pb09PIDoKICAgICAgIGlpMTFpMWlJaUlJMSAuIGFwcGVuZCAoIEkxaTFpaWkgKyAnJnJlZ2V4cz0nICsgb29vT09vT08gKQogICAgICBlbGlmIGFueSAoIHggaW4gSTFpMWlpaSBmb3IgeCBpbiBpMUlpSTFJMTEgKSBhbmQgSTFpMWlpaSAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgICAgICBpaTExaTFpSWlJSTEgLiBhcHBlbmQgKCBJMWkxaWlpICsgJyZtb2RlPTE5JyApCiAgICAgZWxzZSA6CiAgICAgIGlpMTFpMWlJaUlJMSAuIGFwcGVuZCAoIEkxaTFpaWkgKQogICAgaWYgbzBvTzAgLiBnZXRTZXR0aW5nICggJ2FkZF9wbGF5bGlzdCcgKSA9PSAiZmFsc2UiIDoKICAgICBmb3IgSTFpMWlpaSBpbiBvMCA6CiAgICAgIGlpMTExSWlpSTEgKz0gMQogICAgICBwcmludCAnQURETElOSyAxJwogICAgICBJMWkxSWlpaWkgKCBJMWkxaWlpICwgJyVzKSAlcycgJSAoIGlpMTExSWlpSTEgLCBpaWlJMUkxMWkxIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKSAsIEkxaUkxMUlpICwgb09PbzBvT28wICwgaWkxSTFpMUkgLCBpaWlJaTFpMUkgLCBPT29vME8wICwgVHJ1ZSAsIGlpMTFpMWlJaUlJMSAsIG9vb09Pb09PICwgaUlpaWkxaTExMWlJMSApCiAgICBlbHNlIDoKICAgICBJMWkxSWlpaWkgKCAnJyAsIGlpaUkxSTExaTEgLiBlbmNvZGUgKCAndXRmLTgnICwgJ2lnbm9yZScgKSAsIEkxaUkxMUlpICwgb09PbzBvT28wICwgaWkxSTFpMUkgLCBpaWlJaTFpMUkgLCBPT29vME8wICwgVHJ1ZSAsIGlpMTFpMWlJaUlJMSAsIG9vb09Pb09PICwgaUlpaWkxaTExMWlJMSApCiAgIGVsc2UgOgogICAgaWYgSUlpSWkgOgogICAgIElpMUkgKCBpaWlJMUkxMWkxIC4gZW5jb2RlICggJ3V0Zi04JyApICwgTzBPT29PT08wb08gWyAwIF0gLiBlbmNvZGUgKCAndXRmLTgnICkgLCAxICwgSTFpSTExSWkgLCBmYW5hcnQgLCBpaTFJMWkxSSAsIGlpaUlpMWkxSSAsIE9Pb28wTzAgLCBOb25lICwgJ3NvdXJjZScgKQogICAgZWxpZiBPT29Pb29Pb09PT29vIDoKICAgICBJaTFJICggaWlpSTFJMTFpMSAuIGVuY29kZSAoICd1dGYtOCcgKSAsIE8wT09vT09PMG9PIFsgMCBdICwgNTMgLCBJMWlJMTFJaSAsIGZhbmFydCAsIGlpMUkxaTFJICwgaWlpSWkxaTFJICwgT09vbzBPMCAsIE5vbmUgLCAnc291cmNlJyApCiAgICBlbGlmIG8wIFsgMCBdIC4gZmluZCAoICdzdWJsaW5rJyApID4gMCA6CiAgICAgSWkxSSAoIGlpaUkxSTExaTEgLiBlbmNvZGUgKCAndXRmLTgnICkgLCBvMCBbIDAgXSAsIDMwICwgSTFpSTExSWkgLCBvT09vMG9PbzAgLCBpaTFJMWkxSSAsIG9vb09Pb09PICwgJycgLCAnJyAsICcnICkKICAgICBpZiA2MyAtIDYzOiBJMWlpMTFpSWkxMWkKICAgIGVsc2UgOgogICAgIEkxaTFJaWlpaSAoIG8wIFsgMCBdICwgaWlpSTFJMTFpMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICwgSTFpSTExSWkgLCBvT09vMG9PbzAgLCBpaTFJMWkxSSAsIGlpaUlpMWkxSSAsIE9Pb28wTzAgLCBUcnVlICwgTm9uZSAsIG9vb09Pb09PICwgaUlpaWkxaTExMWlJMSApCiAgICAgaWYgNjkgLSA2OTogaUlpaTFJMTFJMUlJMSAuIG9PMG9vTyAlIG9vb08gKyBpSWlpMUkxMUkxSUkxIC8gTzAgLyBvTzBvb08KICAgICBpZiA2MSAtIDYxOiBpaTFJSTExSTFpaTFJICUgaWkxSUkxMUkxaWkxSSAqIGlpMTFpaTFpaSAvIGlpMTFpaTFpaQogIGV4Y2VwdCA6CiAgIG8wTzAgKCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBhZGRpbmcgaXRlbSAtICcgKyBpaWlJMUkxMWkxIC4gZW5jb2RlICggJ3V0Zi04JyAsICdpZ25vcmUnICkgKQogcHJpbnQgJ0ZJTklTSCBHRVQgSVRFTVMgKioqKionCiBpZiA3NSAtIDc1OiBPb28wIC4gb29vTwpkZWYgSUlPT09PMG9vMCAoIHJlZ19pdGVtICkgOgogdHJ5IDoKICBvb29PT29PTyA9IHsgfQogIGZvciBJMWkxaWlpIGluIHJlZ19pdGVtIDoKICAgb29vT09vT08gWyBJMWkxaWlpICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSA9IHsgfQogICBpZiA1MCAtIDUwOiBPT29vT09vCiAgIHRyeSA6CiAgICBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2V4cHJlJyBdID0gSTFpMWlpaSAoICdleHByZXMnICkgWyAwIF0gLiBzdHJpbmcKICAgIGlmIG5vdCBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2V4cHJlJyBdIDoKICAgICBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2V4cHJlJyBdID0gJycKICAgZXhjZXB0IDoKICAgIG8wTzAgKCAiUmVnZXg6IC0tIE5vIFJlZmVyZXIgLS0iICkKICAgb29vT09vT08gWyBJMWkxaWlpICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdwYWdlJyBdID0gSTFpMWlpaSAoICdwYWdlJyApIFsgMCBdIC4gc3RyaW5nCiAgIHRyeSA6CiAgICBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3JlZmVyJyBdID0gSTFpMWlpaSAoICdyZWZlcmVyJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBObyBSZWZlcmVyIC0tIiApCiAgIHRyeSA6CiAgICBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvbm5lY3Rpb24nIF0gPSBJMWkxaWlpICggJ2Nvbm5lY3Rpb24nICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIG8wTzAgKCAiUmVnZXg6IC0tIE5vIGNvbm5lY3Rpb24gLS0iICkKICAgIGlmIDYwIC0gNjA6IG9vb08gKiBpSWlpMUkxMUkxSUkxICogb08wb29PICogb09vME8wT29vCiAgIHRyeSA6CiAgICBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ25vdHBsYXlhYmxlJyBdID0gSTFpMWlpaSAoICdub3RwbGF5YWJsZScgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgbzBPMCAoICJSZWdleDogLS0gTm8gbm90cGxheWFibGUgLS0iICkKICAgIGlmIDY5IC0gNjk6IGlpSUlJSUkxaTFpSSAqIE8wIC4gaTExaUlpaUlpaSAvIGlpSUlJSUkxaTFpSSAuIGlpMTFpaTFpaQogICB0cnkgOgogICAgb29vT09vT08gWyBJMWkxaWlpICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdub3JlZGlyZWN0JyBdID0gSTFpMWlpaSAoICdub3JlZGlyZWN0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBObyBub3JlZGlyZWN0IC0tIiApCiAgIHRyeSA6CiAgICBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ29yaWdpbicgXSA9IEkxaTFpaWkgKCAnb3JpZ2luJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBObyBvcmlnaW4gLS0iICkKICAgdHJ5IDoKICAgIG9vb09Pb09PIFsgSTFpMWlpaSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaW5jbHVkZWhlYWRlcnMnIF0gPSBJMWkxaWlpICggJ2luY2x1ZGVoZWFkZXJzJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBObyBpbmNsdWRlaGVhZGVycyAtLSIgKQogICAgaWYgNjMgLSA2Mzogb08wbzBvb08wICsgaWkxMWlpMWlpIC4gb08wT29vT29PIC0gbzBPbwogICB0cnkgOgogICAgb29vT09vT08gWyBJMWkxaWlpICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICd4LXJlcScgXSA9IEkxaTFpaWkgKCAneC1yZXEnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIG8wTzAgKCAiUmVnZXg6IC0tIE5vIHgtcmVxIC0tIiApCiAgIHRyeSA6CiAgICBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3gtZm9yd2FyZCcgXSA9IEkxaTFpaWkgKCAneC1mb3J3YXJkJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBObyB4LWZvcndhcmQgLS0iICkKICAgIGlmIDUyIC0gNTI6IGlpMTFpaTFpaSAlIG9PbzBPME9vbwogICB0cnkgOgogICAgb29vT09vT08gWyBJMWkxaWlpICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdhZ2VudCcgXSA9IEkxaTFpaWkgKCAnYWdlbnQnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIG8wTzAgKCAiUmVnZXg6IC0tIE5vIFVzZXIgQWdlbnQgLS0iICkKICAgdHJ5IDoKICAgIG9vb09Pb09PIFsgSTFpMWlpaSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAncG9zdCcgXSA9IEkxaTFpaWkgKCAncG9zdCcgKSBbIDAgXSAuIHN0cmluZwogICBleGNlcHQgOgogICAgbzBPMCAoICJSZWdleDogLS0gTm90IGEgcG9zdCIgKQogICB0cnkgOgogICAgb29vT09vT08gWyBJMWkxaWlpICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdyYXdwb3N0JyBdID0gSTFpMWlpaSAoICdyYXdwb3N0JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBOb3QgYSByYXdwb3N0IiApCiAgIHRyeSA6CiAgICBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2h0bWx1bmVzY2FwZScgXSA9IEkxaTFpaWkgKCAnaHRtbHVuZXNjYXBlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBOb3QgYSBodG1sdW5lc2NhcGUiICkKICAgIGlmIDY0IC0gNjQ6IE8wICUgb08wbzBvb08wICUgTzAgKiBJMWlpMTFpSWkxMWkgLiBpSTFJaTExMTExaUlpICsgbzBPbwogICAgaWYgNzUgLSA3NTogb08wbzBvb08wIC4gT29vb29vb29PTyAlIGlpMTFpaTFpaSAqIG9PMG8wb29PMCAlIE9vb29vb29vT08KICAgdHJ5IDoKICAgIG9vb09Pb09PIFsgSTFpMWlpaSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAncmVhZGNvb2tpZW9ubHknIF0gPSBJMWkxaWlpICggJ3JlYWRjb29raWVvbmx5JyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBOb3QgYSByZWFkQ29va2llT25seSIgKQogICAgaWYgMTMgLSAxMzogT29vMCAvIGkxMWlJaWlJaWkgJSBvTzBPb29Pb08gJSBvTzBvMG9vTzAgLiBvTzBvb08KICAgdHJ5IDoKICAgIG9vb09Pb09PIFsgSTFpMWlpaSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnY29va2llamFyJyBdID0gSTFpMWlpaSAoICdjb29raWVqYXInICkgWyAwIF0gLiBzdHJpbmcKICAgIGlmIG5vdCBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ2Nvb2tpZWphcicgXSA6CiAgICAgb29vT09vT08gWyBJMWkxaWlpICggJ25hbWUnICkgWyAwIF0gLiBzdHJpbmcgXSBbICdjb29raWVqYXInIF0gPSAnJwogICBleGNlcHQgOgogICAgbzBPMCAoICJSZWdleDogLS0gTm90IGEgY29va2llSmFyIiApCiAgIHRyeSA6CiAgICBvb29PT29PTyBbIEkxaTFpaWkgKCAnbmFtZScgKSBbIDAgXSAuIHN0cmluZyBdIFsgJ3NldGNvb2tpZScgXSA9IEkxaTFpaWkgKCAnc2V0Y29va2llJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBOb3QgYSBzZXRjb29raWUiICkKICAgdHJ5IDoKICAgIG9vb09Pb09PIFsgSTFpMWlpaSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnYXBwZW5kY29va2llJyBdID0gSTFpMWlpaSAoICdhcHBlbmRjb29raWUnICkgWyAwIF0gLiBzdHJpbmcKICAgZXhjZXB0IDoKICAgIG8wTzAgKCAiUmVnZXg6IC0tIE5vdCBhIGFwcGVuZGNvb2tpZSIgKQogICAgaWYgOCAtIDg6IE9Pb29PT28gKyBvT28wTzBPb28gLSBvTzBPb29Pb08KICAgdHJ5IDoKICAgIG9vb09Pb09PIFsgSTFpMWlpaSAoICduYW1lJyApIFsgMCBdIC4gc3RyaW5nIF0gWyAnaWdub3JlY2FjaGUnIF0gPSBJMWkxaWlpICggJ2lnbm9yZWNhY2hlJyApIFsgMCBdIC4gc3RyaW5nCiAgIGV4Y2VwdCA6CiAgICBvME8wICggIlJlZ2V4OiAtLSBubyBpZ25vcmVjYWNoZSIgKQogICAgaWYgMTEgLSAxMTogaTFJSWkgJSBpMTFpSWlpSWlpIC0gaTFJSWkgKiBPT29vT09vCiAgICBpZiAzOSAtIDM5OiBPMDBPb09vbzAwCiAgICBpZiA4NiAtIDg2OiBvTzBvMG9vTzAgKiBvME9vICsgb08wbzBvb08wICsgb08wT29vT29PCiAgICBpZiA4IC0gODogTzAwT29Pb28wMCAtIG9vTzBPb29vMDAgLyBvb29PCiAgICBpZiA5NiAtIDk2OiBPT29vT09vCiAgb29vT09vT08gPSB1cmxsaWIgLiBxdW90ZSAoIHJlcHIgKCBvb29PT29PTyApICkKICByZXR1cm4gb29vT09vT08KICBpZiAyOSAtIDI5OiBvTzBvb08gLyBpMUlJaSAuIG8wT28gLSBPT29vT09vIC0gT09vb09PbyAtIGlpSUlJSUkxaTFpSQogZXhjZXB0IDoKICBvb29PT29PTyA9IE5vbmUKICBvME8wICggJ3JlZ2V4IEVycm9yOiAnICsgaWlpSTFJMTFpMSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApICkKICBpZiAyMCAtIDIwOiBpMUlJaSAlIEkxaWkxMWlJaTExaSAuIG8wT28gLyBPb28wICogaTExaUlpaUlpaSAqIGlpMUlJMTFJMWlpMUkKZGVmIE9PbyAoIHVybCApIDoKIHRyeSA6CiAgZm9yIEkxaTFpaWkgaW4gcmFuZ2UgKCAxICwgNTEgKSA6CiAgIG9vbzAwT29vID0gaTFpMTFJMUkxaWlpMSAoIHVybCApCiAgIGlmICJFWFQtWC1TVFJFQU0tSU5GIiBpbiBvb28wME9vbyA6IHJldHVybiB1cmwKICAgaWYgbm90ICJFWFRNM1UiIGluIG9vbzAwT29vIDogcmV0dXJuCiAgIHhibWMgLiBzbGVlcCAoIDIwMDAgKQogIHJldHVybgogZXhjZXB0IDoKICByZXR1cm4KICBpZiA4IC0gODogb29vTyArIG9PME9vb09vTyAvIG9vTzBPb29vMDAgLyBvTzBvMG9vTzAKICBpZiA3NCAtIDc0OiBPMCAvIGkxSUlpCmRlZiBPb09JaWlpaWkxMTFpMWlpICggcmVnZXhzICwgdXJsICwgY29va2llSmFyID0gTm9uZSAsIGZvckNvb2tpZUphck9ubHkgPSBGYWxzZSAsIHJlY3Vyc2l2ZUNhbGwgPSBGYWxzZSAsIGNhY2hlZFBhZ2VzID0geyB9ICwgcmF3UG9zdCA9IEZhbHNlICwgY29va2llX2phcl9maWxlID0gTm9uZSApIDoKIGlmIG5vdCByZWN1cnNpdmVDYWxsIDoKICByZWdleHMgPSBldmFsICggdXJsbGliIC4gdW5xdW90ZSAoIHJlZ2V4cyApICkKICBpZiAyNSAtIDI1OiBpaTFJSTExSTFpaTFJIC0gb29vTyAvIGkxMWlJaWlJaWkKICBpZiA0MSAtIDQxOiBpMUlJaSAlIG9vTzBPb29vMDAgKyBpSWlpMUkxMUkxSUkxCiBJaTFJSUlJaTFpaTFJID0gcmUgLiBjb21waWxlICggJ1wkZG9yZWdleFxbKFteXF1dKilcXScgKSAuIGZpbmRhbGwgKCB1cmwgKQogaWYgMTMgLSAxMzogbzBPbyAlIE9Pb29PT28gLiBvTzBvb08gLyBvT28wTzBPb28gJSBpaTFJSTExSTFpaTFJIC4gT29vb29vb29PTwogaTFpSWkgPSBUcnVlCiBpZiAzMCAtIDMwOiBPMCAtIGlJaWkxSTExSTFJSTEgLyBPb29vb29vb09PCiBpZiA4OSAtIDg5OiBvb08wT29vbzAwIC0gb29vTyAlIG9PbzBPME9vbyAlIGlpMTFpaTFpaQogaWYgNDkgLSA0OTogb09vME8wT29vIC0gbzBPbyAvIE9vbzAgLyBPMCAlIGlpMTFpaTFpaSAqIGlpSUlJSUkxaTFpSQogaWYgMTAwIC0gMTAwOiBpaTFJSTExSTFpaTFJIC4gb29PME9vb28wMCAvIE8wICogaTFJSWkgKiBpaUlJSUlJMWkxaUkgKiBvT28wTzBPb28KIGZvciBPTzAwIGluIElpMUlJSUlpMWlpMUkgOgogIGlmIE9PMDAgaW4gcmVnZXhzIDoKICAgaWYgOTIgLSA5Mjogb08wbzBvb08wCiAgIE9vMDBPb09vID0gcmVnZXhzIFsgT08wMCBdCiAgIGlmIDI0IC0gMjQ6IGkxMWlJaWlJaWkgLSBPMDBPb09vbzAwCiAgIGkxMWlpSTExMTEgPSBGYWxzZQogICBpZiA5NyAtIDk3OiBvT28wTzBPb28gKiBvME9vIC4gaUlpaTFJMTFJMUlJMQogICBpZiAxNiAtIDE2OiBvb29PICUgT29vb29vb29PTyAtIGlpMUlJMTFJMWlpMUkgKiBpaUlJSUlJMWkxaUkgKiBvTzBvb08gLyBPb29vb29vb09PCiAgIGlmICdjb29raWVqYXInIGluIE9vMDBPb09vIDoKICAgIGlmIDMxIC0gMzE6IG9PMG8wb29PMCAuIE8wME9vT29vMDAgKiBvb29PICsgaTExaUlpaUlpaSAqIGlJMUlpMTExMTFpSWkKICAgIGkxMWlpSTExMTEgPSBPbzAwT29PbyBbICdjb29raWVqYXInIF0KICAgIGlmICckZG9yZWdleCcgaW4gaTExaWlJMTExMSA6CiAgICAgY29va2llSmFyID0gT29PSWlpaWlpMTExaTFpaSAoIHJlZ2V4cyAsIE9vMDBPb09vIFsgJ2Nvb2tpZWphcicgXSAsIGNvb2tpZUphciAsIFRydWUgLCBUcnVlICwgY2FjaGVkUGFnZXMgKQogICAgIGkxMWlpSTExMTEgPSBUcnVlCiAgICBlbHNlIDoKICAgICBpMTFpaUkxMTExID0gVHJ1ZQogICAgIGlmIDkzIC0gOTM6IG9PMG9vTyAvIGlJaWkxSTExSTFJSTEgKiBpMUlJaSAlIE9vb29vb29vT08gKiBPMCAqIG9PMG8wb29PMAogICBpZiBpMTFpaUkxMTExIDoKICAgIGlmIGNvb2tpZUphciA9PSBOb25lIDoKICAgICBpZiA2NCAtIDY0OiBvTzBPb29Pb08gKyBPMCAvIGlJaWkxSTExSTFJSTEgLyBvT28wTzBPb28gLiBvb29PICUgT29vMAogICAgIGNvb2tpZV9qYXJfZmlsZSA9IE5vbmUKICAgICBpZiAnb3BlblsnIGluIE9vMDBPb09vIFsgJ2Nvb2tpZWphcicgXSA6CiAgICAgIGNvb2tpZV9qYXJfZmlsZSA9IE9vMDBPb09vIFsgJ2Nvb2tpZWphcicgXSAuIHNwbGl0ICggJ29wZW5bJyApIFsgMSBdIC4gc3BsaXQgKCAnXScgKSBbIDAgXQogICAgICBpZiA1MCAtIDUwOiBpSWlpMUkxMUkxSUkxIC0gT29vMCArIGlpMUlJMTFJMWlpMUkKICAgICBjb29raWVKYXIgPSBvMGlpaUkxSTFpSUlJaTEgKCBjb29raWVfamFyX2ZpbGUgKQogICAgIGlmIGNvb2tpZV9qYXJfZmlsZSA6CiAgICAgIElpaSAoIGNvb2tpZUphciAsIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgIGlmIDE5IC0gMTk6IG9PMG8wb29PMCAlIG9PME9vb09vTyAvIGkxMWlJaWlJaWkgLyBvb08wT29vbzAwIC0gT29vb29vb29PTwogICAgICBpZiAzNyAtIDM3OiBpaTFJSTExSTFpaTFJIC8gT29vb29vb29PTyAtIGkxMWlJaWlJaWkKICAgICAgaWYgMTggLSAxODogb29PME9vb28wMCAuIG8wT28KICAgIGVsaWYgJ3NhdmVbJyBpbiBPbzAwT29PbyBbICdjb29raWVqYXInIF0gOgogICAgIGNvb2tpZV9qYXJfZmlsZSA9IE9vMDBPb09vIFsgJ2Nvb2tpZWphcicgXSAuIHNwbGl0ICggJ3NhdmVbJyApIFsgMSBdIC4gc3BsaXQgKCAnXScgKSBbIDAgXQogICAgIGlpSWkxSUlpSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCBjb29raWVfamFyX2ZpbGUgKQogICAgIHByaW50ICdjb21wbGV0ZV9wYXRoJyAsIGlpSWkxSUlpSQogICAgIElpaSAoIGNvb2tpZUphciAsIGNvb2tpZV9qYXJfZmlsZSApCiAgICAgaWYgMjMgLSAyMzogaWlJSUlJSTFpMWlJIC4gaWkxSUkxMUkxaWkxSQogICAgIGlmIDkgLSA5OiBvb29PIC0gb08wb29PIC0gb29PME9vb28wMAogICBpZiBPbzAwT29PbyBbICdwYWdlJyBdIGFuZCAnJGRvcmVnZXgnIGluIE9vMDBPb09vIFsgJ3BhZ2UnIF0gOgogICAgT28wME9vT28gWyAncGFnZScgXSA9IE9vT0lpaWlpaTExMWkxaWkgKCByZWdleHMgLCBPbzAwT29PbyBbICdwYWdlJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgIGlmIDgyIC0gODI6IE9vbzAgLSBPb28wICsgT09vb09PbwogICBpZiAnc2V0Y29va2llJyBpbiBPbzAwT29PbyBhbmQgT28wME9vT28gWyAnc2V0Y29va2llJyBdIGFuZCAnJGRvcmVnZXgnIGluIE9vMDBPb09vIFsgJ3NldGNvb2tpZScgXSA6CiAgICBPbzAwT29PbyBbICdzZXRjb29raWUnIF0gPSBPb09JaWlpaWkxMTFpMWlpICggcmVnZXhzICwgT28wME9vT28gWyAnc2V0Y29va2llJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgaWYgJ2FwcGVuZGNvb2tpZScgaW4gT28wME9vT28gYW5kIE9vMDBPb09vIFsgJ2FwcGVuZGNvb2tpZScgXSBhbmQgJyRkb3JlZ2V4JyBpbiBPbzAwT29PbyBbICdhcHBlbmRjb29raWUnIF0gOgogICAgT28wME9vT28gWyAnYXBwZW5kY29va2llJyBdID0gT29PSWlpaWlpMTExaTFpaSAoIHJlZ2V4cyAsIE9vMDBPb09vIFsgJ2FwcGVuZGNvb2tpZScgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyApCiAgICBpZiA4IC0gODogaWkxMWlpMWlpICUgb29PME9vb28wMCAqIGlJMUlpMTExMTFpSWkgJSBpaUlJSUlJMWkxaUkgLiBvb29PIC8gb29vTwogICAgaWYgODEgLSA4MTogSTFpaTExaUlpMTFpCiAgIGlmICdwb3N0JyBpbiBPbzAwT29PbyBhbmQgJyRkb3JlZ2V4JyBpbiBPbzAwT29PbyBbICdwb3N0JyBdIDoKICAgIE9vMDBPb09vIFsgJ3Bvc3QnIF0gPSBPb09JaWlpaWkxMTFpMWlpICggcmVnZXhzICwgT28wME9vT28gWyAncG9zdCcgXSAsIGNvb2tpZUphciAsIHJlY3Vyc2l2ZUNhbGwgPSBUcnVlICwgY2FjaGVkUGFnZXMgPSBjYWNoZWRQYWdlcyApCiAgICBwcmludCAncG9zdCBpcyBub3cnICwgT28wME9vT28gWyAncG9zdCcgXQogICAgaWYgOTkgLSA5OTogaUkxSWkxMTExMWlJaSAqIG9PME9vb09vTyAqIE8wME9vT29vMDAKICAgaWYgJ3Jhd3Bvc3QnIGluIE9vMDBPb09vIGFuZCAnJGRvcmVnZXgnIGluIE9vMDBPb09vIFsgJ3Jhd3Bvc3QnIF0gOgogICAgT28wME9vT28gWyAncmF3cG9zdCcgXSA9IE9vT0lpaWlpaTExMWkxaWkgKCByZWdleHMgLCBPbzAwT29PbyBbICdyYXdwb3N0JyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICwgcmF3UG9zdCA9IFRydWUgKQogICAgaWYgOTIgLSA5Mjogb09vME8wT29vCiAgICBpZiA0MCAtIDQwOiBPT29vT09vIC8gT29vMAogICBpZiAncmF3cG9zdCcgaW4gT28wME9vT28gYW5kICckZXBvY3RpbWUkJyBpbiBPbzAwT29PbyBbICdyYXdwb3N0JyBdIDoKICAgIE9vMDBPb09vIFsgJ3Jhd3Bvc3QnIF0gPSBPbzAwT29PbyBbICdyYXdwb3N0JyBdIC4gcmVwbGFjZSAoICckZXBvY3RpbWUkJyAsIE9PT29PMDAwICggKSApCiAgICBpZiA1NyAtIDU3OiBvTzBPb29Pb08KICAgaWYgJ3Jhd3Bvc3QnIGluIE9vMDBPb09vIGFuZCAnJGVwb2N0aW1lMiQnIGluIE9vMDBPb09vIFsgJ3Jhd3Bvc3QnIF0gOgogICAgT28wME9vT28gWyAncmF3cG9zdCcgXSA9IE9vMDBPb09vIFsgJ3Jhd3Bvc3QnIF0gLiByZXBsYWNlICggJyRlcG9jdGltZTIkJyAsIG9PT09vbyAoICkgKQogICAgaWYgMTUgLSAxNTogaTExaUlpaUlpaSAlIG8wT28gKiBvTzBvMG9vTzAgLyBPMDBPb09vbzAwCiAgICBpZiA5MCAtIDkwOiBvb08wT29vbzAwCiAgIGkxaTFpMUkgPSAnJwogICBpZiBPbzAwT29PbyBbICdwYWdlJyBdIGFuZCBPbzAwT29PbyBbICdwYWdlJyBdIGluIGNhY2hlZFBhZ2VzIGFuZCBub3QgJ2lnbm9yZWNhY2hlJyBpbiBPbzAwT29PbyBhbmQgZm9yQ29va2llSmFyT25seSA9PSBGYWxzZSA6CiAgICBpMWkxaTFJID0gY2FjaGVkUGFnZXMgWyBPbzAwT29PbyBbICdwYWdlJyBdIF0KICAgZWxzZSA6CiAgICBpZiBPbzAwT29PbyBbICdwYWdlJyBdIGFuZCBub3QgT28wME9vT28gWyAncGFnZScgXSA9PSAnJyBhbmQgT28wME9vT28gWyAncGFnZScgXSAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgICAgaWYgJyRlcG9jdGltZSQnIGluIE9vMDBPb09vIFsgJ3BhZ2UnIF0gOgogICAgICBPbzAwT29PbyBbICdwYWdlJyBdID0gT28wME9vT28gWyAncGFnZScgXSAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lJCcgLCBPT09vTzAwMCAoICkgKQogICAgIGlmICckZXBvY3RpbWUyJCcgaW4gT28wME9vT28gWyAncGFnZScgXSA6CiAgICAgIE9vMDBPb09vIFsgJ3BhZ2UnIF0gPSBPbzAwT29PbyBbICdwYWdlJyBdIC4gcmVwbGFjZSAoICckZXBvY3RpbWUyJCcgLCBvT09Pb28gKCApICkKICAgICAgaWYgODMgLSA4MzogaUkxSWkxMTExMWlJaSArIE9vb29vb29vT08KICAgICAgaWYgMjIgLSAyMjogaWlJSUlJSTFpMWlJICUgb29PME9vb28wMCAqIE9vb29vb29vT08gLSBpaTExaWkxaWkgLyBpSWlpMUkxMUkxSUkxCiAgICAgT28gPSBPbzAwT29PbyBbICdwYWdlJyBdIC4gc3BsaXQgKCAnfCcgKQogICAgIE9PMDBJSWlpSUlpMSA9IE9vIFsgMCBdCiAgICAgbzAwb29PMDBPID0gTm9uZQogICAgIGlmIGxlbiAoIE9vICkgPiAxIDoKICAgICAgbzAwb29PMDBPID0gT28gWyAxIF0KICAgICBpMUkxMTFJID0gdXJsbGliMiAuIFJlcXVlc3QgKCBPTzAwSUlpaUlJaTEgKQogICAgIGkxSTExMUkgLiBhZGRfaGVhZGVyICggJ1VzZXItQWdlbnQnICwgJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMTsgcnY6MTQuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8xNC4wLjEnICkKICAgICBpZiAncmVmZXInIGluIE9vMDBPb09vIDoKICAgICAgaTFJMTExSSAuIGFkZF9oZWFkZXIgKCAnUmVmZXJlcicgLCBPbzAwT29PbyBbICdyZWZlcicgXSApCiAgICAgaWYgJ2FnZW50JyBpbiBPbzAwT29PbyA6CiAgICAgIGkxSTExMUkgLiBhZGRfaGVhZGVyICggJ1VzZXItYWdlbnQnICwgT28wME9vT28gWyAnYWdlbnQnIF0gKQogICAgIGlmICd4LXJlcScgaW4gT28wME9vT28gOgogICAgICBpMUkxMTFJIC4gYWRkX2hlYWRlciAoICdYLVJlcXVlc3RlZC1XaXRoJyAsIE9vMDBPb09vIFsgJ3gtcmVxJyBdICkKICAgICBpZiAneC1mb3J3YXJkJyBpbiBPbzAwT29PbyA6CiAgICAgIGkxSTExMUkgLiBhZGRfaGVhZGVyICggJ1gtRm9yd2FyZGVkLUZvcicgLCBPbzAwT29PbyBbICd4LWZvcndhcmQnIF0gKQogICAgIGlmICdzZXRjb29raWUnIGluIE9vMDBPb09vIDoKICAgICAgcHJpbnQgJ2FkZGluZyBjb29raWUnICwgT28wME9vT28gWyAnc2V0Y29va2llJyBdCiAgICAgIGkxSTExMUkgLiBhZGRfaGVhZGVyICggJ0Nvb2tpZScgLCBPbzAwT29PbyBbICdzZXRjb29raWUnIF0gKQogICAgIGlmICdhcHBlbmRjb29raWUnIGluIE9vMDBPb09vIDoKICAgICAgcHJpbnQgJ2FwcGVuZGluZyBjb29raWUgdG8gY29va2llamFyJyAsIE9vMDBPb09vIFsgJ2FwcGVuZGNvb2tpZScgXQogICAgICBvbzAwbzAgPSBPbzAwT29PbyBbICdhcHBlbmRjb29raWUnIF0KICAgICAgb28wMG8wID0gb28wMG8wIC4gc3BsaXQgKCAnOycgKQogICAgICBmb3IgT29vT09PT29PMDBPb09PIGluIG9vMDBvMCA6CiAgICAgICBvT29vbzBPMG8gLCBPbzAwME8wME8wb09PbyA9IE9vb09PT09vTzAwT29PTyAuIHNwbGl0ICggJz0nICkKICAgICAgIE8wb08gLCBvT29vbzBPMG8gPSBvT29vbzBPMG8gLiBzcGxpdCAoICc6JyApCiAgICAgICBPTzAwMG9vb28wID0gY29va2llbGliIC4gQ29va2llICggdmVyc2lvbiA9IDAgLCBuYW1lID0gb09vb28wTzBvICwgdmFsdWUgPSBPbzAwME8wME8wb09PbyAsIHBvcnQgPSBOb25lICwgcG9ydF9zcGVjaWZpZWQgPSBGYWxzZSAsIGRvbWFpbiA9IE8wb08gLCBkb21haW5fc3BlY2lmaWVkID0gRmFsc2UgLCBkb21haW5faW5pdGlhbF9kb3QgPSBGYWxzZSAsIHBhdGggPSAnLycgLCBwYXRoX3NwZWNpZmllZCA9IFRydWUgLCBzZWN1cmUgPSBGYWxzZSAsIGV4cGlyZXMgPSBOb25lICwgZGlzY2FyZCA9IFRydWUgLCBjb21tZW50ID0gTm9uZSAsIGNvbW1lbnRfdXJsID0gTm9uZSAsIHJlc3QgPSB7ICdIdHRwT25seScgOiBOb25lIH0gLCByZmMyMTA5ID0gRmFsc2UgKQogICAgICAgY29va2llSmFyIC4gc2V0X2Nvb2tpZSAoIE9PMDAwb29vbzAgKQogICAgICAgaWYgNzcgLSA3NzogbzBPbyAlIE8wCiAgICAgICBpZiAzNiAtIDM2OiBpaUlJSUlJMWkxaUkgLyBvTzBPb29Pb08gLyBPb28wIC8gT29vMCArIG9PMG9vTwogICAgICAgaWYgOTUgLSA5NTogT29vMAogICAgICAgaWYgNTEgLSA1MTogb08wT29vT29PICsgT29vMCAuIGkxSUlpIC4gb08wb29PICsgT09vb09PbyAqIG8wT28KICAgICBpZiAnb3JpZ2luJyBpbiBPbzAwT29PbyA6CiAgICAgIGkxSTExMUkgLiBhZGRfaGVhZGVyICggJ09yaWdpbicgLCBPbzAwT29PbyBbICdvcmlnaW4nIF0gKQogICAgIGlmIG8wMG9vTzAwTyA6CiAgICAgIG8wMG9vTzAwTyA9IG8wMG9vTzAwTyAuIHNwbGl0ICggJyYnICkKICAgICAgZm9yIE9vb09PT09vTzAwT29PTyBpbiBvMDBvb08wME8gOgogICAgICAgb09vb28wTzBvICwgT28wMDBPMDBPMG9PT28gPSBPb29PT09Pb08wME9vT08gLiBzcGxpdCAoICc9JyApCiAgICAgICBpMUkxMTFJIC4gYWRkX2hlYWRlciAoIG9Pb29vME8wbyAsIE9vMDAwTzAwTzBvT09vICkKICAgICAgIGlmIDcyIC0gNzI6IGlJMUlpMTExMTFpSWkgKyBpSTFJaTExMTExaUlpIC8gb08wT29vT29PIC4gT29vb29vb29PTyAlIGlpSUlJSUkxaTFpSQogICAgICAgaWYgNDkgLSA0OTogaUkxSWkxMTExMWlJaSAuIEkxaWkxMWlJaTExaSAtIG9PbzBPME9vbyAqIE9vb29vb29vT08gLiBvT28wTzBPb28KICAgICBpZiBub3QgY29va2llSmFyID09IE5vbmUgOgogICAgICBpZiAyIC0gMjogT29vb29vb29PTyAlIGlpMUlJMTFJMWlpMUkKICAgICAgb09vT09vMG9vMCA9IHVybGxpYjIgLiBIVFRQQ29va2llUHJvY2Vzc29yICggY29va2llSmFyICkKICAgICAgbzBPME9vMDBPbzBvID0gdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIG9Pb09PbzBvbzAgLCB1cmxsaWIyIC4gSFRUUEJhc2ljQXV0aEhhbmRsZXIgKCApICwgdXJsbGliMiAuIEhUVFBIYW5kbGVyICggKSApCiAgICAgIG8wTzBPbzAwT28wbyA9IHVybGxpYjIgLiBpbnN0YWxsX29wZW5lciAoIG8wTzBPbzAwT28wbyApCiAgICAgIGlmICdub3JlZGlyZWN0JyBpbiBPbzAwT29PbyA6CiAgICAgICBPT09vID0gdXJsbGliMiAuIGJ1aWxkX29wZW5lciAoIEkxSWlJICkKICAgICAgIG8wTzBPbzAwT28wbyA9IHVybGxpYjIgLiBpbnN0YWxsX29wZW5lciAoIE9PT28gKQogICAgICAgaWYgODggLSA4ODogaTExaUlpaUlpaSAtIG9vb08KICAgICBpZiAnY29ubmVjdGlvbicgaW4gT28wME9vT28gOgogICAgICBwcmludCAnLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi4uLi5jb25uZWN0aW9uLy8vLy8vLicgLCBPbzAwT29PbyBbICdjb25uZWN0aW9uJyBdCiAgICAgIGZyb20ga2VlcGFsaXZlIGltcG9ydCBIVFRQSGFuZGxlcgogICAgICBPMGlJaTFJaUlJID0gSFRUUEhhbmRsZXIgKCApCiAgICAgIG8wTzBPbzAwT28wbyA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBPMGlJaTFJaUlJICkKICAgICAgdXJsbGliMiAuIGluc3RhbGxfb3BlbmVyICggbzBPME9vMDBPbzBvICkKICAgICAgaWYgMjcgLSAyNzogb29PME9vb28wMCAuIG9PMG8wb29PMCAuIGlJaWkxSTExSTFJSTEgLiBpSWlpMUkxMUkxSUkxCiAgICAgIGlmIDIwIC0gMjA6IGlpMTFpaTFpaSAvIGkxSUlpCiAgICAgb09JaTExMSA9IE5vbmUKICAgICBpZiA2NyAtIDY3OiBPMAogICAgIGlmICdwb3N0JyBpbiBPbzAwT29PbyA6CiAgICAgIE9vbyA9IE9vMDBPb09vIFsgJ3Bvc3QnIF0KICAgICAgaWYgJyRMaXZlU3RyZWFtUmVjYXB0Y2hhJyBpbiBPb28gOgogICAgICAgKCBvb29vbzBvICwgb28wT29PT08wbzAgKSA9IGlpSTExSTFpMWkxaUkgKCBPbzAwT29PbyBbICdwYWdlJyBdICkKICAgICAgIGlmIG9vb29vMG8gOgogICAgICAgIE9vbyArPSAncmVjYXB0Y2hhX2NoYWxsZW5nZV9maWVsZDonICsgb29vb28wbyArICcscmVjYXB0Y2hhX3Jlc3BvbnNlX2ZpZWxkOicgKyBvbzBPb09PTzBvMAogICAgICBPb09PbzAwMG8wID0gT29vIC4gc3BsaXQgKCAnLCcgKSA7CiAgICAgIG9PSWkxMTEgPSB7IH0KICAgICAgZm9yIGlpIGluIE9vT09vMDAwbzAgOgogICAgICAgb09vb28wTzBvID0gaWkgLiBzcGxpdCAoICc6JyApIFsgMCBdIDsKICAgICAgIE9vMDAwTzAwTzBvT09vID0gaWkgLiBzcGxpdCAoICc6JyApIFsgMSBdIDsKICAgICAgIG9PSWkxMTEgWyBvT29vbzBPMG8gXSA9IE9vMDAwTzAwTzBvT09vCiAgICAgIG9PSWkxMTEgPSB1cmxsaWIgLiB1cmxlbmNvZGUgKCBvT0lpMTExICkKICAgICAgaWYgMzIgLSAzMjogaWlJSUlJSTFpMWlJICUgb08wb29PIC0gaWkxSUkxMUkxaWkxSSAqIGlpMTFpaTFpaSArIG9PMG8wb29PMAogICAgIGlmICdyYXdwb3N0JyBpbiBPbzAwT29PbyA6CiAgICAgIG9PSWkxMTEgPSBPbzAwT29PbyBbICdyYXdwb3N0JyBdCiAgICAgIGlmICckTGl2ZVN0cmVhbVJlY2FwdGNoYScgaW4gb09JaTExMSA6CiAgICAgICAoIG9vb29vMG8gLCBvbzBPb09PTzBvMCApID0gaWlJMTFJMWkxaTFpSSAoIE9vMDBPb09vIFsgJ3BhZ2UnIF0gKQogICAgICAgaWYgb29vb28wbyA6CiAgICAgICAgb09JaTExMSArPSAnJnJlY2FwdGNoYV9jaGFsbGVuZ2VfZmllbGQ9JyArIG9vb29vMG8gKyAnJnJlY2FwdGNoYV9yZXNwb25zZV9maWVsZD0nICsgb28wT29PT08wbzAKICAgICAgICBpZiAxMCAtIDEwOiBvME9vIC8gb09vME8wT29vICUgb08wb29PICogb29vTwogICAgICAgIGlmIDYgLSA2OiBvb08wT29vbzAwIC4gT29vMCAqIE9Pb29PT28gLiBpMUlJaQogICAgICAgIGlmIDk4IC0gOTg6IGkxSUlpCiAgICAgICAgaWYgNjUgLSA2NTogT09vb09PbyAvIEkxaWkxMWlJaTExaSAlIE9vbzAKICAgICBpZiBvT0lpMTExIDoKICAgICAgaTExSTFJSWlpSWkgPSB1cmxsaWIyIC4gdXJsb3BlbiAoIGkxSTExMUkgLCBvT0lpMTExICkKICAgICBlbHNlIDoKICAgICAgaTExSTFJSWlpSWkgPSB1cmxsaWIyIC4gdXJsb3BlbiAoIGkxSTExMUkgKQogICAgICBpZiA0NSAtIDQ1OiBPT29vT09vCiAgICAgaTFpMWkxSSA9IGkxMUkxSUlpaUlpIC4gcmVhZCAoICkKICAgICBpMWkxaTFJID0gb09vb09PICggaTFpMWkxSSApCiAgICAgaWYgMzEgLSAzMTogaWkxSUkxMUkxaWkxSSAvIG9PbzBPME9vbyAqIGkxSUlpIC4gT09vb09PbwogICAgIGlmICdpbmNsdWRlaGVhZGVycycgaW4gT28wME9vT28gOgogICAgICBpMWkxaTFJICs9IHN0ciAoIGkxMUkxSUlpaUlpIC4gaGVhZGVycyAuIGdldCAoICdTZXQtQ29va2llJyApICkKICAgICAgaWYgNTcgLSA1NzogaWkxSUkxMUkxaWkxSSArIGlJaWkxSTExSTFJSTEgJSBpMUlJaSAlIG8wT28KICAgICBpMTFJMUlJaWlJaSAuIGNsb3NlICggKQogICAgIGNhY2hlZFBhZ2VzIFsgT28wME9vT28gWyAncGFnZScgXSBdID0gaTFpMWkxSQogICAgIGlmIDgzIC0gODM6IGlpMTFpaTFpaSAvIGkxMWlJaWlJaWkgJSBpSWlpMUkxMUkxSUkxIC4gb08wbzBvb08wICUgaUkxSWkxMTExMWlJaSAuIE9vb29vb29vT08KICAgICBpZiA5NCAtIDk0OiBpaUlJSUlJMWkxaUkgKyBpSWlpMUkxMUkxSUkxICUgSTFpaTExaUlpMTFpCiAgICAgaWYgOTMgLSA5MzogaWlJSUlJSTFpMWlJIC0gaWkxSUkxMUkxaWkxSSArIGlJaWkxSTExSTFJSTEgKiBpaTExaWkxaWkgKyBPMDBPb09vbzAwIC4gb29PME9vb28wMAogICAgIGlmIGZvckNvb2tpZUphck9ubHkgOgogICAgICByZXR1cm4gY29va2llSmFyCiAgICBlbGlmIE9vMDBPb09vIFsgJ3BhZ2UnIF0gYW5kIG5vdCBPbzAwT29PbyBbICdwYWdlJyBdIC4gc3RhcnRzd2l0aCAoICdodHRwJyApIDoKICAgICBpZiBPbzAwT29PbyBbICdwYWdlJyBdIC4gc3RhcnRzd2l0aCAoICckcHlGdW5jdGlvbjonICkgOgogICAgICBJaUkxaUlJMUlJMTExID0gSUlpSTExaTExMTFJaSAoIE9vMDBPb09vIFsgJ3BhZ2UnIF0gLiBzcGxpdCAoICckcHlGdW5jdGlvbjonICkgWyAxIF0gLCAnJyAsIGNvb2tpZUphciApCiAgICAgIGlmIGZvckNvb2tpZUphck9ubHkgOgogICAgICAgcmV0dXJuIGNvb2tpZUphcgogICAgICBpMWkxaTFJID0gSWlJMWlJSTFJSTExMQogICAgIGVsc2UgOgogICAgICBpMWkxaTFJID0gT28wME9vT28gWyAncGFnZScgXQogICBpZiAnJHB5RnVuY3Rpb246cGxheW1lZGlhKCcgaW4gT28wME9vT28gWyAnZXhwcmUnIF0gb3IgJ0FjdGl2YXRlV2luZG93JyBpbiBPbzAwT29PbyBbICdleHByZScgXSBvciBhbnkgKCB4IGluIHVybCBmb3IgeCBpbiBJSWlJaUlJMTFpICkgOgogICAgaTFpSWkgPSBGYWxzZQogICBpZiAnJGRvcmVnZXgnIGluIE9vMDBPb09vIFsgJ2V4cHJlJyBdIDoKICAgIE9vMDBPb09vIFsgJ2V4cHJlJyBdID0gT29PSWlpaWlpMTExaTFpaSAoIHJlZ2V4cyAsIE9vMDBPb09vIFsgJ2V4cHJlJyBdICwgY29va2llSmFyICwgcmVjdXJzaXZlQ2FsbCA9IFRydWUgLCBjYWNoZWRQYWdlcyA9IGNhY2hlZFBhZ2VzICkKICAgIGlmIDYzIC0gNjM6IGlpMUlJMTFJMWlpMUkgKyBvb29PCiAgICBpZiA2NiAtIDY2OiBpaTFJSTExSTFpaTFJIC0gaUlpaTFJMTFJMUlJMSAvIE9Pb29PT28gKyBpaTFJSTExSTFpaTFJIC0gb08wbzBvb08wICsgb29PME9vb28wMAogICBpZiBub3QgT28wME9vT28gWyAnZXhwcmUnIF0gPT0gJycgOgogICAgcHJpbnQgJ2RvaW5nIGl0ICcgLCBPbzAwT29PbyBbICdleHByZScgXQogICAgaWYgJyRMaXZlU3RyZWFtQ2FwdGNoYScgaW4gT28wME9vT28gWyAnZXhwcmUnIF0gOgogICAgIElpSTFpSUkxSUkxMTEgPSBJSWlpMWkxaWlpMSAoIE9vMDBPb09vICwgaTFpMWkxSSAsIGNvb2tpZUphciApCiAgICAgaWYgNzAgLSA3MDogaTExaUlpaUlpaSAlIG9vTzBPb29vMDAKICAgICB1cmwgPSB1cmwgLiByZXBsYWNlICggIiRkb3JlZ2V4WyIgKyBPTzAwICsgIl0iICwgSWlJMWlJSTFJSTExMSApCiAgICBlbGlmIE9vMDBPb09vIFsgJ2V4cHJlJyBdIC4gc3RhcnRzd2l0aCAoICckcHlGdW5jdGlvbjonICkgOgogICAgIGlmIDExIC0gMTE6IE9vbzAgJSBvTzBvb08gJSBpaUlJSUlJMWkxaUkgLyBvTzBPb29Pb08gJSBPMDBPb09vbzAwIC0gb09vME8wT29vCiAgICAgSWlJMWlJSTFJSTExMSA9IElJaUkxMWkxMTExSWkgKCBPbzAwT29PbyBbICdleHByZScgXSAuIHNwbGl0ICggJyRweUZ1bmN0aW9uOicgKSBbIDEgXSAsIGkxaTFpMUkgLCBjb29raWVKYXIgKQogICAgIGlmICdBY3RpdmF0ZVdpbmRvdycgaW4gT28wME9vT28gWyAnZXhwcmUnIF0gOiByZXR1cm4KICAgICBwcmludCAnc3RpbGwgaHJlJwogICAgIHByaW50ICd1cmwgayB2YWwnICwgdXJsICwgT08wMCAsIElpSTFpSUkxSUkxMTEKICAgICBpZiA5NiAtIDk2OiBvTzBvb08gLyBvTzBPb29Pb08gLiBpaUlJSUlJMWkxaUkgLSBvb08wT29vbzAwICogb08wbzBvb08wICogaUkxSWkxMTExMWlJaQogICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIE9PMDAgKyAiXSIgLCBJaUkxaUlJMUlJMTExICkKICAgIGVsc2UgOgogICAgIGlmIG5vdCBpMWkxaTFJID09ICcnIDoKICAgICAgTzAwb28wb29PID0gcmUgLiBjb21waWxlICggT28wME9vT28gWyAnZXhwcmUnIF0gKSAuIHNlYXJjaCAoIGkxaTFpMUkgKQogICAgICBJaUkxaUlJMUlJMTExID0gJycKICAgICAgdHJ5IDoKICAgICAgIElpSTFpSUkxSUkxMTEgPSBPMDBvbzBvb08gLiBncm91cCAoIDEgKSAuIHN0cmlwICggKQogICAgICBleGNlcHQgOiB0cmFjZWJhY2sgLiBwcmludF9leGMgKCApCiAgICAgZWxzZSA6CiAgICAgIElpSTFpSUkxSUkxMTEgPSBPbzAwT29PbyBbICdleHByZScgXQogICAgIGlmIHJhd1Bvc3QgOgogICAgICBwcmludCAncmF3cG9zdCcKICAgICAgSWlJMWlJSTFJSTExMSA9IHVybGxpYiAuIHF1b3RlX3BsdXMgKCBJaUkxaUlJMUlJMTExICkKICAgICBpZiAnaHRtbHVuZXNjYXBlJyBpbiBPbzAwT29PbyA6CiAgICAgIGlmIDM4IC0gMzg6IGlJaWkxSTExSTFJSTEgLSBvTzBPb29Pb08gLSBvME9vCiAgICAgIGltcG9ydCBIVE1MUGFyc2VyCiAgICAgIElpSTFpSUkxSUkxMTEgPSBIVE1MUGFyc2VyIC4gSFRNTFBhcnNlciAoICkgLiB1bmVzY2FwZSAoIElpSTFpSUkxSUkxMTEgKQogICAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAiJGRvcmVnZXhbIiArIE9PMDAgKyAiXSIgLCBJaUkxaUlJMUlJMTExICkKICAgICBpZiA3MSAtIDcxOiBPb29vb29vb09PCiAgIGVsc2UgOgogICAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICIkZG9yZWdleFsiICsgT08wMCArICJdIiAsICcnICkKIGlmICckZXBvY3RpbWUkJyBpbiB1cmwgOgogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lJCcgLCBPT09vTzAwMCAoICkgKQogaWYgJyRlcG9jdGltZTIkJyBpbiB1cmwgOgogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJGVwb2N0aW1lMiQnICwgb09PT29vICggKSApCiAgaWYgMzMgLSAzMzogTzAwT29Pb28wMAogaWYgJyRHVUlEJCcgaW4gdXJsIDoKICBpbXBvcnQgdXVpZAogIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJEdVSUQkJyAsIHN0ciAoIHV1aWQgLiB1dWlkMSAoICkgKSAuIHVwcGVyICggKSApCiBpZiAnJGdldF9jb29raWVzJCcgaW4gdXJsIDoKICB1cmwgPSB1cmwgLiByZXBsYWNlICggJyRnZXRfY29va2llcyQnICwgT09PMG9vbyAoIGNvb2tpZUphciApICkKICBpZiA3IC0gNzogaWkxMWlpMWlpICsgaTFJSWkgLiBvME9vIC8gb09vME8wT29vCiBpZiByZWN1cnNpdmVDYWxsIDogcmV0dXJuIHVybAogcHJpbnQgJ2ZpbmFsIHVybCcgLCB1cmwKIGlmIHVybCA9PSAiIiA6CiAgcmV0dXJuCiBlbHNlIDoKICByZXR1cm4gdXJsICwgaTFpSWkKICBpZiAyMiAtIDIyOiBvb29PIC0gb29vTyAlIGlpMUlJMTFJMWlpMUkgLiBPMDBPb09vbzAwICsgaUkxSWkxMTExMWlJaQogIGlmIDYzIC0gNjM6IG8wT28gJSBPMDBPb09vbzAwICogaWkxMWlpMWlpICsgTzAwT29Pb28wMCAvIG9PbzBPME9vbyAlIG9vTzBPb29vMDAKICBpZiA0NSAtIDQ1OiBPb28wCmRlZiBJaTFJaWkxMTFJaUkxICggdCApIDoKIGltcG9ydCBoYXNobGliCiBPb29PT09Pb08wME9vT08gPSBoYXNobGliIC4gbWQ1ICggKQogT29vT09PT29PMDBPb09PIC4gdXBkYXRlICggdCApCiByZXR1cm4gT29vT09PT29PMDBPb09PIC4gaGV4ZGlnZXN0ICggKQogaWYgOTggLSA5ODogTzAwT29Pb28wMCAtIE9vb29vb29vT08gJSBvME9vICsgTzAgLiBpaUlJSUlJMWkxaUkKZGVmIE9vT08gKCBlbmNyeXB0ZWQgKSA6CiBpSUlJMUkxaTFpID0gIiIKIGZvciBJaUkxaUlJMUlJMTExIGluIGVuY3J5cHRlZCAuIHNwbGl0ICggJzonICkgOgogIGlJSUkxSTFpMWkgKz0gY2hyICggaW50ICggSWlJMWlJSTFJSTExMSAuIHJlcGxhY2UgKCAiMG0wIiAsICIiICkgKSAvIDg0IC8gNSApCiByZXR1cm4gaUlJSTFJMWkxaQogaWYgNzkgLSA3OTogaWlJSUlJSTFpMWlJIC4gSTFpaTExaUlpMTFpCmRlZiBJSWlJMUkxICggbWVkaWFfdXJsICkgOgogdHJ5IDoKICBpbXBvcnQgQ3VzdG9tUGxheWVyCiAgSTExSTFJSWlpSUkxID0gQ3VzdG9tUGxheWVyIC4gTXlYQk1DUGxheWVyICggKQogIElJSUlJaWkxaWkxMSA9IHhibWNndWkgLiBMaXN0SXRlbSAoIGxhYmVsID0gc3RyICggaWlpSTFJMTFpMSApICwgaWNvbkltYWdlID0gIkRlZmF1bHRWaWRlby5wbmciICwgdGh1bWJuYWlsSW1hZ2UgPSB4Ym1jIC4gZ2V0SW5mb0ltYWdlICggIkxpc3RJdGVtLlRodW1iIiApICwgcGF0aCA9IG1lZGlhX3VybCApCiAgSTExSTFJSWlpSUkxIC4gcGxheSAoIG1lZGlhX3VybCAsIElJSUlJaWkxaWkxMSApCiAgeGJtYyAuIHNsZWVwICggMTAwMCApCiAgd2hpbGUgSTExSTFJSWlpSUkxIC4gaXNfYWN0aXZlIDoKICAgeGJtYyAuIHNsZWVwICggMjAwICkKIGV4Y2VwdCA6CiAgdHJhY2ViYWNrIC4gcHJpbnRfZXhjICggKQogcmV0dXJuICcnCiBpZiA4NiAtIDg2OiBPT29vT09vICogb08wT29vT29PIC0gTzAgLiBPT29vT09vICUgaUlpaTFJMTFJMUlJMSAvIGlpMUlJMTFJMWlpMUkKIGlmIDExIC0gMTE6IG8wT28gKiBpSTFJaTExMTExaUlpICsgb08wb29PIC8gb08wb29PCmRlZiBpaWlpMUkxICggcGFnZV92YWx1ZSAsIHJlZmVyZXIgPSBOb25lICkgOgogaWYgcmVmZXJlciA6CiAgcmVmZXJlciA9IFsgKCAnUmVmZXJlcicgLCByZWZlcmVyICkgXQogaWYgcGFnZV92YWx1ZSAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgSUlJaUlpSTExaUlpID0gcGFnZV92YWx1ZQogIHBhZ2VfdmFsdWUgPSBpMWkxMUkxSTFpaWkxICggcGFnZV92YWx1ZSAsIGhlYWRlcnMgPSByZWZlcmVyICkKICBpZiA4OSAtIDg5OiBPMAogSUlJSUkxSTFJaTExaUkgPSAiKGV2YWxcKGZ1bmN0aW9uXChwLGEsYyxrLGUsKD86cnxkKS4qKSIKIGlmIDUyIC0gNTI6IGlpMUlJMTFJMWlpMUkgLSBvb08wT29vbzAwICogaUkxSWkxMTExMWlJaQogSWkxSTExSSA9IHJlIC4gY29tcGlsZSAoIElJSUlJMUkxSWkxMWlJICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApCiBvME8wb28wT08wTyA9ICIiCiBpZiBJaTFJMTFJIGFuZCBsZW4gKCBJaTFJMTFJICkgPiAwIDoKICBmb3IgT28wMDBPMDBPMG9PT28gaW4gSWkxSTExSSA6CiAgIGlpSWlpMUkgPSBpMUkxMWlJaUlJICggT28wMDBPMDBPMG9PT28gKQogICBPTzBPTzBPTyA9IE9vT08wMDAgKCBpaUlpaTFJICwgJ1wnKC4qPylcJycgKQogICBpZiAndW5lc2NhcGUnIGluIGlpSWlpMUkgOgogICAgaWlJaWkxSSA9IHVybGxpYiAuIHVucXVvdGUgKCBPTzBPTzBPTyApCiAgIG8wTzBvbzBPTzBPICs9IGlpSWlpMUkgKyAnXG4nCiAgcHJpbnQgJ2ZpbmFsIHZhbHVlIGlzICcgLCBvME8wb28wT08wTwogIGlmIDYxIC0gNjE6IE9vb29vb29vT08gLiBpSTFJaTExMTExaUlpIC4gT29vb29vb29PTyAvIG9PbzBPME9vbwogIElJSWlJaUkxMWlJaSA9IE9vT08wMDAgKCBvME8wb28wT08wTyAsICdzcmM9IiguKj8pIicgKQogIGlmIDcyIC0gNzI6IGkxSUlpCiAgcGFnZV92YWx1ZSA9IGkxaTExSTFJMWlpaTEgKCBJSUlpSWlJMTFpSWkgLCBoZWFkZXJzID0gcmVmZXJlciApCiAgaWYgODIgLSA4MjogT09vb09PbyArIE9vb29vb29vT08gLyBpMTFpSWlpSWlpICogb08wb29PIC4gT29vb29vb29PTwogIGlmIDYzIC0gNjM6IG9PMG9vTwogIGlmIDYgLSA2OiBvb29PIC8gb08wb29PCiBvT29vTzAwbzBPID0gT29PTzAwMCAoIHBhZ2VfdmFsdWUgLCAnc3RyZWFtZXJcJy4qP1wnKC4qPylcJ1wpJyApCiBPT28wID0gT29PTzAwMCAoIHBhZ2VfdmFsdWUgLCAnZmlsZVwnLFxzXCcoLio/KVwnJyApCiBpZiAzNSAtIDM1OiBpMUlJaSAtIGlJaWkxSTExSTFJSTEgKyBpMUlJaQogaWYgODYgLSA4NjogaUlpaTFJMTFJMUlJMSArIE9Pb29PT28gLiBpMTFpSWlpSWlpIC0gaWlJSUlJSTFpMWlJCiByZXR1cm4gb09vb08wMG8wTyArICcgcGxheXBhdGg9JyArIE9PbzAgKyAnIHBhZ2VVcmw9JyArIElJSWlJaUkxMWlJaQogaWYgNTEgLSA1MTogT09vb09PbwpkZWYgSTExSUlJaUlpMTEgKCBwYWdlX3ZhbHVlICwgcmVmZXJlciA9IE5vbmUgKSA6CiBpZiByZWZlcmVyIDoKICByZWZlcmVyID0gWyAoICdSZWZlcmVyJyAsIHJlZmVyZXIgKSBdCiBpZiBwYWdlX3ZhbHVlIC4gc3RhcnRzd2l0aCAoICJodHRwIiApIDoKICBwYWdlX3ZhbHVlID0gaTFpMTFJMUkxaWlpMSAoIHBhZ2VfdmFsdWUgLCBoZWFkZXJzID0gcmVmZXJlciApCiBJSUlJSTFJMUlpMTFpSSA9ICJ2YXIgYSA9ICguKj8pO1xzKnZhciBiID0gKC4qPyk7XHMqdmFyIGMgPSAoLio/KTtccyp2YXIgZCA9ICguKj8pO1xzKnZhciBmID0gKC4qPyk7XHMqdmFyIHZfcGFydCA9ICcoLio/KSc7IgogSWkxSTExSSA9IHJlIC4gY29tcGlsZSAoIElJSUlJMUkxSWkxMWlJICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApIFsgMCBdCiBpZiAzOSAtIDM5OiBpaUlJSUlJMWkxaUkgJSBPMCAlIE9Pb29PT28gLiBpMUlJaQogaUlpSWkxMSAsIE8wT09PME9Pb08wTyAsIE9vTyAsIG9PbzAwT29vTzBvTyAsIEkxSUlpICwgT28wMDBPMDBPMG9PT28gPSAoIElpMUkxMUkgKQogSTFJSWkgPSBpbnQgKCBJMUlJaSApCiBpSWlJaTExID0gaW50ICggaUlpSWkxMSApIC8gSTFJSWkKIE8wT09PME9Pb08wTyA9IGludCAoIE8wT09PME9Pb08wTyApIC8gSTFJSWkKIE9vTyA9IGludCAoIE9vTyApIC8gSTFJSWkKIG9PbzAwT29vTzBvTyA9IGludCAoIG9PbzAwT29vTzBvTyApIC8gSTFJSWkKIGlmIDY5IC0gNjk6IGlpSUlJSUkxaTFpSSArIG9PbzBPME9vbyArIG9PME9vb09vTyAtIG8wT28gLyBvTzBvMG9vTzAKIE8wTzBvb09PTyA9ICdydG1wOi8vJyArIHN0ciAoIGlJaUlpMTEgKSArICcuJyArIHN0ciAoIE8wT09PME9Pb08wTyApICsgJy4nICsgc3RyICggT29PICkgKyAnLicgKyBzdHIgKCBvT28wME9vb08wb08gKSArIE9vMDAwTzAwTzBvT09vIDsKIHJldHVybiBPME8wb29PT08KIGlmIDcwIC0gNzA6IG9vb08gLiBPMCAuIE8wME9vT29vMDAgLiBPMCArIGkxSUlpCmRlZiBpMUlJMUkgKCB1cmwgLCB1c2VyYWdlbnQgPSBOb25lICkgOgogc3RyID0gJyNFWFRNM1UnCiBzdHIgKz0gJ1xuI0VYVC1YLVNUUkVBTS1JTkY6UFJPR1JBTS1JRD0xLEJBTkRXSURUSD0zNjE4MTYnCiBzdHIgKz0gJ1xuJyArIHVybCArICcmYnl0ZXM9MC0yMDAwMDAnCiBPT08wTyA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAndGVzdGZpbGUubTN1JyApCiBzdHIgKz0gJ1xuJwogT09vTzBvb09PICggT09PME8gLCBzdHIgKQogaWYgMjQgLSAyNDogaTFJSWkgLiBpMTFpSWlpSWlpCiByZXR1cm4gT09PME8KIGlmIDE2IC0gMTY6IG9PbzBPME9vbyAlIG9PMG9vTyArIG9PMG8wb29PMCAtIE8wIC4gb29PME9vb28wMCAvIE8wME9vT29vMDAKZGVmIE9Pb08wb29PTyAoIGZpbGVfbmFtZSAsIHBhZ2VfZGF0YSAsIGFwcGVuZCA9IEZhbHNlICkgOgogaWYgYXBwZW5kIDoKICBJMUlJaSA9IG9wZW4gKCBmaWxlX25hbWUgLCAnYScgKQogIEkxSUlpIC4gd3JpdGUgKCBwYWdlX2RhdGEgKQogIEkxSUlpIC4gY2xvc2UgKCApCiBlbHNlIDoKICBJMUlJaSA9IG9wZW4gKCBmaWxlX25hbWUgLCAnd2InICkKICBJMUlJaSAuIHdyaXRlICggcGFnZV9kYXRhICkKICBJMUlJaSAuIGNsb3NlICggKQogIHJldHVybiAnJwogIGlmIDM1IC0gMzU6IGlJMUlpMTExMTFpSWkgLyBPMDBPb09vbzAwIC8gb08wT29vT29PIC0gaUlpaTFJMTFJMUlJMSArIG9PME9vb09vTyAuIE8wME9vT29vMDAKZGVmIE8wTzAwTzAwME9PTyAoIGZpbGVfbmFtZSApIDoKIEkxSUlpID0gb3BlbiAoIGZpbGVfbmFtZSAsICdyYicgKQogb09vMDBPb29PMG9PID0gSTFJSWkgLiByZWFkICggKQogSTFJSWkgLiBjbG9zZSAoICkKIHJldHVybiBvT28wME9vb08wb08KIGlmIDMgLSAzOiBPMApkZWYgT29vME9vMG9vMCAoIHBhZ2VfZGF0YSApIDoKIGltcG9ydCByZSAsIGJhc2U2NCAsIHVybGxpYiA7CiBvT08wbzAwME9vMDBvID0gcGFnZV9kYXRhCiB3aGlsZSAnZ2VoKCcgaW4gb09PMG8wMDBPbzAwbyA6CiAgaWYgb09PMG8wMDBPbzAwbyAuIHN0YXJ0c3dpdGggKCAnbG9sKCcgKSA6IG9PTzBvMDAwT28wMG8gPSBvT08wbzAwME9vMDBvIFsgNSA6IC0gMSBdCiAgaWYgMjEgLSAyMTogT29vb29vb29PTyAtIGlJaWkxSTExSTFJSTEKICBvT08wbzAwME9vMDBvID0gcmUgLiBjb21waWxlICggJyIoLio/KSInICkgLiBmaW5kYWxsICggb09PMG8wMDBPbzAwbyApIFsgMCBdIDsKICBvT08wbzAwME9vMDBvID0gYmFzZTY0IC4gYjY0ZGVjb2RlICggb09PMG8wMDBPbzAwbyApIDsKICBvT08wbzAwME9vMDBvID0gdXJsbGliIC4gdW5xdW90ZSAoIG9PTzBvMDAwT28wMG8gKSA7CiBwcmludCBvT08wbzAwME9vMDBvCiByZXR1cm4gb09PMG8wMDBPbzAwbwogaWYgOTMgLSA5MzogaUkxSWkxMTExMWlJaSAtIGlpMTFpaTFpaSAlIE9Pb29PT28gLiBPT29vT09vIC0gb29vTwpkZWYgTzAwb29PbyAoIHBhZ2VfZGF0YSApIDoKIHByaW50ICdnZXRfZGFnX3VybDInICwgcGFnZV9kYXRhCiBvT08wbzAwTyA9IGkxaTExSTFJMWlpaTEgKCBwYWdlX2RhdGEgKSA7CiBvT29PID0gJyhodHRwLiopJwogaW1wb3J0IHV1aWQKIElJSUlpSTFpaWlJaWlpID0gc3RyICggdXVpZCAuIHV1aWQxICggKSApIC4gdXBwZXIgKCApCiBpaTFpMWkgPSByZSAuIGNvbXBpbGUgKCBvT29PICkgLiBmaW5kYWxsICggb09PMG8wME8gKQogb28gPSBbICggJ1gtUGxheWJhY2stU2Vzc2lvbi1JZCcgLCBJSUlJaUkxaWlpSWlpaSApIF0KIGZvciBJSTExaUlJSTFpMUkgaW4gaWkxaTFpIDoKICB0cnkgOgogICBvT08wb28gPSBpMWkxMUkxSTFpaWkxICggSUkxMWlJSUkxaTFJICwgaGVhZGVycyA9IG9vICkgOwogICBpZiAxMyAtIDEzOiBPb29vb29vb09PICogaUkxSWkxMTExMWlJaSAtIGlpSUlJSUkxaTFpSSAvIGlpMUlJMTFJMWlpMUkgKyBvTzBvMG9vTzAgKyBPb28wCiAgZXhjZXB0IDogcGFzcwogIGlmIDM5IC0gMzk6IGlJaWkxSTExSTFJSTEgLSBPb29vb29vb09PCiByZXR1cm4gcGFnZV9kYXRhICsgJ3wmWC1QbGF5YmFjay1TZXNzaW9uLUlkPScgKyBJSUlJaUkxaWlpSWlpaQogaWYgODEgLSA4MTogb08wb29PIC0gTzAgKiBPb29vb29vb09PCiBpZiAyMyAtIDIzOiBvTzBPb29Pb08gLyBpSTFJaTExMTExaUlpCmRlZiBpSUkxSWlpMUkxMWkgKCBwYWdlX2RhdGEgKSA6CiBwcmludCAnZ2V0X2RhZ191cmwnICwgcGFnZV9kYXRhCiBpZiBwYWdlX2RhdGEgLiBzdGFydHN3aXRoICggJ2h0dHA6Ly9kYWcudG90YWwtc3RyZWFtLm5ldCcgKSA6CiAgb28gPSBbICggJ1VzZXItQWdlbnQnICwgJ1ZlcmlzbW8tQmxhY2tVSV8oMi40LjcuNS44LjAuMzQpJyApIF0KICBwYWdlX2RhdGEgPSBpMWkxMUkxSTFpaWkxICggcGFnZV9kYXRhICwgaGVhZGVycyA9IG9vICkgOwogIGlmIDE3IC0gMTc6IE8wCiBpZiAnMTI3LjAuMC4xJyBpbiBwYWdlX2RhdGEgOgogIHJldHVybiBPT29vTzBvICggcGFnZV9kYXRhICkKIGVsaWYgT29PTzAwMCAoIHBhZ2VfZGF0YSAsICd3bXNBdXRoU2lnbiUzRChbXiUmXSspJyApICE9ICcnIDoKICBpaTFpSTFpSTEgPSBPb09PMDAwICggcGFnZV9kYXRhICwgJyZ2ZXJfdD0oW14mXSspJicgKSArICc/d21zQXV0aFNpZ249JyArIE9vT08wMDAgKCBwYWdlX2RhdGEgLCAnd21zQXV0aFNpZ24lM0QoW14lJl0rKScgKSArICc9PS9tcDQ6JyArIE9vT08wMDAgKCBwYWdlX2RhdGEgLCAnXFw/eT0oW14mXSspJicgKQogZWxzZSA6CiAgaWkxaUkxaUkxID0gT29PTzAwMCAoIHBhZ2VfZGF0YSAsICdocmVmPSIoW14iXSspIlteIl0rJCcgKQogIGlmIGxlbiAoIGlpMWlJMWlJMSApID09IDAgOgogICBpaTFpSTFpSTEgPSBwYWdlX2RhdGEKIGlpMWlJMWlJMSA9IGlpMWlJMWlJMSAuIHJlcGxhY2UgKCAnICcgLCAnJTIwJyApCiByZXR1cm4gaWkxaUkxaUkxCiBpZiA1NSAtIDU1OiBvb29PICsgaWkxSUkxMUkxaWkxSQpkZWYgT29PTzAwMCAoIGRhdGEgLCByZV9wYXR0ZW4gKSA6CiBpMTExMTFJSUlJSSA9ICcnCiBPbzAwT29PbyA9IHJlIC4gc2VhcmNoICggcmVfcGF0dGVuICwgZGF0YSApCiBpZiBPbzAwT29PbyAhPSBOb25lIDoKICBpMTExMTFJSUlJSSA9IE9vMDBPb09vIC4gZ3JvdXAgKCAxICkKIGVsc2UgOgogIGkxMTExMUlJSUlJID0gJycKIHJldHVybiBpMTExMTFJSUlJSQogaWYgMTggLSAxODogaUkxSWkxMTExMWlJaSAtIGlpMTFpaTFpaSAtIG8wT28gLSBvME9vCmRlZiBPT29vTzBvICggcGFnZV9kYXRhICkgOgogaWkxaUkxaUkxID0gJycKIGlmICcxMjcuMC4wLjEnIGluIHBhZ2VfZGF0YSA6CiAgaWkxaUkxaUkxID0gT29PTzAwMCAoIHBhZ2VfZGF0YSAsICcmdmVyX3Q9KFteJl0rKSYnICkgKyAnIGxpdmU9dHJ1ZSB0aW1lb3V0PTE1IHBsYXlwYXRoPScgKyBPb09PMDAwICggcGFnZV9kYXRhICwgJ1xcP3k9KFthLXpBLVowLTktX1xcLkBdKyknICkKICBpZiA1NCAtIDU0OiBvT28wTzBPb28gKyBvME9vIC8gb29PME9vb28wMCAuIG8wT28gKiBPT29vT09vCiBpZiBPb09PMDAwICggcGFnZV9kYXRhICwgJ3Rva2VuPShbXiZdKykmJyApICE9ICcnIDoKICBpaTFpSTFpSTEgPSBpaTFpSTFpSTEgKyAnP3Rva2VuPScgKyBPb09PMDAwICggcGFnZV9kYXRhICwgJ3Rva2VuPShbXiZdKykmJyApCiBlbGlmIE9vT08wMDAgKCBwYWdlX2RhdGEgLCAnd21zQXV0aFNpZ24lM0QoW14lJl0rKScgKSAhPSAnJyA6CiAgaWkxaUkxaUkxID0gT29PTzAwMCAoIHBhZ2VfZGF0YSAsICcmdmVyX3Q9KFteJl0rKSYnICkgKyAnP3dtc0F1dGhTaWduPScgKyBPb09PMDAwICggcGFnZV9kYXRhICwgJ3dtc0F1dGhTaWduJTNEKFteJSZdKyknICkgKyAnPT0vbXA0OicgKyBPb09PMDAwICggcGFnZV9kYXRhICwgJ1xcP3k9KFteJl0rKSYnICkKIGVsc2UgOgogIGlpMWlJMWlJMSA9IE9vT08wMDAgKCBwYWdlX2RhdGEgLCAnSFJFRj0iKFteIl0rKSInICkKICBpZiAxIC0gMTogT09vb09PbyAqIEkxaWkxMWlJaTExaSAuIGkxSUlpIC8gb09vME8wT29vIC4gb08wb29PICsgb09vME8wT29vCiBpZiAnZGFnMS5hc3gnIGluIGlpMWlJMWlJMSA6CiAgcmV0dXJuIGlJSTFJaWkxSTExaSAoIGlpMWlJMWlJMSApCiAgaWYgMTcgLSAxNzogb09vME8wT29vICsgSTFpaTExaUlpMTFpIC8gaWlJSUlJSTFpMWlJIC8gb29PME9vb28wMCAqIGlpMUlJMTFJMWlpMUkKIGlmICdkZXZpbmxpdmVmcy5mcGxpdmUubmV0JyBub3QgaW4gaWkxaUkxaUkxIDoKICBpaTFpSTFpSTEgPSBpaTFpSTFpSTEgLiByZXBsYWNlICggJ2RldmlubGl2ZScgLCAnZmxpdmUnICkKIGlmICdwZXJtbGl2ZWZzLmZwbGl2ZS5uZXQnIG5vdCBpbiBpaTFpSTFpSTEgOgogIGlpMWlJMWlJMSA9IGlpMWlJMWlJMSAuIHJlcGxhY2UgKCAncGVybWxpdmUnICwgJ2ZsaXZlJyApCiByZXR1cm4gaWkxaUkxaUkxCiBpZiAyOSAtIDI5OiBJMWlpMTFpSWkxMWkgJSBPb29vb29vb09PICogaUkxSWkxMTExMWlJaSAvIG9PME9vb09vTyAtIGlJMUlpMTExMTFpSWkKIGlmIDE5IC0gMTk6IGkxMWlJaWlJaWkKZGVmIG9vMCAoIHN0cl9ldmFsICkgOgogb09PID0gIiIKIHRyeSA6CiAgSUkxaTExaTFpSWkxMSA9ICJ3LGkscyxlPSgiICsgc3RyX2V2YWwgKyAnKScKICBleGVjICggSUkxaTExaTFpSWkxMSApCiAgb09PID0gb28wTzBvTzBPME8gKCB3ICwgaSAsIHMgLCBlICkKIGV4Y2VwdCA6IHRyYWNlYmFjayAuIHByaW50X2V4YyAoIGZpbGUgPSBzeXMgLiBzdGRvdXQgKQogaWYgNjkgLSA2OTogaUkxSWkxMTExMWlJaSAvIGkxMWlJaWlJaWkKIHJldHVybiBvT08KIGlmIDk0IC0gOTQ6IGlJMUlpMTExMTFpSWkgLyBPb28wIC8gaTFJSWkgKiBpSWlpMUkxMUkxSUkxCmRlZiBvbzBPMG9PME8wTyAoIHcgLCBpICwgcyAsIGUgKSA6CiBvb28wID0gMCA7CiBpSUlJaWlpSTExSSA9IDAgOwogSTFpaTExMTFJaSA9IDAgOwogbzBPID0gWyBdIDsKIGlpaUkxaTExSWkgPSBbIF0gOwogd2hpbGUgVHJ1ZSA6CiAgaWYgKCBvb28wIDwgNSApIDoKICAgaWlpSTFpMTFJaSAuIGFwcGVuZCAoIHcgWyBvb28wIF0gKQogIGVsaWYgKCBvb28wIDwgbGVuICggdyApICkgOgogICBvME8gLiBhcHBlbmQgKCB3IFsgb29vMCBdICkgOwogIG9vbzAgKz0gMSA7CiAgaWYgKCBpSUlJaWlpSTExSSA8IDUgKSA6CiAgIGlpaUkxaTExSWkgLiBhcHBlbmQgKCBpIFsgaUlJSWlpaUkxMUkgXSApCiAgZWxpZiAoIGlJSUlpaWlJMTFJIDwgbGVuICggaSApICkgOgogICBvME8gLiBhcHBlbmQgKCBpIFsgaUlJSWlpaUkxMUkgXSApCiAgaUlJSWlpaUkxMUkgKz0gMSA7CiAgaWYgKCBJMWlpMTExMUlpIDwgNSApIDoKICAgaWlpSTFpMTFJaSAuIGFwcGVuZCAoIHMgWyBJMWlpMTExMUlpIF0gKQogIGVsaWYgKCBJMWlpMTExMUlpIDwgbGVuICggcyApICkgOgogICBvME8gLiBhcHBlbmQgKCBzIFsgSTFpaTExMTFJaSBdICkgOwogIEkxaWkxMTExSWkgKz0gMSA7CiAgaWYgKCBsZW4gKCB3ICkgKyBsZW4gKCBpICkgKyBsZW4gKCBzICkgKyBsZW4gKCBlICkgPT0gbGVuICggbzBPICkgKyBsZW4gKCBpaWlJMWkxMUlpICkgKyBsZW4gKCBlICkgKSA6CiAgIGJyZWFrIDsKICAgaWYgMTYgLSAxNjogb09vME8wT29vIC8gaTExaUlpaUlpaQogb28wMElJSUlJSUlpSSA9ICcnIC4gam9pbiAoIG8wTyApCiBJMUlJaUkgPSAnJyAuIGpvaW4gKCBpaWlJMWkxMUlpICkKIGlJSUlpaWlJMTFJID0gMCA7CiBPMG9PT28wbyA9IFsgXSA7CiBmb3Igb29vMCBpbiByYW5nZSAoIDAgLCBsZW4gKCBvME8gKSAsIDIgKSA6CiAgaWYgNTAgLSA1MDogb29PME9vb28wMCAuIG9PMG9vTyAuIEkxaWkxMWlJaTExaSAqIG9PMG8wb29PMCArIG9PME9vb09vTyAlIGkxMWlJaWlJaWkKICBpMWkxSWlJaUlpMUlpID0gLSAxIDsKICBpZiAoIG9yZCAoIEkxSUlpSSBbIGlJSUlpaWlJMTFJIF0gKSAlIDIgKSA6CiAgIGkxaTFJaUlpSWkxSWkgPSAxIDsKICAgaWYgNjQgLSA2NDogaWkxSUkxMUkxaWkxSSArIE9vb29vb29vT08gKiBPb29vb29vb09PCiAgTzBvT09vMG8gLiBhcHBlbmQgKCBjaHIgKCBpbnQgKCBvbzAwSUlJSUlJSWlJIFsgb29vMCA6IG9vbzAgKyAyIF0gLCAzNiApIC0gaTFpMUlpSWlJaTFJaSApICkgOwogIGlJSUlpaWlJMTFJICs9IDEgOwogIGlmICggaUlJSWlpaUkxMUkgPj0gbGVuICggaWlpSTFpMTFJaSApICkgOgogICBpSUlJaWlpSTExSSA9IDAgOwogTzBPMG9vT09PID0gJycgLiBqb2luICggTzBvT09vMG8gKQogaWYgJ2V2YWwoZnVuY3Rpb24odyxpLHMsZSknIGluIE8wTzBvb09PTyA6CiAgcHJpbnQgJ1NUSUxMIEdPaW5nJwogIE8wTzBvb09PTyA9IHJlIC4gY29tcGlsZSAoICdldmFsXChmdW5jdGlvblwodyxpLHMsZVwpLip9XCgoLio/KVwpJyApIC4gZmluZGFsbCAoIE8wTzBvb09PTyApIFsgMCBdCiAgcmV0dXJuIG9vMCAoIE8wTzBvb09PTyApCiBlbHNlIDoKICBwcmludCAnRklOSVNIRUQnCiAgcmV0dXJuIE8wTzBvb09PTwogIGlmIDQxIC0gNDE6IG9vb08gLiBvT28wTzBPb28gKyBvME9vCmRlZiBpMUkxMWlJaUlJICggcGFnZV92YWx1ZSAsIHJlZ2V4X2Zvcl90ZXh0ID0gJycgLCBpdGVyYXRpb25zID0gMSAsIHRvdGFsX2l0ZXJhdGlvbiA9IDEgKSA6CiB0cnkgOgogIG8wTzBPTyA9IE5vbmUKICBpZiBwYWdlX3ZhbHVlIC4gc3RhcnRzd2l0aCAoICJodHRwIiApIDoKICAgcGFnZV92YWx1ZSA9IGkxaTExSTFJMWlpaTEgKCBwYWdlX3ZhbHVlICkKICBwcmludCAncGFnZV92YWx1ZScgLCBwYWdlX3ZhbHVlCiAgaWYgcmVnZXhfZm9yX3RleHQgYW5kIGxlbiAoIHJlZ2V4X2Zvcl90ZXh0ICkgPiAwIDoKICAgcGFnZV92YWx1ZSA9IHJlIC4gY29tcGlsZSAoIHJlZ2V4X2Zvcl90ZXh0ICkgLiBmaW5kYWxsICggcGFnZV92YWx1ZSApIFsgMCBdCiAgIGlmIDIyIC0gMjI6IG9PME9vb09vTyAqIEkxaWkxMWlJaTExaSAqIG9PMG8wb29PMCArIG9PMG9vTyAqIGlpMTFpaTFpaQogIHBhZ2VfdmFsdWUgPSBvbzBvMCAoIHBhZ2VfdmFsdWUgLCBpdGVyYXRpb25zICwgdG90YWxfaXRlcmF0aW9uICkKIGV4Y2VwdCA6IHRyYWNlYmFjayAuIHByaW50X2V4YyAoIGZpbGUgPSBzeXMgLiBzdGRvdXQgKQogcHJpbnQgJ3VucGFja2VkJyAsIHBhZ2VfdmFsdWUKIGlmICdzYXYxbGl2ZS50dicgaW4gcGFnZV92YWx1ZSA6CiAgcGFnZV92YWx1ZSA9IHBhZ2VfdmFsdWUgLiByZXBsYWNlICggJ3NhdjFsaXZlLnR2JyAsICdzYXdsaXZlLnR2JyApCiAgcHJpbnQgJ3NhdjEgdW5wYWNrZWQnICwgcGFnZV92YWx1ZQogcmV0dXJuIHBhZ2VfdmFsdWUKIGlmIDY5IC0gNjk6IG9PMG9vTyAtIE8wME9vT29vMDAKZGVmIG9vMG8wICggc0phdmFzY3JpcHQgLCBpdGVyYXRpb24gPSAxICwgdG90YWxpdGVyYXRpb25zID0gMiApIDoKIHByaW50ICdpdGVyYXRpb24nICwgaXRlcmF0aW9uCiBpZiBzSmF2YXNjcmlwdCAuIHN0YXJ0c3dpdGggKCAndmFyIF8weGNiOGE9JyApIDoKICBpaUlJaTEgPSBzSmF2YXNjcmlwdCAuIHNwbGl0ICggJ3ZhciBfMHhjYjhhPScgKQogIElJMWkxMWkxaUlpMTEgPSAibXlhcnJheT0iICsgaWlJSWkxIFsgMSBdIC4gc3BsaXQgKCAiZXZhbCgiICkgWyAwIF0KICBleGVjICggSUkxaTExaTFpSWkxMSApCiAgaTExMWkxMUkxSWkxSSA9IDYyCiAgaUkxSTExaUlJaTEgPSBpbnQgKCBpaUlJaTEgWyAxIF0gLiBzcGxpdCAoICIsNjIsIiApIFsgMSBdIC4gc3BsaXQgKCAnLCcgKSBbIDAgXSApCiAgaUkgPSBteWFycmF5IFsgMCBdCiAgSWkxSUlpaUlpaUlpID0gbXlhcnJheSBbIDMgXQogIHdpdGggb3BlbiAoICd0ZW1wIGZpbGUnICsgc3RyICggaXRlcmF0aW9uICkgKyAnLmpzJyAsICJ3YiIgKSBhcyBpMWlpSUlJaSA6CiAgIGkxaWlJSUlpIC4gd3JpdGUgKCBzdHIgKCBJaTFJSWlpSWlpSWkgKSApCiAgIGlmIDYyIC0gNjI6IE8wIC8gbzBPbyAlIE8wICogSTFpaTExaUlpMTFpICUgbzBPbwogZWxzZSA6CiAgaWYgMzMgLSAzMzogbzBPbyAuIGlJMUlpMTExMTFpSWkgKiBJMWlpMTFpSWkxMWkgKiBpSWlpMUkxMUkxSUkxCiAgaWlJSWkxID0gc0phdmFzY3JpcHQgLiBzcGxpdCAoICJybiBwfSgnIiApCiAgcHJpbnQgaWlJSWkxCiAgaWYgNSAtIDU6IG9PbzBPME9vbyAvIE9vbzAgJSBPMCAuIE8wME9vT29vMDAgKiBPb28wCiAgaUkgLCBpMTExaTExSTFJaTFJICwgaUkxSTExaUlJaTEgLCBJaTFJSWlpSWlpSWkgPSAoICcnICwgJzAnICwgJzAnICwgJycgKQogIGlmIDgzIC0gODM6IGlpMUlJMTFJMWlpMUkKICBJSTFpMTFpMWlJaTExID0gInAxLGExLGMxLGsxPSgnIiArIGlpSUlpMSBbIDEgXSAuIHNwbGl0ICggIi5zcGxpIiApIFsgMCBdICsgJyknCiAgZXhlYyAoIElJMWkxMWkxaUlpMTEgKQogSWkxSUlpaUlpaUlpID0gSWkxSUlpaUlpaUlpIC4gc3BsaXQgKCAnfCcgKQogaWlJSWkxID0gaWlJSWkxIFsgMSBdIC4gc3BsaXQgKCAiKSknIiApCiBpZiAxMiAtIDEyOiBpMUlJaSAuIGkxSUlpIC0gaWkxMWlpMWlpCiBpZiAyNiAtIDI2OiBpSWlpMUkxMUkxSUkxICUgaTExaUlpaUlpaSAlIG9PMG9vTwogaWYgNjcgLSA2NzogT29vb29vb29PTwogaWYgMjkgLSAyOTogTzAgLSBpMTFpSWlpSWlpIC0gb08wT29vT29PICsgaWkxSUkxMUkxaWkxSSAqIE9vbzAKIGlmIDIgLSAyOiBpMUlJaSAtIG9vb08gKyBvME9vIC4gaWkxMWlpMWlpICogaWkxMWlpMWlpIC8gT09vb09PbwogaWYgOTMgLSA5MzogaTFJSWkKIGlmIDUzIC0gNTM6IE9vb29vb29vT08gKyBvT28wTzBPb28gKyBpSTFJaTExMTExaUlpCiBpZiAyNCAtIDI0OiBvb08wT29vbzAwIC0gT29vMCAtIG9vTzBPb29vMDAgKiBvTzBvb08gLiBPb29vb29vb09PIC8gT29vMAogaWYgNjYgLSA2Njogb09vME8wT29vCiBpZiA5NyAtIDk3OiBpMUlJaSAtIE9vb29vb29vT08gLyBPMDBPb09vbzAwICogbzBPbwogaWYgNTUgLSA1NTogaWkxMWlpMWlpIC4gb29PME9vb28wMAogaWYgODcgLSA4NzogaWkxMWlpMWlpICUgaUlpaTFJMTFJMUlJMQogaWYgMTAwIC0gMTAwOiBPMDBPb09vbzAwIC4gbzBPbyAqIE8wME9vT29vMDAgLSBvME9vIC4gb08wbzBvb08wICogaWlJSUlJSTFpMWlJCiBpZiA4OSAtIDg5OiBJMWlpMTFpSWkxMWkgKyBPb28wICogTzAwT29Pb28wMAogaWYgMjggLSAyODogT29vb29vb29PTyAuIGlJMUlpMTExMTFpSWkgJSBvTzBvb08gLyBpMUlJaSAvIGlpMUlJMTFJMWlpMUkKIGlmIDM2IC0gMzY6IGlpMTFpaTFpaSArIG9PMG8wb29PMCAtIE9vbzAgKyBpSWlpMUkxMUkxSUkxICsgT29vb29vb29PTwogaWYgNCAtIDQ6IG9PME9vb09vTyAuIG9PMG8wb29PMCArIGlpSUlJSUkxaTFpSSAqIE8wME9vT29vMDAgLiBvb29PCiBpZiA4NyAtIDg3OiBPT29vT09vIC8gSTFpaTExaUlpMTFpIC8gaTExaUlpaUlpaQogaWYgNzQgLSA3NDogaUkxSWkxMTExMWlJaSAvIG9PMG9vTyAlIGlpMTFpaTFpaQogaWYgODggLSA4ODogT09vb09PbyAtIGkxMWlJaWlJaWkgJSBpaTExaWkxaWkgKiBvTzBvMG9vTzAgKyBvTzBvb08KIGlmIDUyIC0gNTI6IG9PME9vb09vTyAuIG8wT28gKyBPT29vT09vICUgSTFpaTExaUlpMTFpCiBpZiA2MiAtIDYyOiBpaTExaWkxaWkKIElJID0gJycKIG9PbzAwT29vTzBvTyA9ICcnCiBpZiAxNSAtIDE1OiBvTzBvMG9vTzAgKyBpaUlJSUlJMWkxaUkgLiBpaTFJSTExSTFpaTFJICogSTFpaTExaUlpMTFpIC4gT09vb09PbwogaWYgMTggLSAxODogaTFJSWkgJSBvTzBPb29Pb08gKyBPMDBPb09vbzAwICUgaWlJSUlJSTFpMWlJCiBvT09vTzBPTzAwT09vMCA9IHN0ciAoIElpMUlJaWkgKCBpSSAsIGkxMTFpMTFJMUlpMUkgLCBpSTFJMTFpSUlpMSAsIElpMUlJaWlJaWlJaSAsIElJICwgb09vMDBPb29PMG9PICwgaXRlcmF0aW9uICkgKQogaWYgMjEgLSAyMTogT09vb09PbyAvIGlpMTFpaTFpaSAqIE9vbzAgLiBpMUlJaQogaWYgNTkgLSA1OTogTzAgKyBpMUlJaSAtIGlpMTFpaTFpaQogaWYgNjIgLSA2MjogaTExaUlpaUlpaSAlIGlpMUlJMTFJMWlpMUkgLiBPb28wIC4gaWkxSUkxMUkxaWkxSQogaWYgODQgLSA4NDogaTExaUlpaUlpaSAqIEkxaWkxMWlJaTExaQogaWYgMTggLSAxODogaWkxSUkxMUkxaWkxSSAtIGlpSUlJSUkxaTFpSSAtIE9Pb29PT28gLyBPMDBPb09vbzAwIC0gTzAKIGlmIGl0ZXJhdGlvbiA+PSB0b3RhbGl0ZXJhdGlvbnMgOgogIGlmIDMwIC0gMzA6IE8wICsgb08wb29PICsgb08wT29vT29PCiAgcmV0dXJuIG9PT29PME9PMDBPT28wCiBlbHNlIDoKICBpZiAxNCAtIDE0OiBpaTExaWkxaWkgLyBpaTFJSTExSTFpaTFJIC0gaUlpaTFJMTFJMUlJMSAtIGlJMUlpMTExMTFpSWkgJSBvb29PCiAgcmV0dXJuIG9vMG8wICggb09Pb08wT08wME9PbzAgLCBpdGVyYXRpb24gKyAxICkKICBpZiA0OSAtIDQ5OiBvb29PICogaUkxSWkxMTExMWlJaSAvIGlpMTFpaTFpaSAvIG9PbzBPME9vbyAqIGlJaWkxSTExSTFJSTEKZGVmIElpMUlJaWkgKCBwICwgYSAsIGMgLCBrICwgZSAsIGQgLCBpdGVyYXRpb24gLCB2ID0gMSApIDoKIGlmIDU3IC0gNTc6IE9Pb29PT28gLSBpSTFJaTExMTExaUlpIC8gb29vTyAlIGkxMWlJaWlJaWkKIGlmIDMgLSAzOiBvb08wT29vbzAwIC4gb29vTyAlIG8wT28gKyBvTzBvb08KIGlmIDY0IC0gNjQ6IGkxSUlpCiB3aGlsZSAoIGMgPj0gMSApIDoKICBjID0gYyAtIDEKICBpZiAoIGsgWyBjIF0gKSA6CiAgIElJaWkxID0gc3RyICggSWlpaUkxMTFJICggYyAsIGEgKSApCiAgIGlmIHYgPT0gMSA6CiAgICBwID0gcmUgLiBzdWIgKCAnXFxiJyArIElJaWkxICsgJ1xcYicgLCBrIFsgYyBdICwgcCApCiAgIGVsc2UgOgogICAgcCA9IElJSTFJMTFpMWlJaSAoIHAgLCBJSWlpMSAsIGsgWyBjIF0gKQogICAgaWYgNjkgLSA2OTogb09vME8wT29vICogb08wT29vT29PICogb29vTyAuIG9vTzBPb29vMDAgLSBvTzBvb08KICAgIGlmIDM5IC0gMzk6IGlpSUlJSUkxaTFpSSAqIG8wT28gJSBJMWlpMTFpSWkxMWkgLiBPT29vT09vCiAgICBpZiAyNCAtIDI0OiBpMUlJaSAqIGlJaWkxSTExSTFJSTEgLyBpaUlJSUlJMWkxaUkKICAgIGlmIDc4IC0gNzg6IGkxMWlJaWlJaWkgKyBpaTExaWkxaWkgKyBPMDBPb09vbzAwIC8gaWkxMWlpMWlpICUgaUlpaTFJMTFJMUlJMSAlIE9vbzAKICAgIGlmIDgzIC0gODM6IGlJaWkxSTExSTFJSTEgJSBPT29vT09vICUgaWkxMWlpMWlpICUgTzAwT29Pb28wMCAuIG9PMG9vTyAlIE8wCiAgICBpZiA0NyAtIDQ3OiBpaTExaWkxaWkKIHJldHVybiBwCiBpZiA2NiAtIDY2OiBvME9vIC0gT29vMAogaWYgMzMgLSAzMzogbzBPbyAvIEkxaWkxMWlJaTExaQogaWYgMTIgLSAxMjogb08wT29vT29PCmRlZiBJSUkxSTExaTFpSWkgKCBzb3VyY2Vfc3RyICwgd29yZF90b19maW5kICwgcmVwbGFjZV93aXRoICkgOgogSWlJaWkxaWkgPSBOb25lCiBJaUlpaTFpaSA9IHNvdXJjZV9zdHIgLiBzcGxpdCAoIHdvcmRfdG9fZmluZCApCiBpZiBsZW4gKCBJaUlpaTFpaSApID4gMSA6CiAgSUlpSTFpID0gWyBdCiAgaUlJMSA9IDAKICBmb3IgTzAwME8gaW4gSWlJaWkxaWkgOgogICBpZiA5OCAtIDk4OiBpSWlpMUkxMUkxSUkxICsgTzAwT29Pb28wMCAlIE9Pb29PT28gKyBvTzBvMG9vTzAgJSBPT29vT09vCiAgIElJaUkxaSAuIGFwcGVuZCAoIE8wMDBPICkKICAgSWlJMWlJSTFJSTExMSA9IHdvcmRfdG9fZmluZAogICBpZiAyNCAtIDI0OiBpSTFJaTExMTExaUlpICogTzAwT29Pb28wMAogICBpZiA0MCAtIDQwOiBpaUlJSUlJMWkxaUkgLSBPT29vT09vICogT09vb09PbyAuIE9Pb29PT28gKyBPb29vb29vb09PCiAgIGlmIGlJSTEgPT0gbGVuICggSWlJaWkxaWkgKSAtIDEgOgogICAgSWlJMWlJSTFJSTExMSA9ICcnCiAgIGVsc2UgOgogICAgaWYgbGVuICggTzAwME8gKSA9PSAwIDoKICAgICBpZiAoIGxlbiAoIElpSWlpMWlpIFsgaUlJMSArIDEgXSApID09IDAgYW5kIHdvcmRfdG9fZmluZCBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgb3IgKCBsZW4gKCBJaUlpaTFpaSBbIGlJSTEgKyAxIF0gKSA+IDAgYW5kIElpSWlpMWlpIFsgaUlJMSArIDEgXSBbIDAgXSAuIGxvd2VyICggKSBub3QgaW4gJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MTIzNDU2Nzg5MF8nICkgOgogICAgICBJaUkxaUlJMUlJMTExID0gcmVwbGFjZV93aXRoCiAgICAgIGlmIDc3IC0gNzc6IGlJaWkxSTExSTFJSTEgLiBpaUlJSUlJMWkxaUkgJSBpSTFJaTExMTExaUlpIC8gaWlJSUlJSTFpMWlJCiAgICBlbHNlIDoKICAgICBpZiAoIElpSWlpMWlpIFsgaUlJMSBdIFsgLSAxIF0gLiBsb3dlciAoICkgbm90IGluICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejEyMzQ1Njc4OTBfJyApIGFuZCAoICggbGVuICggSWlJaWkxaWkgWyBpSUkxICsgMSBdICkgPT0gMCBhbmQgd29yZF90b19maW5kIFsgMCBdIC4gbG93ZXIgKCApIG5vdCBpbiAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoxMjM0NTY3ODkwXycgKSBvciAoIGxlbiAoIElpSWlpMWlpIFsgaUlJMSArIDEgXSApID4gMCBhbmQgSWlJaWkxaWkgWyBpSUkxICsgMSBdIFsgMCBdIC4gbG93ZXIgKCApIG5vdCBpbiAnYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoxMjM0NTY3ODkwXycgKSApIDoKICAgICAgSWlJMWlJSTFJSTExMSA9IHJlcGxhY2Vfd2l0aAogICAgICBpZiA1NCAtIDU0OiBpSTFJaTExMTExaUlpICsgb29vTyAtIG9PbzBPME9vbwogICBJSWlJMWkgLiBhcHBlbmQgKCBJaUkxaUlJMUlJMTExICkKICAgaUlJMSArPSAxCiAgIGlmIDM1IC0gMzU6IGlpSUlJSUkxaTFpSSAtIGlpSUlJSUkxaTFpSSArIGkxSUlpIC0gTzAgLSBPMDBPb09vbzAwCiAgc291cmNlX3N0ciA9ICcnIC4gam9pbiAoIElJaUkxaSApCiByZXR1cm4gc291cmNlX3N0cgogaWYgNTggLSA1ODogT09vb09PbyAtIG9vTzBPb29vMDAgLSBPb29vb29vb09PCmRlZiBvMDBpaTExMUlpaWkgKCBudW0gLCByYWRpeCApIDoKIGlmIDU0IC0gNTQ6IE9vb29vb29vT08gLSBvME9vICUgb08wb29PCiBvb28wME9vbyA9ICIiCiBpZiBudW0gPT0gMCA6IHJldHVybiAnMCcKIHdoaWxlIG51bSA+IDAgOgogIG9vbzAwT29vID0gIjAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eiIgWyBudW0gJSByYWRpeCBdICsgb29vMDBPb28KICBudW0gLz0gcmFkaXgKIHJldHVybiBvb28wME9vbwogaWYgOTIgLSA5MjogSTFpaTExaUlpMTFpICogb29vTwpkZWYgSWlpaUkxMTFJICggY2MgLCBhICkgOgogSUlpaTEgPSAiIiBpZiBjYyA8IGEgZWxzZSBJaWlpSTExMUkgKCBpbnQgKCBjYyAvIGEgKSAsIGEgKQogY2MgPSAoIGNjICUgYSApCiBpMWlJSWkxID0gY2hyICggY2MgKyAyOSApIGlmIGNjID4gMzUgZWxzZSBzdHIgKCBvMDBpaTExMUlpaWkgKCBjYyAsIDM2ICkgKQogcmV0dXJuIElJaWkxICsgaTFpSUlpMQogaWYgODMgLSA4MzogT29vMCAqIG9PMG8wb29PMCAvIG9PbzBPME9vbwogaWYgMzIgLSAzMjogaWkxMWlpMWlpICsgT09vb09PbyAtIE9vb29vb29vT08KZGVmIE9PTzBvb28gKCBjb29raWVKYXIgKSA6CiB0cnkgOgogIElpMTFpaWkxSUkxaSA9ICIiCiAgZm9yIEkxaWkxSWkxICwgbzBPT29PTyBpbiBlbnVtZXJhdGUgKCBjb29raWVKYXIgKSA6CiAgIElpMTFpaWkxSUkxaSArPSBvME9Pb09PIC4gbmFtZSArICI9IiArIG8wT09vT08gLiB2YWx1ZSArICI7IgogZXhjZXB0IDogcGFzcwogaWYgNDYgLSA0NjogaUkxSWkxMTExMWlJaSAvIG9vTzBPb29vMDAgLSBpMUlJaQogcmV0dXJuIElpMTFpaWkxSUkxaQogaWYgNTEgLSA1MTogb09vME8wT29vIC0gb08wb29PICogb08wbzBvb08wCiBpZiAxMiAtIDEyOiBpSWlpMUkxMUkxSUkxICUgb29vTyAlIG9vb08KZGVmIElpaSAoIGNvb2tpZUphciAsIENPT0tJRUZJTEUgKSA6CiB0cnkgOgogIGlpSWkxSUlpSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCBDT09LSUVGSUxFICkKICBjb29raWVKYXIgLiBzYXZlICggaWlJaTFJSWlJICwgaWdub3JlX2Rpc2NhcmQgPSBUcnVlICkKIGV4Y2VwdCA6IHBhc3MKIGlmIDc4IC0gNzg6IE9vbzAgLiBPT29vT09vIC4gb08wbzBvb08wCmRlZiBvMGlpaUkxSTFpSUlJaTEgKCBDT09LSUVGSUxFICkgOgogaWYgOTcgLSA5NzogaUkxSWkxMTExMWlJaQogb09vTzBPMDBvbyA9IE5vbmUKIGlmIENPT0tJRUZJTEUgOgogIHRyeSA6CiAgIGlpSWkxSUlpSSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCBDT09LSUVGSUxFICkKICAgb09vTzBPMDBvbyA9IGNvb2tpZWxpYiAuIExXUENvb2tpZUphciAoICkKICAgb09vTzBPMDBvbyAuIGxvYWQgKCBpaUlpMUlJaUkgLCBpZ25vcmVfZGlzY2FyZCA9IFRydWUgKQogIGV4Y2VwdCA6CiAgIG9Pb08wTzAwb28gPSBOb25lCiAgIGlmIDkzIC0gOTM6IG9PMG9vTyAlIE9Pb29PT28gLiBPMCAvIG9vTzBPb29vMDAgKiBpSTFJaTExMTExaUlpCiBpZiBub3Qgb09vTzBPMDBvbyA6CiAgb09vTzBPMDBvbyA9IGNvb2tpZWxpYiAuIExXUENvb2tpZUphciAoICkKICBpZiAyOSAtIDI5OiBpaTExaWkxaWkKIHJldHVybiBvT29PME8wMG9vCiBpZiA4NiAtIDg2OiBvTzBPb29Pb08gLiBPb28wCmRlZiBJSWlJMTFpMTExMUlpICggZnVuX2NhbGwgLCBwYWdlX2RhdGEgLCBDb29raWVfSmFyICkgOgogaUlpSSA9ICcnCiBpZiBvbzBvb08wb09PT09vIG5vdCBpbiBzeXMgLiBwYXRoIDoKICBzeXMgLiBwYXRoIC4gYXBwZW5kICggb28wb29PMG9PT09PbyApCiAgaWYgODEgLSA4MTogT09vb09PbyAlIGlpSUlJSUkxaTFpSQogcHJpbnQgZnVuX2NhbGwKIHRyeSA6CiAgb28waTFpSUlpMUlJMWlpSSA9ICdpbXBvcnQgJyArIGZ1bl9jYWxsIC4gc3BsaXQgKCAnLicgKSBbIDAgXQogIHByaW50IG9vMGkxaUlJaTFJSTFpaUkgLCBzeXMgLiBwYXRoCiAgZXhlYyAoIG9vMGkxaUlJaTFJSTFpaUkgKQogIHByaW50ICdkb25lJwogZXhjZXB0IDoKICBwcmludCAnZXJyb3IgaW4gaW1wb3J0JwogIHRyYWNlYmFjayAuIHByaW50X2V4YyAoIGZpbGUgPSBzeXMgLiBzdGRvdXQgKQogcHJpbnQgJ3JldF92YWw9JyArIGZ1bl9jYWxsCiBleGVjICggJ3JldF92YWw9JyArIGZ1bl9jYWxsICkKIHByaW50IGlJaUkKIGlmIDMxIC0gMzE6IGlpMTFpaTFpaSAlIG9PMG8wb29PMCArIGlJaWkxSTExSTFJSTEgKyBpMTFpSWlpSWlpICogTzAwT29Pb28wMAogcmV0dXJuIHN0ciAoIGlJaUkgKQogaWYgNDUgLSA0NTogaWkxSUkxMUkxaWkxSSAqIE8wME9vT29vMDAgLiBvb29PIC0gTzAwT29Pb28wMCArIE9vbzAKZGVmIGlpSTExSTFpMWkxaUkgKCB1cmwgKSA6CiBpSUkgPSBpMWkxMUkxSTFpaWkxICggdXJsICkKIE9Pb08wb08wMG8gPSAiIgogaWlpaWlpMSA9ICIiCiBPTzBvMG9PME8wMDBvID0gIjxzY3JpcHQuKj9zcmM9XCIoLio/cmVjYXAuKj8pXCIiCiBpMTExMTFJSUlJSSA9IHJlIC4gZmluZGFsbCAoIE9PMG8wb08wTzAwMG8gLCBpSUkgKQogSTFpSTExaWlpID0gRmFsc2UKIG9vMG9PID0gTm9uZQogaWlpaWlpMSA9IE5vbmUKIGlmIDUwIC0gNTA6IE9vb29vb29vT08gLSBpSWlpMUkxMUkxSUkxICsgaTFJSWkgJSBPMDBPb09vbzAwIC0gaUlpaTFJMTFJMUlJMSAlIE8wCiBpZiBpMTExMTFJSUlJSSBhbmQgbGVuICggaTExMTExSUlJSUkgKSA+IDAgOgogIG8wb08wT28gPSBpMTExMTFJSUlJSSBbIDAgXQogIEkxaUkxMWlpaSA9IFRydWUKICBpZiA3MSAtIDcxOiBpaTExaWkxaWkgLSBPT29vT09vICogb29PME9vb28wMCArIGlpSUlJSUkxaTFpSSAlIGkxMWlJaWlJaWkgLSBvb29PCiAgbzBPME9PMG8gPSAnY2hhbGxlbmdlLio/XCcoLio/KVwnJwogIE9PT29Pb09Pb08wb28wTyA9ICdcJyguKj8pXCcnCiAgaWlJMUkxaWkgPSBpMWkxMUkxSTFpaWkxICggbzBvTzBPbyApCiAgT09vTzBvTzAwbyA9IHJlIC4gZmluZGFsbCAoIG8wTzBPTzBvICwgaWlJMUkxaWkgKSBbIDAgXQogIG8wMElpSTFpaUlJMWkxaSA9ICdodHRwOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2FwaS9yZWxvYWQ/Yz0nIDsKICBpMUlpSSA9IG8wb08wT28gLiBzcGxpdCAoICdrPScgKSBbIDEgXQogIG8wMElpSTFpaUlJMWkxaSArPSBPT29PMG9PMDBvICsgJyZrPScgKyBpMUlpSSArICcmY2FwdGNoYV9rPTEmdHlwZT1pbWFnZSZsYW5nPWVuLUdCJwogIG8wbzBPMDAgPSBpMWkxMUkxSTFpaWkxICggbzAwSWlJMWlpSUkxaTFpICkKICBvbzBvTyA9IHJlIC4gZmluZGFsbCAoIE9PT29Pb09Pb08wb28wTyAsIG8wbzBPMDAgKSBbIDAgXQogIG9PbzAwME9Pb29PME8gPSAnaHR0cDovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvaW1hZ2U/Yz0nICsgb28wb08KICBpZiBub3Qgb09vMDAwT09vb08wTyAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgIG9PbzAwME9Pb29PME8gPSAnaHR0cDovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkvJyArIG9PbzAwME9Pb29PME8KICBpbXBvcnQgcmFuZG9tCiAgb09vb28wTzBvID0gcmFuZG9tIC4gcmFuZHJhbmdlICggMTAwICwgMTAwMCAsIDUgKQogIElpID0gb3MgLiBwYXRoIC4gam9pbiAoIG8wMCAsIHN0ciAoIG9Pb29vME8wbyApICsgImNhcHRjaGEuaW1nIiApCiAgT29Pb29vTzBPMDAgPSBvcGVuICggSWkgLCAid2IiICkKICBPb09vb29PME8wMCAuIHdyaXRlICggaTFpMTFJMUkxaWlpMSAoIG9PbzAwME9Pb29PME8gKSApCiAgT29Pb29vTzBPMDAgLiBjbG9zZSAoICkKICBvT08wT29vTzAgPSBPb29vT28gKCBjYXB0Y2hhID0gSWkgKQogIGlpaWlpaTEgPSBvT08wT29vTzAgLiBnZXQgKCApCiAgb3MgLiByZW1vdmUgKCBJaSApCiByZXR1cm4gb28wb08gLCBpaWlpaWkxCiBpZiAzNyAtIDM3OiBpMUlJaSAtIGlpMUlJMTFJMWlpMUkgJSBPb29vb29vb09PIC8gaWkxSUkxMUkxaWkxSSAlIG9vb08KZGVmIGkxaTExSTFJMWlpaTEgKCB1cmwgLCBjb29raWVKYXIgPSBOb25lICwgcG9zdCA9IE5vbmUgLCB0aW1lb3V0ID0gMjAgLCBoZWFkZXJzID0gTm9uZSApIDoKIGlmIDQ4IC0gNDg6IGkxMWlJaWlJaWkgJSBpSTFJaTExMTExaUlpCiBpZiAyOSAtIDI5OiBvb08wT29vbzAwICsgaTExaUlpaUlpaSAlIG9PMG8wb29PMAogb09vT09vMG9vMCA9IHVybGxpYjIgLiBIVFRQQ29va2llUHJvY2Vzc29yICggY29va2llSmFyICkKIG8wTzBPbzAwT28wbyA9IHVybGxpYjIgLiBidWlsZF9vcGVuZXIgKCBvT29PT28wb28wICwgdXJsbGliMiAuIEhUVFBCYXNpY0F1dGhIYW5kbGVyICggKSAsIHVybGxpYjIgLiBIVFRQSGFuZGxlciAoICkgKQogaWYgOTMgLSA5MzogT09vb09PbyAlIGlJaWkxSTExSTFJSTEKIGkxSTExMUkgPSB1cmxsaWIyIC4gUmVxdWVzdCAoIHVybCApCiBpMUkxMTFJIC4gYWRkX2hlYWRlciAoICdVc2VyLUFnZW50JyAsICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjE7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMzMuMC4xNzUwLjE1NCBTYWZhcmkvNTM3LjM2JyApCiBpZiBoZWFkZXJzIDoKICBmb3IgT29vT09PT29PMDBPb09PICwgT29vMG8wb28wIGluIGhlYWRlcnMgOgogICBpMUkxMTFJIC4gYWRkX2hlYWRlciAoIE9vb09PT09vTzAwT29PTyAsIE9vbzBvMG9vMCApCiAgIGlmIDg3IC0gODc6IE9Pb29PT28gLyBPb28wICsgaUlpaTFJMTFJMUlJMQogaTExSTFJSWlpSWkgPSBvME8wT28wME9vMG8gLiBvcGVuICggaTFJMTExSSAsIHBvc3QgLCB0aW1lb3V0ID0gdGltZW91dCApCiBpMWkxaTFJID0gaTExSTFJSWlpSWkgLiByZWFkICggKQogaTExSTFJSWlpSWkgLiBjbG9zZSAoICkKIHJldHVybiBpMWkxaTFJIDsKIGlmIDkzIC0gOTM6IGlJaWkxSTExSTFJSTEgKyBpSTFJaTExMTExaUlpICUgb29vTwpkZWYgaWlpMUlpSTFJMSAoIHN0ciAsIHJlZyA9IE5vbmUgKSA6CiBpZiByZWcgOgogIHN0ciA9IHJlIC4gZmluZGFsbCAoIHJlZyAsIHN0ciApIFsgMCBdCiBPMDBvID0gdXJsbGliIC4gdW5xdW90ZSAoIHN0ciBbIDAgOiBsZW4gKCBzdHIgKSAtIDEgXSApIDsKIG9PMG8wMG9vTzBPb08gPSAnJyA7CiBmb3IgSTFpMWlpaSBpbiByYW5nZSAoIGxlbiAoIE8wMG8gKSApIDoKICBvTzBvMDBvb08wT29PICs9IGNociAoIG9yZCAoIE8wMG8gWyBJMWkxaWlpIF0gKSAtIE8wMG8gWyBsZW4gKCBPMDBvICkgLSAxIF0gKSA7CiBvTzBvMDBvb08wT29PID0gdXJsbGliIC4gdW5xdW90ZSAoIG9PMG8wMG9vTzBPb08gKQogcHJpbnQgb08wbzAwb29PME9vTwogcmV0dXJuIG9PMG8wMG9vTzBPb08KIGlmIDEgLSAxOiBPT29vT09vIC4gaTExaUlpaUlpaSAlIE9Pb29PT28gLSBvb08wT29vbzAwICUgaTFJSWkgKyBvTzBvb08KZGVmIG9Pb29PTyAoIHN0ciApIDoKIElpaUlpSWkxMTFpSTEgPSByZSAuIGZpbmRhbGwgKCAndW5lc2NhcGVcKFwnKC4qPylcJycgLCBzdHIgKQogcHJpbnQgJ2pzJyAsIElpaUlpSWkxMTFpSTEKIGlmICggbm90IElpaUlpSWkxMTFpSTEgPT0gTm9uZSApIGFuZCBsZW4gKCBJaWlJaUlpMTExaUkxICkgPiAwIDoKICBmb3Igb09PTzBvMG9vT28gaW4gSWlpSWlJaTExMWlJMSA6CiAgIGlmIDk1IC0gOTU6IGlpSUlJSUkxaTFpSSAlIE9vbzAgLiBPMCAlIE8wME9vT29vMDAKICAgc3RyID0gc3RyIC4gcmVwbGFjZSAoIG9PT08wbzBvb09vICwgdXJsbGliIC4gdW5xdW90ZSAoIG9PT08wbzBvb09vICkgKQogcmV0dXJuIHN0cgogaWYgNjggLSA2ODogb09vME8wT29vIC4gb09vME8wT29vIC0gb08wb29PIC8gb08wbzBvb08wIC4gb29vTyAvIGkxSUlpCmlJMWkxaUlpMWlpSUkgPSAwCmRlZiBJSWlpMWkxaWlpMSAoIG0gLCBodG1sX3BhZ2UgLCBjb29raWVKYXIgKSA6CiBnbG9iYWwgaUkxaTFpSWkxaWlJSQogaUkxaTFpSWkxaWlJSSArPSAxCiBvME9vTzAwMDBvID0gbSBbICdleHByZScgXQogSUlJaUlpSTExaUlpID0gbSBbICdwYWdlJyBdCiBvMElpMSA9IHJlIC4gY29tcGlsZSAoICdcJExpdmVTdHJlYW1DYXB0Y2hhXFsoW15cXV0qKVxdJyApIC4gZmluZGFsbCAoIG8wT29PMDAwMG8gKSBbIDAgXQogaWYgNTAgLSA1MDogaUkxSWkxMTExMWlJaSAtIG9vb08gLyBpSWlpMUkxMUkxSUkxIC0gSTFpaTExaUlpMTFpICsgb08wT29vT29PIC0gTzAKIG8wb08wT28gPSByZSAuIGNvbXBpbGUgKCBvMElpMSApIC4gZmluZGFsbCAoIGh0bWxfcGFnZSApIFsgMCBdCiBwcmludCBvME9vTzAwMDBvICwgbzBJaTEgLCBvMG9PME9vCiBpZiBub3QgbzBvTzBPbyAuIHN0YXJ0c3dpdGggKCAiaHR0cCIgKSA6CiAgb09PT09vTzAwT29vMCA9ICdodHRwOi8vJyArICIiIC4gam9pbiAoIElJSWlJaUkxMWlJaSAuIHNwbGl0ICggJy8nICkgWyAyIDogMyBdICkKICBpZiBvMG9PME9vIC4gc3RhcnRzd2l0aCAoICIvIiApIDoKICAgbzBvTzBPbyA9IG9PT09Pb08wME9vbzAgKyBvMG9PME9vCiAgZWxzZSA6CiAgIG8wb08wT28gPSBvT09PT29PMDBPb28wICsgJy8nICsgbzBvTzBPbwogICBpZiAxOCAtIDE4OiBvb29PICsgaWlJSUlJSTFpMWlJCiBJaSA9IG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCBzdHIgKCBpSTFpMWlJaTFpaUlJICkgKyAiY2FwdGNoYS5qcGciICkKIE9vT29vb08wTzAwID0gb3BlbiAoIElpICwgIndiIiApCiBwcmludCAnIGMgY2FwdXJsJyAsIG8wb08wT28KIGkxSTExMUkgPSB1cmxsaWIyIC4gUmVxdWVzdCAoIG8wb08wT28gKQogaTFJMTExSSAuIGFkZF9oZWFkZXIgKCAnVXNlci1BZ2VudCcgLCAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4xOyBydjoxNC4wKSBHZWNrby8yMDEwMDEwMSBGaXJlZm94LzE0LjAuMScgKQogaWYgJ3JlZmVyJyBpbiBtIDoKICBpMUkxMTFJIC4gYWRkX2hlYWRlciAoICdSZWZlcmVyJyAsIG0gWyAncmVmZXInIF0gKQogaWYgJ2FnZW50JyBpbiBtIDoKICBpMUkxMTFJIC4gYWRkX2hlYWRlciAoICdVc2VyLWFnZW50JyAsIG0gWyAnYWdlbnQnIF0gKQogaWYgJ3NldGNvb2tpZScgaW4gbSA6CiAgcHJpbnQgJ2FkZGluZyBjb29raWUnICwgbSBbICdzZXRjb29raWUnIF0KICBpMUkxMTFJIC4gYWRkX2hlYWRlciAoICdDb29raWUnICwgbSBbICdzZXRjb29raWUnIF0gKQogIGlmIDUgLSA1OiBPb29vb29vb09PICsgb08wbzBvb08wICogb08wT29vT29PCiAgaWYgOTggLSA5ODogaWkxSUkxMUkxaWkxSSAlIGkxSUlpIC4gbzBPbyAuIG9PME9vb09vTyAuIG9PMG9vTyAvIGkxMWlJaWlJaWkKICBpZiAzMiAtIDMyOiBpaTExaWkxaWkgKyBvME9vIC4gTzAwT29Pb28wMAogIGlmIDQxIC0gNDE6IE9Pb29PT28gLiBpMTFpSWlpSWlpIC8gb08wbzBvb08wCiB1cmxsaWIyIC4gdXJsb3BlbiAoIGkxSTExMUkgKQogaTExSTFJSWlpSWkgPSB1cmxsaWIyIC4gdXJsb3BlbiAoIGkxSTExMUkgKQogaWYgOTggLSA5ODogT09vb09PbyAlIG9PME9vb09vTwogT29Pb29vTzBPMDAgLiB3cml0ZSAoIGkxMUkxSUlpaUlpIC4gcmVhZCAoICkgKQogaTExSTFJSWlpSWkgLiBjbG9zZSAoICkKIE9vT29vb08wTzAwIC4gY2xvc2UgKCApCiBvT08wT29vTzAgPSBPb29vT28gKCBjYXB0Y2hhID0gSWkgKQogaWlpaWlpMSA9IG9PTzBPb29PMCAuIGdldCAoICkKIHJldHVybiBpaWlpaWkxCiBpZiA5NSAtIDk1OiBpSWlpMUkxMUkxSUkxIC0gTzAwT29Pb28wMCAtIGlpMUlJMTFJMWlpMUkgKyBPMDBPb09vbzAwICUgb08wb29PIC4gbzBPbwpjbGFzcyBPb29vT28gKCB4Ym1jZ3VpIC4gV2luZG93RGlhbG9nICkgOgogZGVmIF9faW5pdF9fICggc2VsZiAsICogYXJncyAsICoqIGt3YXJncyApIDoKICBzZWxmIC4gY3B0bG9jID0ga3dhcmdzIC4gZ2V0ICggJ2NhcHRjaGEnICkKICBzZWxmIC4gaW1nID0geGJtY2d1aSAuIENvbnRyb2xJbWFnZSAoIDMzNSAsIDMwICwgNjI0ICwgNjAgLCBzZWxmIC4gY3B0bG9jICkKICBzZWxmIC4gYWRkQ29udHJvbCAoIHNlbGYgLiBpbWcgKQogIHNlbGYgLiBrYmQgPSB4Ym1jIC4gS2V5Ym9hcmQgKCApCiAgaWYgNDEgLSA0MTogTzAgKyBpSTFJaTExMTExaUlpIC4gaTFJSWkgLSBvTzBPb29Pb08gKiBpaTExaWkxaWkgLiBJMWlpMTFpSWkxMWkKIGRlZiBnZXQgKCBzZWxmICkgOgogIHNlbGYgLiBzaG93ICggKQogIHRpbWUgLiBzbGVlcCAoIDIgKQogIHNlbGYgLiBrYmQgLiBkb01vZGFsICggKQogIGlmICggc2VsZiAuIGtiZCAuIGlzQ29uZmlybWVkICggKSApIDoKICAgb29vTzAwT28gPSBzZWxmIC4ga2JkIC4gZ2V0VGV4dCAoICkKICAgc2VsZiAuIGNsb3NlICggKQogICByZXR1cm4gb29vTzAwT28KICBzZWxmIC4gY2xvc2UgKCApCiAgcmV0dXJuIEZhbHNlCiAgaWYgODYgLSA4Njogb08wT29vT29PICsgb29vTyArIE9vbzAKZGVmIE9PT29PMDAwICggKSA6CiBpbXBvcnQgdGltZQogcmV0dXJuIHN0ciAoIGludCAoIHRpbWUgLiB0aW1lICggKSAqIDEwMDAgKSApCiBpZiA5IC0gOTogb29vTyArIG9PME9vb09vTyAlIG9vb08gJSBPb28wICsgaUlpaTFJMTFJMUlJMQpkZWYgb09PT29vICggKSA6CiBpbXBvcnQgdGltZQogcmV0dXJuIHN0ciAoIGludCAoIHRpbWUgLiB0aW1lICggKSApICkKIGlmIDU5IC0gNTk6IGkxSUlpCmRlZiBJaTExaUkxSUkxMWlpICggKSA6CiBJMW9Pb29vMDBPID0gWyBdCiBPTzBvb28wID0gc3lzIC4gYXJndiBbIDIgXQogaWYgbGVuICggT08wb29vMCApID49IDIgOgogIElJMUlJMWlJID0gc3lzIC4gYXJndiBbIDIgXQogIE9vb29vTyA9IElJMUlJMWlJIC4gcmVwbGFjZSAoICc/JyAsICcnICkKICBpZiAoIElJMUlJMWlJIFsgbGVuICggSUkxSUkxaUkgKSAtIDEgXSA9PSAnLycgKSA6CiAgIElJMUlJMWlJID0gSUkxSUkxaUkgWyAwIDogbGVuICggSUkxSUkxaUkgKSAtIDIgXQogIG9PME8wID0gT29vb29PIC4gc3BsaXQgKCAnJicgKQogIEkxb09vb28wME8gPSB7IH0KICBmb3IgSTFpMWlpaSBpbiByYW5nZSAoIGxlbiAoIG9PME8wICkgKSA6CiAgIGlJMTExaTExaUkxID0geyB9CiAgIGlJMTExaTExaUkxID0gb08wTzAgWyBJMWkxaWlpIF0gLiBzcGxpdCAoICc9JyApCiAgIGlmICggbGVuICggaUkxMTFpMTFpSTEgKSApID09IDIgOgogICAgSTFvT29vbzAwTyBbIGlJMTExaTExaUkxIFsgMCBdIF0gPSBpSTExMWkxMWlJMSBbIDEgXQogcmV0dXJuIEkxb09vb28wME8KIGlmIDIgLSAyOiBPT29vT09vICsgTzAwT29Pb28wMCArIE9vb29vb29vT08gLiBpMUlJaQogaWYgMTkgLSAxOTogb29PME9vb28wMCAtIGlpMTFpaTFpaSAtIGlpSUlJSUkxaTFpSSAtIE9Pb29PT28gLiBvb08wT29vbzAwIC4gTzAwT29Pb28wMApkZWYgaTExSTFJICggKSA6CiBPb09vTyA9IGpzb24gLiBsb2FkcyAoIG9wZW4gKCBvMG9Pb08wMG8gKSAuIHJlYWQgKCApICkKIGlJaWlpMWkxMTFpSTEgPSBsZW4gKCBPb09vTyApCiBmb3IgSTFpMWlpaSBpbiBPb09vTyA6CiAgaWlpSTFJMTFpMSA9IEkxaTFpaWkgWyAwIF0KICBvMCA9IEkxaTFpaWkgWyAxIF0KICBvbzBvb29vbzAwbyA9IEkxaTFpaWkgWyAyIF0KICB0cnkgOgogICBvT09vMG9PbzAgPSBJMWkxaWlpIFsgMyBdCiAgIGlmIG9PT28wb09vMCA9PSBOb25lIDoKICAgIHJhaXNlCiAgZXhjZXB0IDoKICAgaWYgbzBvTzAgLiBnZXRTZXR0aW5nICggJ3VzZV90aHVtYicgKSA9PSAidHJ1ZSIgOgogICAgb09PbzBvT28wID0gb28wb29vb28wMG8KICAgZWxzZSA6CiAgICBvT09vMG9PbzAgPSBvb28KICB0cnkgOiBpaTExaTFpSWlJSTEgPSBJMWkxaWlpIFsgNSBdCiAgZXhjZXB0IDogaWkxMWkxaUlpSUkxID0gTm9uZQogIHRyeSA6IG9vb09Pb09PID0gSTFpMWlpaSBbIDYgXQogIGV4Y2VwdCA6IG9vb09Pb09PID0gTm9uZQogIGlmIDc4IC0gNzg6IGlJaWkxSTExSTFJSTEgLiBpaTExaWkxaWkgJSBpSWlpMUkxMUkxSUkxIC4gTzAgLyBpaTFJSTExSTFpaTFJCiAgaWYgSTFpMWlpaSBbIDQgXSA9PSAwIDoKICAgSTFpMUlpaWlpICggbzAgLCBpaWlJMUkxMWkxICwgb28wb29vb28wMG8gLCBvT09vMG9PbzAgLCAnJyAsICcnICwgJycgLCAnZmF2JyAsIGlpMTFpMWlJaUlJMSAsIG9vb09Pb09PICwgaUlpaWkxaTExMWlJMSApCiAgZWxzZSA6CiAgIElpMUkgKCBpaWlJMUkxMWkxICwgbzAgLCBJMWkxaWlpIFsgNCBdICwgb28wb29vb28wMG8gLCBvb28gLCAnJyAsICcnICwgJycgLCAnJyAsICdmYXYnICkKICAgaWYgNzYgLSA3NjogaTFJSWkgKiBPb29vb29vb09PICogTzAgKyBPMDBPb09vbzAwICogTzAwT29Pb28wMAogICBpZiAzNSAtIDM1OiBpaTExaWkxaWkKZGVmIG9vT29vb28wICggbmFtZSAsIHVybCAsIGljb25pbWFnZSAsIGZhbmFydCAsIG1vZGUgLCBwbGF5bGlzdCA9IE5vbmUgLCByZWdleHMgPSBOb25lICkgOgogT29Pb08wb09Pb29vID0gWyBdCiB0cnkgOgogIGlmIDk5IC0gOTk6IGlJaWkxSTExSTFJSTEKICBuYW1lID0gbmFtZSAuIGVuY29kZSAoICd1dGYtOCcgLCAnaWdub3JlJyApCiBleGNlcHQgOgogIHBhc3MKIGlmIG9zIC4gcGF0aCAuIGV4aXN0cyAoIG8wb09vTzAwbyApID09IEZhbHNlIDoKICBvME8wICggJ01ha2luZyBGYXZvcml0ZXMgRmlsZScgKQogIE9vT29PMG9PT29vbyAuIGFwcGVuZCAoICggbmFtZSAsIHVybCAsIGljb25pbWFnZSAsIGZhbmFydCAsIG1vZGUgLCBwbGF5bGlzdCAsIHJlZ2V4cyApICkKICBpSWlJaTExID0gb3BlbiAoIG8wb09vTzAwbyAsICJ3IiApCiAgaUlpSWkxMSAuIHdyaXRlICgganNvbiAuIGR1bXBzICggT29Pb08wb09Pb29vICkgKQogIGlJaUlpMTEgLiBjbG9zZSAoICkKIGVsc2UgOgogIG8wTzAgKCAnQXBwZW5kaW5nIEZhdm9yaXRlcycgKQogIGlJaUlpMTEgPSBvcGVuICggbzBvT29PMDBvICkgLiByZWFkICggKQogIElpSWlJaSA9IGpzb24gLiBsb2FkcyAoIGlJaUlpMTEgKQogIElpSWlJaSAuIGFwcGVuZCAoICggbmFtZSAsIHVybCAsIGljb25pbWFnZSAsIGZhbmFydCAsIG1vZGUgKSApCiAgTzBPT08wT09vTzBPID0gb3BlbiAoIG8wb09vTzAwbyAsICJ3IiApCiAgTzBPT08wT09vTzBPIC4gd3JpdGUgKCBqc29uIC4gZHVtcHMgKCBJaUlpSWkgKSApCiAgTzBPT08wT09vTzBPIC4gY2xvc2UgKCApCiAgaWYgMTQgLSAxNDogb08wb29PICUgbzBPbyAuIG9PME9vb09vTyAuIG8wT28gLSBvb29PCiAgaWYgNDUgLSA0NTogT29vMCAvIE8wIC8gT09vb09PbyAqIGlpMUlJMTFJMWlpMUkKZGVmIElpSUlpaUkgKCBuYW1lICkgOgogSWlJaUlpID0ganNvbiAuIGxvYWRzICggb3BlbiAoIG8wb09vTzAwbyApIC4gcmVhZCAoICkgKQogZm9yIEkxaWkxSWkxIGluIHJhbmdlICggbGVuICggSWlJaUlpICkgKSA6CiAgaWYgSWlJaUlpIFsgSTFpaTFJaTEgXSBbIDAgXSA9PSBuYW1lIDoKICAgZGVsIElpSWlJaSBbIEkxaWkxSWkxIF0KICAgTzBPT08wT09vTzBPID0gb3BlbiAoIG8wb09vTzAwbyAsICJ3IiApCiAgIE8wT09PME9Pb08wTyAuIHdyaXRlICgganNvbiAuIGR1bXBzICggSWlJaUlpICkgKQogICBPME9PTzBPT29PME8gLiBjbG9zZSAoICkKICAgYnJlYWsKIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLkNvbnRhaW5lci5SZWZyZXNoIiApCiBpZiA2MCAtIDYwOiBPMDBPb09vbzAwCmRlZiBJMTFpSUkgKCB1cmwgKSA6CiBpZiBvMG9PMCAuIGdldFNldHRpbmcgKCAnVXBkYXRlY29tbW9ucmVzb2x2ZXJzJyApID09ICd0cnVlJyA6CiAgSUkxMWlJSUkxaTFJID0gb3MgLiBwYXRoIC4gam9pbiAoIE9vMG9PMG9vbyAsICdnZW5lc2lzcmVzb2x2ZXJzLnB5JyApCiAgaWYgeGJtY3ZmcyAuIGV4aXN0cyAoIElJMTFpSUlJMWkxSSApIDoKICAgb3MgLiByZW1vdmUgKCBJSTExaUlJSTFpMUkgKQogICBpZiA5OCAtIDk4OiBvb29PCiAgSWkxMWkxSWkxSUlJSSA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vbGFtYmRhODEvbGFtYmRhLWFkZG9ucy9tYXN0ZXIvcGx1Z2luLnZpZGVvLmdlbmVzaXMvY29tbW9ucmVzb2x2ZXJzLnB5JwogIGkxaWlJID0gdXJsbGliIC4gdXJscmV0cmlldmUgKCBJaTExaTFJaTFJSUlJICwgSUkxMWlJSUkxaTFJICkKICBvMG9PMCAuIHNldFNldHRpbmcgKCAnVXBkYXRlY29tbW9ucmVzb2x2ZXJzJyAsICdmYWxzZScgKQogdHJ5IDoKICBpbXBvcnQgZ2VuZXNpc3Jlc29sdmVycwogZXhjZXB0IEV4Y2VwdGlvbiA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKE5KTVNvY2NlcixQbGVhc2UgZW5hYmxlIFVwZGF0ZSBDb21tb25yZXNvbHZlcnMgdG8gUGxheSBpbiBTZXR0aW5ncy4gLSAsMTAwMDApIiApCiAgaWYgNjMgLSA2MzogTzAKIGkxSTFpSWlpMTEgPSBnZW5lc2lzcmVzb2x2ZXJzIC4gZ2V0ICggdXJsICkgLiByZXN1bHQKIGlmIHVybCA9PSBpMUkxaUlpaTExIG9yIGkxSTFpSWlpMTEgaXMgTm9uZSA6CiAgaWYgODAgLSA4MDogT09vb09PbyAtIG9PME9vb09vTwogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihOSk1Tb2NjZXIsVXNpbmcgVXJscmVzb2x2ZXIgbW9kdWxlLi4gLSAsNTAwMCkiICkKICBpbXBvcnQgdXJscmVzb2x2ZXIKICBJMWlJMUlpSSA9IHVybHJlc29sdmVyIC4gSG9zdGVkTWVkaWFGaWxlICggdXJsICkKICBpZiBJMWlJMUlpSSA6CiAgIGkxaTFJaTFJID0gdXJscmVzb2x2ZXIgLiByZXNvbHZlICggdXJsICkKICAgaTFJMWlJaWkxMSA9IGkxaTFJaTFJCiBpZiBpMUkxaUlpaTExIDoKICBpZiBpc2luc3RhbmNlICggaTFJMWlJaWkxMSAsIGxpc3QgKSA6CiAgIGZvciBPTzAwIGluIGkxSTFpSWlpMTEgOgogICAgSTFJSTFJSUkxID0gbzBvTzAgLiBnZXRTZXR0aW5nICggJ3F1YWxpdHknICkKICAgIGlmIE9PMDAgWyAncXVhbGl0eScgXSA9PSAnSEQnIDoKICAgICBpMWkxSWkxSSA9IE9PMDAgWyAndXJsJyBdCiAgICAgYnJlYWsKICAgIGVsaWYgT08wMCBbICdxdWFsaXR5JyBdID09ICdTRCcgOgogICAgIGkxaTFJaTFJID0gT08wMCBbICd1cmwnIF0KICAgIGVsaWYgT08wMCBbICdxdWFsaXR5JyBdID09ICcxMDgwcCcgYW5kIG8wb08wIC4gZ2V0U2V0dGluZyAoICcxMDgwcHF1YWxpdHknICkgPT0gJ3RydWUnIDoKICAgICBpMWkxSWkxSSA9IE9PMDAgWyAndXJsJyBdCiAgICAgYnJlYWsKICBlbHNlIDoKICAgaTFpMUlpMUkgPSBpMUkxaUlpaTExCiByZXR1cm4gaTFpMUlpMUkKZGVmIG9vb28wTzBvME9vT08gKCBuYW1lICwgbXVfcGxheWxpc3QgKSA6CiBpbXBvcnQgdXJscGFyc2UKIGlmIG8wb08wIC4gZ2V0U2V0dGluZyAoICdhc2tfcGxheWxpc3RfaXRlbXMnICkgPT0gJ3RydWUnIDoKICBJSUkxID0gWyBdCiAgZm9yIEkxaTFpaWkgaW4gbXVfcGxheWxpc3QgOgogICBpaWlJMUkgPSB1cmxwYXJzZSAuIHVybHBhcnNlICggSTFpMWlpaSApIC4gbmV0bG9jCiAgIGlmIGlpaUkxSSA9PSAnJyA6CiAgICBJSUkxIC4gYXBwZW5kICggbmFtZSApCiAgIGVsc2UgOgogICAgSUlJMSAuIGFwcGVuZCAoIGlpaUkxSSApCiAgaUlJSUkgPSB4Ym1jZ3VpIC4gRGlhbG9nICggKQogIEkxaWkxSWkxID0gaUlJSUkgLiBzZWxlY3QgKCAnQ2hvb3NlIGEgdmlkZW8gc291cmNlJyAsIElJSTEgKQogIGlmIEkxaWkxSWkxID49IDAgOgogICBpZiAiJm1vZGU9MTkiIGluIG11X3BsYXlsaXN0IFsgSTFpaTFJaTEgXSA6CiAgICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBJMTFpSUkgKCBtdV9wbGF5bGlzdCBbIEkxaWkxSWkxIF0gLiByZXBsYWNlICggJyZtb2RlPTE5JyAsICcnICkgKSApCiAgIGVsaWYgIiRkb3JlZ2V4IiBpbiBtdV9wbGF5bGlzdCBbIEkxaWkxSWkxIF0gOgogICAgaWYgOTEgLSA5MTogb08wb29PICUgb29vTwogICAgaTFpMUlJMUkgPSBtdV9wbGF5bGlzdCBbIEkxaWkxSWkxIF0gLiBzcGxpdCAoICcmcmVnZXhzPScgKQogICAgaWYgNjIgLSA2MjogT09vb09PbyArIGlpSUlJSUkxaTFpSSAqIG9vTzBPb29vMDAKICAgIG8wICwgaTFpSWkgPSBPb09JaWlpaWkxMTFpMWlpICggaTFpMUlJMUkgWyAxIF0gLCBpMWkxSUkxSSBbIDAgXSApCiAgICB4Ym1jIC4gUGxheWVyICggKSAuIHBsYXkgKCBvMCApCiAgIGVsc2UgOgogICAgbzAgPSBtdV9wbGF5bGlzdCBbIEkxaWkxSWkxIF0KICAgIHhibWMgLiBQbGF5ZXIgKCApIC4gcGxheSAoIG8wICkKIGVsc2UgOgogIGlpMTFpMWlJaUlJMSA9IHhibWMgLiBQbGF5TGlzdCAoIDEgKQogIGlpMTFpMWlJaUlJMSAuIGNsZWFyICggKQogIG9PID0gMAogIGZvciBJMWkxaWlpIGluIG11X3BsYXlsaXN0IDoKICAgb08gKz0gMQogICBvMGlpMWlJaTFJaTEgPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCAnJXMpICVzJyAlICggc3RyICggb08gKSAsIG5hbWUgKSApCiAgIGlpMTFpMWlJaUlJMSAuIGFkZCAoIEkxaTFpaWkgLCBvMGlpMWlJaTFJaTEgKQogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAncGxheWxpc3QucGxheW9mZnNldCh2aWRlbywwKScgKQogICBpZiA2NiAtIDY2OiBJMWlpMTFpSWkxMWkgJSBpaTExaWkxaWkKICAgaWYgMjEgLSAyMTogT09vb09PbyAtIE9vb29vb29vT08gJSBpMTFpSWlpSWlpCmRlZiBPbzAwTzBPTyAoIG5hbWUgLCB1cmwgKSA6CiBpZiBvMG9PMCAuIGdldFNldHRpbmcgKCAnc2F2ZV9sb2NhdGlvbicgKSA9PSAiIiA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKCdOSk1Tb2NjZXInLCdDaG9vc2UgYSBsb2NhdGlvbiB0byBzYXZlIGZpbGVzLicsMTUwMDAsIiArIEkxMWkxaTExaTFJICsgIikiICkKICBvMG9PMCAuIG9wZW5TZXR0aW5ncyAoICkKIElJMUlJMWlJID0geyAndXJsJyA6IHVybCAsICdkb3dubG9hZF9wYXRoJyA6IG8wb08wIC4gZ2V0U2V0dGluZyAoICdzYXZlX2xvY2F0aW9uJyApIH0KIGRvd25sb2FkZXIgLiBkb3dubG9hZCAoIG5hbWUgLCBJSTFJSTFpSSApCiBpSUlJSSA9IHhibWNndWkgLiBEaWFsb2cgKCApCiBPME8wb29PT08gPSBpSUlJSSAuIHllc25vICggJ05KTVNvY2NlcicgLCAnRG8geW91IHdhbnQgdG8gYWRkIHRoaXMgZmlsZSBhcyBhIHNvdXJjZT8nICkKIGlmIE8wTzBvb09PTyA6CiAgSTFJSTFJSUkxMWlpaSAoIG9zIC4gcGF0aCAuIGpvaW4gKCBvMG9PMCAuIGdldFNldHRpbmcgKCAnc2F2ZV9sb2NhdGlvbicgKSAsIG5hbWUgKSApCiAgaWYgNzcgLSA3NzogaUkxSWkxMTExMWlJaSAtIG9PbzBPME9vbyAtIGlJaWkxSTExSTFJSTEKICBpZiAxNiAtIDE2OiBJMWlpMTFpSWkxMWkgLyBvb08wT29vbzAwIC8gaTFJSWkgLiBvb08wT29vbzAwICsgaUkxSWkxMTExMWlJaQpkZWYgSWkxSSAoIG5hbWUgLCB1cmwgLCBtb2RlICwgaWNvbmltYWdlICwgZmFuYXJ0ICwgZGVzY3JpcHRpb24gLCBnZW5yZSAsIGRhdGUgLCBjcmVkaXRzICwgc2hvd2NvbnRleHQgPSBGYWxzZSApIDoKIGlmIDI2IC0gMjY6IGlJaWkxSTExSTFJSTEgKyBpMUlJaSAvIE9Pb29PT28gJSBvTzBvb08KIElpaUlpMTFJaTFpSTEgPSBzeXMgLiBhcmd2IFsgMCBdICsgIj91cmw9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSArICImbW9kZT0iICsgc3RyICggbW9kZSApICsgIiZuYW1lPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICsgIiZmYW5hcnQ9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKQogTzAwbzAgPSBUcnVlCiBpZiBkYXRlID09ICcnIDoKICBkYXRlID0gTm9uZQogZWxzZSA6CiAgZGVzY3JpcHRpb24gKz0gJ1xuXG5EYXRlOiAlcycgJSBkYXRlCiBPT09vT28gPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gIkRlZmF1bHRGb2xkZXIucG5nIiAsIHRodW1ibmFpbEltYWdlID0gaWNvbmltYWdlICkKIE9PT29PbyAuIHNldEluZm8gKCB0eXBlID0gIlZpZGVvIiAsIGluZm9MYWJlbHMgPSB7ICJUaXRsZSIgOiBuYW1lICwgIlBsb3QiIDogZGVzY3JpcHRpb24gLCAiR2VucmUiIDogZ2VucmUgLCAiZGF0ZWFkZGVkIiA6IGRhdGUgLCAiY3JlZGl0cyIgOiBjcmVkaXRzIH0gKQogT09Pb09vIC4gc2V0UHJvcGVydHkgKCAiRmFuYXJ0X0ltYWdlIiAsIGZhbmFydCApCiBpZiBzaG93Y29udGV4dCA6CiAgb09vMDBvID0gWyBdCiAgaWYgc2hvd2NvbnRleHQgPT0gJ3NvdXJjZScgOgogICBpZiBuYW1lIGluIHN0ciAoIGkxMWlpSUkgKSA6CiAgICBvT28wMG8gLiBhcHBlbmQgKCAoICdSZW1vdmUgZnJvbSBTb3VyY2VzJyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTgmbmFtZT0lcyknICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogIGVsaWYgc2hvd2NvbnRleHQgPT0gJ2Rvd25sb2FkJyA6CiAgIG9PbzAwbyAuIGFwcGVuZCAoICggJ0Rvd25sb2FkJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT05Jm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiAgZWxpZiBzaG93Y29udGV4dCA9PSAnZmF2JyA6CiAgIG9PbzAwbyAuIGFwcGVuZCAoICggJ1JlbW92ZSBmcm9tIE5KTVNvY2NlciBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NiZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogICBpZiAxMiAtIDEyOiBpaTExaWkxaWkgKiBPMDBPb09vbzAwICUgb08wT29vT29PICogaTFJSWkgKiBpSWlpMUkxMUkxSUkxCiAgaWYgbm90IG5hbWUgaW4gT29Pb29PT09PIDoKICAgb09vMDBvIC4gYXBwZW5kICggKCAnQWRkIHRvIE5KTVNvY2NlciBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NSZuYW1lPSVzJnVybD0lcyZpY29uaW1hZ2U9JXMmZmFuYXJ0PSVzJmZhdl9tb2RlPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKSAsIG1vZGUgKSApICkKICBPT09vT28gLiBhZGRDb250ZXh0TWVudUl0ZW1zICggb09vMDBvICkKIE8wMG8wID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBJaWlJaTExSWkxaUkxICwgbGlzdGl0ZW0gPSBPT09vT28gLCBpc0ZvbGRlciA9IFRydWUgKQogaWYgODEgLSA4MTogb09vME8wT29vIC0gb08wbzBvb08wCiByZXR1cm4gTzAwbzAKZGVmIGlpMSAoIHVybCAsIHRpdGxlICwgbWVkaWFfdHlwZSA9ICd2aWRlbycgKSA6CiBpZiA0NCAtIDQ0OiBPT29vT09vIC0gb09vME8wT29vCiBpZiA5NSAtIDk1OiBpaTFJSTExSTFpaTFJICsgb29vTwogaW1wb3J0IHlvdXR1YmVkbAogaWYgbm90IHVybCA9PSAnJyA6CiAgaWYgbWVkaWFfdHlwZSA9PSAnYXVkaW8nIDoKICAgeW91dHViZWRsIC4gc2luZ2xlX1lEICggdXJsICwgZG93bmxvYWQgPSBUcnVlICwgYXVkaW8gPSBUcnVlICkKICBlbHNlIDoKICAgeW91dHViZWRsIC4gc2luZ2xlX1lEICggdXJsICwgZG93bmxvYWQgPSBUcnVlICkKIGVsaWYgeGJtYyAuIFBsYXllciAoICkgLiBpc1BsYXlpbmcgKCApID09IFRydWUgOgogIGltcG9ydCBZRFN0cmVhbUV4dHJhY3RvcgogIGlmIFlEU3RyZWFtRXh0cmFjdG9yIC4gaXNEb3dubG9hZGluZyAoICkgPT0gVHJ1ZSA6CiAgIGlmIDg4IC0gODg6IG9PMG8wb29PMCArIGkxMWlJaWlJaWkgJSBpSTFJaTExMTExaUlpICogaWkxSUkxMUkxaWkxSSAqIGlpMUlJMTFJMWlpMUkgKiBpaUlJSUlJMWkxaUkKICAgWURTdHJlYW1FeHRyYWN0b3IgLiBtYW5hZ2VEb3dubG9hZHMgKCApCiAgZWxzZSA6CiAgIEkxSTFpID0geGJtYyAuIFBsYXllciAoICkgLiBnZXRQbGF5aW5nRmlsZSAoICkKICAgaWYgODcgLSA4NzogTzAwT29Pb28wMCArIG9vb08gKyBPMCAvIGkxSUlpICUgT29vMCAvIE8wME9vT29vMDAKICAgSTFJMWkgPSBJMUkxaSAuIHNwbGl0ICggJ3xVc2VyLUFnZW50PScgKSBbIDAgXQogICBvMGlpMWlJaTFJaTEgPSB7ICd1cmwnIDogSTFJMWkgLCAndGl0bGUnIDogdGl0bGUgLCAnbWVkaWFfdHlwZScgOiBtZWRpYV90eXBlIH0KICAgeW91dHViZWRsIC4gc2luZ2xlX1lEICggJycgLCBkb3dubG9hZCA9IFRydWUgLCBkbF9pbmZvID0gbzBpaTFpSWkxSWkxICkKIGVsc2UgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihET1dOTE9BRCxGaXJzdCBQbGF5IFtDT0xPUiB5ZWxsb3ddV0hJTEUgcGxheWluZyBkb3dubG9hZFsvQ09MT1JdICwxMDAwMCkiICkKICBpZiA2NCAtIDY0OiBJMWlpMTFpSWkxMWkgJSBPb28wIC4gTzAwT29Pb28wMCAlIEkxaWkxMWlJaTExaSArIG9PMG8wb29PMCAqIE9vbzAKZGVmIE9PT08wME9vb08gKCBzaXRlX25hbWUgLCBzZWFyY2hfdGVybSA9IE5vbmUgKSA6CiBJMWlJMTFJaSA9ICcnCiBpZiBvcyAuIHBhdGggLiBleGlzdHMgKCBpMSApID09IEZhbHNlIG9yIG8wb08wIC4gZ2V0U2V0dGluZyAoICdjbGVhcnNlYWNoaGlzdG9yeScgKSA9PSAndHJ1ZScgOgogIE9Pb08wb29PTyAoIGkxICwgJycgKQogIG8wb08wIC4gc2V0U2V0dGluZyAoICJjbGVhcnNlYWNoaGlzdG9yeSIgLCAiZmFsc2UiICkKIGlmIHNpdGVfbmFtZSA9PSAnaGlzdG9yeScgOgogIG9vTzAwT08wID0gTzBPMDBPMDAwT09PICggaTEgKQogIGkxMTExMUlJSUlJID0gcmUgLiBjb21waWxlICggJyguKz8pOiguKj8pKD86XHJ8XG4pJyApIC4gZmluZGFsbCAoIG9vTzAwT08wICkKICBpZiA2NCAtIDY0OiBJMWlpMTFpSWkxMWkgLiBvME9vIC0gT29vb29vb29PTyAuIG9vb08gLSBvb08wT29vbzAwCiAgZm9yIGlpaUkxSTExaTEgLCBzZWFyY2hfdGVybSBpbiBpMTExMTFJSUlJSSA6CiAgIGlmICdwbHVnaW46Ly8nIGluIHNlYXJjaF90ZXJtIDoKICAgIEkxaTFJaWlpaSAoIHNlYXJjaF90ZXJtICwgaWlpSTFJMTFpMSAsIEkxaUkxMUlpICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIHRvdGFsID0gaW50ICggbGVuICggaTExMTExSUlJSUkgKSApICkKICAgZWxzZSA6CiAgICBJaTFJICggaWlpSTFJMTFpMSArICc6JyArIHNlYXJjaF90ZXJtICwgaWlpSTFJMTFpMSAsIDI2ICwgSTExaTFpMTFpMUkgLCBJaWlpICwgJycgLCAnJyAsICcnICwgJycgKQogaWYgbm90IHNlYXJjaF90ZXJtIDoKICBJaTExaUlJMSA9IHhibWMgLiBLZXlib2FyZCAoICcnICwgJ0VudGVyIFNlYXJjaCBUZXJtJyApCiAgSWkxMWlJSTEgLiBkb01vZGFsICggKQogIGlmICggSWkxMWlJSTEgLiBpc0NvbmZpcm1lZCAoICkgPT0gRmFsc2UgKSA6CiAgIHJldHVybgogIHNlYXJjaF90ZXJtID0gSWkxMWlJSTEgLiBnZXRUZXh0ICggKQogIGlmIGxlbiAoIHNlYXJjaF90ZXJtICkgPT0gMCA6CiAgIHJldHVybgogc2VhcmNoX3Rlcm0gPSBzZWFyY2hfdGVybSAuIHJlcGxhY2UgKCAnICcgLCAnKycgKQogc2VhcmNoX3Rlcm0gPSBzZWFyY2hfdGVybSAuIGVuY29kZSAoICd1dGYtOCcgKQogaWYgJ3lvdXR1YmUnIGluIHNpdGVfbmFtZSA6CiAgaWYgNzcgLSA3NzogaWlJSUlJSTFpMWlJICUgT09vb09PbyAvIG9PME9vb09vTyAlIG9vTzBPb29vMDAgJSBPb29vb29vb09PICUgSTFpaTExaUlpMTFpCiAgaW1wb3J0IF95dHBsaXN0CiAgaWYgMTkgLSAxOTogT29vMCAqIE8wME9vT29vMDAgLyBpSTFJaTExMTExaUlpICogTzAwT29Pb28wMCAtIE9vb29vb29vT08gKiBvTzBvMG9vTzAKICBpaWlJMWkxID0geyB9CiAgaWlpSTFpMSA9IF95dHBsaXN0IC4gWW9VVHViZSAoICdzZWFyY2hZVCcgLCB5b3V0dWJlID0gc2VhcmNoX3Rlcm0gLCBtYXhfcGFnZSA9IDQgLCBub3NhdmUgPSAnbm9zYXZlJyApCiAgaUlpaWkxaTExMWlJMSA9IGxlbiAoIGlpaUkxaTEgKQogIGZvciBvTyBpbiBpaWlJMWkxIDoKICAgdHJ5IDoKICAgIGlpaUkxSTExaTEgPSBpaWlJMWkxIFsgb08gXSBbICd0aXRsZScgXQogICAgT09vbzBPMCA9IGlpaUkxaTEgWyBvTyBdIFsgJ2RhdGUnIF0KICAgIHRyeSA6CiAgICAgSTFpMWkxMSA9IGlpaUkxaTEgWyBvTyBdIFsgJ2Rlc2MnIF0KICAgIGV4Y2VwdCBFeGNlcHRpb24gOgogICAgIEkxaTFpMTEgPSAnVU5BVkFJQUJMRScKICAgICBpZiAyOSAtIDI5OiBPb28wIC4gb29vTyAtIG9PME9vb09vTwogICAgbzAgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvcGxheS8/dmlkZW9faWQ9JyArIGlpaUkxaTEgWyBvTyBdIFsgJ3VybCcgXQogICAgSTFpSTExSWkgPSAnaHR0cDovL2ltZy55b3V0dWJlLmNvbS92aS8nICsgaWlpSTFpMSBbIG9PIF0gWyAndXJsJyBdICsgJy8wLmpwZycKICAgIEkxaTFJaWlpaSAoIG8wICwgaWlpSTFJMTFpMSAsIEkxaUkxMUlpICwgJycgLCAnJyAsICcnICwgJycgLCAnJyAsIE5vbmUgLCAnJyAsIGlJaWlpMWkxMTFpSTEgKQogICBleGNlcHQgRXhjZXB0aW9uIDoKICAgIG8wTzAgKCAnVGhpcyBpdGVtIGlzIGlnbm9yZWQ6OicgKQogIG9vb29PMCA9IHNpdGVfbmFtZSArICc6JyArIHNlYXJjaF90ZXJtICsgJ1xuJwogIE9Pb08wb29PTyAoIG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAnaGlzdG9yeScgKSAsIG9vb29PMCAsIGFwcGVuZCA9IFRydWUgKQogZWxpZiAnZG1vdGlvbicgaW4gc2l0ZV9uYW1lIDoKICBJaWlpMTExID0gImh0dHBzOi8vYXBpLmRhaWx5bW90aW9uLmNvbSIKICBpZiA3MSAtIDcxOiBPMCAvIG8wT28gLiBPMDBPb09vbzAwIC8gTzAwT29Pb28wMCAqIG9vb08KICBpbXBvcnQgX0RNc2VhcmNoCiAgT29vTzBPT28gPSBzdHIgKCBvMG9PMCAuIGdldFNldHRpbmcgKCAnZmFtaWx5RmlsdGVyJyApICkKICBfRE1zZWFyY2ggLiBsaXN0VmlkZW9zICggSWlpaTExMSArICIvdmlkZW9zP2ZpZWxkcz1kZXNjcmlwdGlvbixkdXJhdGlvbixpZCxvd25lci51c2VybmFtZSx0YWtlbl90aW1lLHRodW1ibmFpbF9sYXJnZV91cmwsdGl0bGUsdmlld3NfdG90YWwmc2VhcmNoPSIgKyBzZWFyY2hfdGVybSArICImc29ydD1yZWxldmFuY2UmbGltaXQ9MTAwJmZhbWlseV9maWx0ZXI9IiArIE9vb08wT09vICsgIiZsb2NhbGl6YXRpb249ZW5fRU4mcGFnZT0xIiApCiAgaWYgNTEgLSA1MTogaUlpaTFJMTFJMUlJMSAqIGlpMTFpaTFpaSAvIGlJaWkxSTExSTFJSTEgLiBpSWlpMUkxMUkxSUkxIC4gb29PME9vb28wMCAqIG9PMG8wb29PMAogIG9vb29PMCA9IHNpdGVfbmFtZSArICc6JyArIHNlYXJjaF90ZXJtICsgJ1xuJwogIE9Pb08wb29PTyAoIG9zIC4gcGF0aCAuIGpvaW4gKCBvMDAgLCAnaGlzdG9yeScgKSAsIG9vb29PMCAsIGFwcGVuZCA9IFRydWUgKQogZWxpZiAnSU1EQmlkcGxheScgaW4gc2l0ZV9uYW1lIDoKICBJaWlpMTExID0gImh0dHA6Ly93d3cub21kYmFwaS5jb20vP3Q9IgogIG8wID0gSWlpaTExMSArIHNlYXJjaF90ZXJtCiAgaWYgOTMgLSA5MzogaUkxSWkxMTExMWlJaSAqIGlpSUlJSUkxaTFpSQogIG9vID0gZGljdCAoIHsgJ1VzZXItQWdlbnQnIDogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgcnY6MzMuMCkgR2Vja28vMjAxMDAxMDEgRmlyZWZveC8zMy4wJyAsICdSZWZlcmVyJyA6ICdodHRwOi8vam9rZXIub3JnLycgLCAnQWNjZXB0LUVuY29kaW5nJyA6ICdnemlwLCBkZWZsYXRlJyAsICdDb250ZW50LVR5cGUnIDogJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcgLCAnQWNjZXB0JyA6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonIH0gKQogIGlmIDI3IC0gMjc6IG8wT28gKiBvb29PCiAgbzBPMG9vME9PME8gPSByZXF1ZXN0cyAuIGdldCAoIG8wICwgaGVhZGVycyA9IG9vICkKICBJaUlpSWkgPSBvME8wb28wT08wTyAuIGpzb24gKCApCiAgb08wb29vb28wTzAwID0gSWlJaUlpIFsgJ1Jlc3BvbnNlJyBdCiAgaWYgb08wb29vb28wTzAwID09ICdUcnVlJyA6CiAgIGlJSTExaWkxaWkgPSBJaUlpSWkgWyAnaW1kYklEJyBdCiAgIGlpaUkxSTExaTEgPSBJaUlpSWkgWyAnVGl0bGUnIF0gKyBJaUlpSWkgWyAnUmVsZWFzZWQnIF0KICAgaUlJSUkgPSB4Ym1jZ3VpIC4gRGlhbG9nICggKQogICBPME8wb29PT08gPSBpSUlJSSAuIHllc25vICggJ0NoZWNrIE1vdmllIFRpdGxlJyAsICdQTEFZIDo6ICVzID8nICUgaWlpSTFJMTFpMSApCiAgIGlmIE8wTzBvb09PTyA6CiAgICBvMCA9ICdwbHVnaW46Ly9wbHVnaW4udmlkZW8ucHVsc2FyL21vdmllLycgKyBpSUkxMWlpMWlpICsgJy9wbGF5JwogICAgb29vb08wID0gaWlpSTFJMTFpMSArICc6JyArIG8wICsgJ1xuJwogICAgT09vTzBvb09PICggaTEgLCBvb29vTzAgLCBhcHBlbmQgPSBUcnVlICkKICAgIHJldHVybiBvMAogIGVsc2UgOgogICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAiWEJNQy5Ob3RpZmljYXRpb24oTkpNU29jY2VyLE5vIElNREIgbWF0Y2ggZm91bmQgLDcwMDAsIiArIEkxMWkxaTExaTFJICsgIikiICkKICAgaWYgNTEgLSA1MTogb08wb29PICogb08wb29PCmRlZiBPT28wMDBvMCAoIHN0cmluZyApIDoKIGlmIGlzaW5zdGFuY2UgKCBzdHJpbmcgLCBiYXNlc3RyaW5nICkgOgogIGlmIGlzaW5zdGFuY2UgKCBzdHJpbmcgLCB1bmljb2RlICkgOgogICBzdHJpbmcgPSBzdHJpbmcgLiBlbmNvZGUgKCAnYXNjaWknICwgJ2lnbm9yZScgKQogcmV0dXJuIHN0cmluZwpkZWYgbzAwb28wT08wICggc3RyaW5nICwgZW5jb2RpbmcgPSAndXRmLTgnICkgOgogaWYgaXNpbnN0YW5jZSAoIHN0cmluZyAsIGJhc2VzdHJpbmcgKSA6CiAgaWYgbm90IGlzaW5zdGFuY2UgKCBzdHJpbmcgLCB1bmljb2RlICkgOgogICBzdHJpbmcgPSB1bmljb2RlICggc3RyaW5nICwgZW5jb2RpbmcgLCAnaWdub3JlJyApCiByZXR1cm4gc3RyaW5nCmRlZiBvTzBvMDAwT29vT29vICggcyApIDogcmV0dXJuICIiIC4gam9pbiAoIGZpbHRlciAoIGxhbWJkYSBJSWkxMWkgOiBvcmQgKCBJSWkxMWkgKSA8IDEyOCAsIHMgKSApCmlmIDg2IC0gODY6IGlpSUlJSUkxaTFpSQpkZWYgSWlJSTFpMWlJICggY29tbWFuZCApIDoKIElpSWlJaSA9ICcnCiB0cnkgOgogIElpSWlJaSA9IHhibWMgLiBleGVjdXRlSlNPTlJQQyAoIG8wMG9vME9PMCAoIGNvbW1hbmQgKSApCiBleGNlcHQgVW5pY29kZUVuY29kZUVycm9yIDoKICBJaUlpSWkgPSB4Ym1jIC4gZXhlY3V0ZUpTT05SUEMgKCBPT28wMDBvMCAoIGNvbW1hbmQgKSApCiAgaWYgODQgLSA4NDogT29vMCArIG9PMG9vTyArIGlpSUlJSUkxaTFpSSArIG9vTzBPb29vMDAKIHJldHVybiBvMDBvbzBPTzAgKCBJaUlpSWkgKQogaWYgNjIgLSA2MjogaTExaUlpaUlpaSArIE9Pb29PT28gKyBpMUlJaQogaWYgNjkgLSA2OTogT09vb09PbwpkZWYgSUlJSUkxMUkxSWlJICggKSA6CiBPTzBPbyA9IHhibWMgLiBnZXRTa2luRGlyICggKQogaWYgT08wT28gPT0gJ3NraW4uY29uZmx1ZW5jZScgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdDb250YWluZXIuU2V0Vmlld01vZGUoNTAwKScgKQogZWxpZiBPTzBPbyA9PSAnc2tpbi5hZW9uLm5veCcgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICdDb250YWluZXIuU2V0Vmlld01vZGUoNTExKScgKQogZWxzZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ0NvbnRhaW5lci5TZXRWaWV3TW9kZSg1MDApJyApCiAgaWYgMTMgLSAxMzogaWkxMWlpMWlpICogaTExaUlpaUlpaSAvIGkxMWlJaWlJaWkgLiBJMWlpMTFpSWkxMWkgLiBpaTFJSTExSTFpaTFJIC4gb08wb29PCiAgaWYgMjYgLSAyNjogaWkxMWlpMWlpIC4gaUlpaTFJMTFJMUlJMQpkZWYgb09vMCAoIHVybCApIDoKIEkxSWkxMWkgPSBvMDBvbzBPTzAgKCAneyJqc29ucnBjIjoiMi4wIiwibWV0aG9kIjoiRmlsZXMuR2V0RGlyZWN0b3J5IiwicGFyYW1zIjp7ImRpcmVjdG9yeSI6IiVzIiwibWVkaWEiOiJ2aWRlbyIsInByb3BlcnRpZXMiOlsidGh1bWJuYWlsIiwidGl0bGUiLCJ5ZWFyIiwiZGF0ZWFkZGVkIiwiZmFuYXJ0IiwicmF0aW5nIiwic2Vhc29uIiwiZXBpc29kZSIsInN0dWRpbyJdfSwiaWQiOjF9JyApICUgdXJsCiBpZiAxOSAtIDE5OiBPb28wIC0gaWkxMWlpMWlpIC4gaUlpaTFJMTFJMUlJMSAuIE9Pb29PT28gLyBpaTFJSTExSTFpaTFJCiBPT08wTzAwT28gPSBqc29uIC4gbG9hZHMgKCBJaUlJMWkxaUkgKCBJMUlpMTFpICkgKQogZm9yIEkxaTFpaWkgaW4gT09PME8wME9vIFsgJ3Jlc3VsdCcgXSBbICdmaWxlcycgXSA6CiAgdXJsID0gSTFpMWlpaSBbICdmaWxlJyBdCiAgaWlpSTFJMTFpMSA9IG9PMG8wMDBPb29Pb28gKCBJMWkxaWlpIFsgJ2xhYmVsJyBdICkKICBJMWlJMTFJaSA9IG9PMG8wMDBPb29Pb28gKCBJMWkxaWlpIFsgJ3RodW1ibmFpbCcgXSApCiAgdHJ5IDoKICAgb29vID0gb08wbzAwME9vb09vbyAoIEkxaTFpaWkgWyAnZmFuYXJ0JyBdICkKICBleGNlcHQgRXhjZXB0aW9uIDoKICAgb29vID0gJycKICB0cnkgOgogICBPT29vME8wID0gSTFpMWlpaSBbICd5ZWFyJyBdCiAgZXhjZXB0IEV4Y2VwdGlvbiA6CiAgIE9Pb28wTzAgPSAnJwogIHRyeSA6CiAgIGlpMW9PT08wb29PTyA9IEkxaTFpaWkgWyAnZXBpc29kZScgXQogICBpMTFJaUkxaWlJMTEgPSBJMWkxaWlpIFsgJ3NlYXNvbicgXQogICBpZiBpaTFvT09PMG9vT08gPT0gLSAxIG9yIGkxMUlpSTFpaUkxMSA9PSAtIDEgOgogICAgSTFpMWkxMSA9ICcnCiAgIGVsc2UgOgogICAgSTFpMWkxMSA9ICdbQ09MT1IgeWVsbG93XSBTJyArIHN0ciAoIGkxMUlpSTFpaUkxMSApICsgJ1svQ09MT1JdW0NPTE9SIGhvdHBpbmtdIEUnICsgc3RyICggaWkxb09PTzBvb09PICkgKyAnWy9DT0xPUl0nCiAgZXhjZXB0IEV4Y2VwdGlvbiA6CiAgIEkxaTFpMTEgPSAnJwogIHRyeSA6CiAgIE9Pb09PT08wMCA9IEkxaTFpaWkgWyAnc3R1ZGlvJyBdCiAgIGlmIE9Pb09PT08wMCA6CiAgICBJMWkxaTExICs9ICdcbiBTdHVkaW86W0NPTE9SIHN0ZWVsYmx1ZV0gJyArIE9Pb09PT08wMCBbIDAgXSArICdbL0NPTE9SXScKICBleGNlcHQgRXhjZXB0aW9uIDoKICAgT09vT09PTzAwID0gJycKICAgaWYgNDkgLSA0OTogSTFpaTExaUlpMTFpIC0gTzAgLyBJMWlpMTFpSWkxMWkgKiBPT29vT09vICsgTzAwT29Pb28wMAogIGlmIEkxaTFpaWkgWyAnZmlsZXR5cGUnIF0gPT0gJ2ZpbGUnIDoKICAgSTFpMUlpaWlpICggdXJsICwgaWlpSTFJMTFpMSAsIEkxaUkxMUlpICwgb29vICwgSTFpMWkxMSAsICcnICwgT09vbzBPMCAsICcnICwgTm9uZSAsICcnICwgdG90YWwgPSBsZW4gKCBPT08wTzAwT28gWyAncmVzdWx0JyBdIFsgJ2ZpbGVzJyBdICkgKQogICBpZiAzNSAtIDM1OiBvTzBPb29Pb08gLiBvME9vIC8gaTFJSWkgLyBvME9vICogaUkxSWkxMTExMWlJaQogICBpZiA4NSAtIDg1OiBvTzBPb29Pb08gLiBvb29PICUgaWkxSUkxMUkxaWkxSSAlIG9PMG8wb29PMAogIGVsc2UgOgogICBJaTFJICggaWlpSTFJMTFpMSAsIHVybCAsIDUzICwgSTFpSTExSWkgLCBvb28gLCBJMWkxaTExICwgJycgLCBPT29vME8wICwgJycgKQogICBpZiA4MCAtIDgwOiBpSTFJaTExMTExaUlpICogb08wbzBvb08wIC8gaUlpaTFJMTFJMUlJMSAlIGlJMUlpMTExMTFpSWkgLyBpSWlpMUkxMUkxSUkxCiAgIGlmIDQyIC0gNDI6IGkxSUlpIC8gaTExaUlpaUlpaSAuIG9PbzBPME9vbyAqIG9vTzBPb29vMDAgLiBpMTFpSWlpSWlpICogTzAKZGVmIEkxaTFJaWlpaSAoIHVybCAsIG5hbWUgLCBpY29uaW1hZ2UgLCBmYW5hcnQgLCBkZXNjcmlwdGlvbiAsIGdlbnJlICwgZGF0ZSAsIHNob3djb250ZXh0ICwgcGxheWxpc3QgLCByZWdleHMgLCB0b3RhbCAsIHNldENvb2tpZSA9ICIiICkgOgogaWYgNDQgLSA0NDogaTFJSWkgLiBvME9vIC8gaTExaUlpaUlpaSArIE9vbzAKIG9PbzAwbyA9IFsgXQogdHJ5IDoKICBuYW1lID0gbmFtZSAuIGVuY29kZSAoICd1dGYtOCcgKQogZXhjZXB0IDogcGFzcwogTzAwbzAgPSBUcnVlCiBpZiAyNyAtIDI3OiBpaTFJSTExSTFpaTFJCiBpZiByZWdleHMgOgogIE8wT08wb29PMDAgPSAnMTcnCiAgaWYgODMgLSA4MzogaUlpaTFJMTFJMUlJMQogIG9PbzAwbyAuIGFwcGVuZCAoICggJ1tDT0xPUiB3aGl0ZV0hIURvd25sb2FkIEN1cnJlbnRseSBQbGF5aW5nISFbL0NPTE9SXScgLCAnWEJNQy5SdW5QbHVnaW4oJXM/dXJsPSVzJm1vZGU9MjEmbmFtZT0lcyknCiAlICggc3lzIC4gYXJndiBbIDAgXSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBuYW1lICkgKSApICkKIGVsaWYgYW55ICggeCBpbiB1cmwgZm9yIHggaW4gaTFJaUkxSTExICkgYW5kIHVybCAuIHN0YXJ0c3dpdGggKCAnaHR0cCcgKSA6CiAgTzBPTzBvb08wMCA9ICcxOScKICBpZiA2MyAtIDYzOiBPb29vb29vb09PICogSTFpaTExaUlpMTFpIC8gb08wbzBvb08wIC0gaUkxSWkxMTExMWlJaSAuIGlJaWkxSTExSTFJSTEgKyBvb08wT29vbzAwCiAgb09vMDBvIC4gYXBwZW5kICggKCAnW0NPTE9SIHdoaXRlXSEhRG93bmxvYWQgQ3VycmVudGx5IFBsYXlpbmchIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yMSZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogZWxpZiB1cmwgLiBlbmRzd2l0aCAoICcmbW9kZT0xOCcgKSA6CiAgdXJsID0gdXJsIC4gcmVwbGFjZSAoICcmbW9kZT0xOCcgLCAnJyApCiAgTzBPTzBvb08wMCA9ICcxOCcKICBpZiA0NCAtIDQ0OiBpMUlJaSAlIG8wT28gJSBpaTExaWkxaWkKICBvT28wMG8gLiBhcHBlbmQgKCAoICdbQ09MT1Igd2hpdGVdISFEb3dubG9hZCEhWy9DT0xPUl0nICwgJ1hCTUMuUnVuUGx1Z2luKCVzP3VybD0lcyZtb2RlPTIzJm5hbWU9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICkgKSApCiAgaWYgbzBvTzAgLiBnZXRTZXR0aW5nICggJ2RsYXVkaW9vbmx5JyApID09ICd0cnVlJyA6CiAgIG9PbzAwbyAuIGFwcGVuZCAoICggJyEhRG93bmxvYWQgW0NPTE9SIHNlYWJsdWVdQXVkaW8hIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yNCZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogZWxpZiB1cmwgLiBzdGFydHN3aXRoICggJ21hZ25ldDo/eHQ9JyApIG9yICcudG9ycmVudCcgaW4gdXJsIDoKICBpZiA5IC0gOTogb09vME8wT29vICUgT29vb29vb29PTyAtIGlpSUlJSUkxaTFpSQogIGlmICcmJyBpbiB1cmwgYW5kIG5vdCAnJmFtcDsnIGluIHVybCA6CiAgIHVybCA9IHVybCAuIHJlcGxhY2UgKCAnJicgLCAnJmFtcDsnICkKICB1cmwgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnB1bHNhci9wbGF5P3VyaT0nICsgdXJsCiAgTzBPTzBvb08wMCA9ICcxMicKICBpZiA0MyAtIDQzOiBJMWlpMTFpSWkxMWkgJSBJMWlpMTFpSWkxMWkKIGVsc2UgOgogIE8wT08wb29PMDAgPSAnMTInCiAgaWYgNDYgLSA0Njogb09vME8wT29vICUgaUlpaTFJMTFJMUlJMSAuIG9vTzBPb29vMDAgLiBPMCAqIG9vb08gLyBPb29vb29vb09PCiAgb09vMDBvIC4gYXBwZW5kICggKCAnW0NPTE9SIHdoaXRlXSEhRG93bmxvYWQgQ3VycmVudGx5IFBsYXlpbmchIVsvQ09MT1JdJyAsICdYQk1DLlJ1blBsdWdpbiglcz91cmw9JXMmbW9kZT0yMSZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHVybCApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkgKQogSWlpSWkxMUlpMWlJMSA9IHN5cyAuIGFyZ3YgWyAwIF0gKyAiPyIKIElJMWlJMUlJaSA9IEZhbHNlCiBpZiA0MSAtIDQxOiBvME9vIC0gTzAwT29Pb28wMCAlIG9PME9vb09vTyAuIE8wME9vT29vMDAgLSBvTzBvMG9vTzAKIGlmIHBsYXlsaXN0IDoKICBpZiBvMG9PMCAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApID09ICJmYWxzZSIgOgogICBJaWlJaTExSWkxaUkxICs9ICJ1cmw9IiArIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSArICImbW9kZT0iICsgTzBPTzBvb08wMAogIGVsc2UgOgogICBJaWlJaTExSWkxaUkxICs9ICJtb2RlPTEzJm5hbWU9JXMmcGxheWxpc3Q9JXMiICUgKCB1cmxsaWIgLiBxdW90ZV9wbHVzICggbmFtZSApICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIHN0ciAoIHBsYXlsaXN0ICkgLiByZXBsYWNlICggJywnICwgJ3x8JyApICkgKQogICBuYW1lID0gbmFtZSArICdbQ09MT1IgbWFnZW50YV0gKCcgKyBzdHIgKCBsZW4gKCBwbGF5bGlzdCApICkgKyAnIGl0ZW1zIClbL0NPTE9SXScKICAgSUkxaUkxSUlpID0gVHJ1ZQogZWxzZSA6CiAgSWlpSWkxMUlpMWlJMSArPSAidXJsPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggdXJsICkgKyAiJm1vZGU9IiArIE8wT08wb29PMDAKIGlmIHJlZ2V4cyA6CiAgSWlpSWkxMUlpMWlJMSArPSAiJnJlZ2V4cz0iICsgcmVnZXhzCiBpZiBub3Qgc2V0Q29va2llID09ICcnIDoKICBJaWlJaTExSWkxaUkxICs9ICImc2V0Q29va2llPSIgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggc2V0Q29va2llICkKICBpZiA0NSAtIDQ1OiBpaUlJSUlJMWkxaUkgLSBpaTFJSTExSTFpaTFJCiBpZiBkYXRlID09ICcnIDoKICBkYXRlID0gTm9uZQogZWxzZSA6CiAgZGVzY3JpcHRpb24gKz0gJ1xuXG5EYXRlOiAlcycgJSBkYXRlCiBPT09vT28gPSB4Ym1jZ3VpIC4gTGlzdEl0ZW0gKCBuYW1lICwgaWNvbkltYWdlID0gIkRlZmF1bHRWaWRlby5wbmciICwgdGh1bWJuYWlsSW1hZ2UgPSBpY29uaW1hZ2UgKQogT09Pb09vIC4gc2V0SW5mbyAoIHR5cGUgPSAiVmlkZW8iICwgaW5mb0xhYmVscyA9IHsgIlRpdGxlIiA6IG5hbWUgLCAiUGxvdCIgOiBkZXNjcmlwdGlvbiAsICJHZW5yZSIgOiBnZW5yZSAsICJkYXRlYWRkZWQiIDogZGF0ZSB9ICkKIE9PT29PbyAuIHNldFByb3BlcnR5ICggIkZhbmFydF9JbWFnZSIgLCBmYW5hcnQgKQogaWYgNzAgLSA3MDogSTFpaTExaUlpMTFpICUgbzBPbyAvIG8wT28gLiBvTzBvMG9vTzAgJSBvb29PIC4gb08wT29vT29PCiBpZiAoIG5vdCBJSTFpSTFJSWkgKSBhbmQgbm90IGFueSAoIHggaW4gdXJsIGZvciB4IGluIElJaUlpSUkxMWkgKSA6CiAgaWYgcmVnZXhzIDoKICAgaWYgJyRweUZ1bmN0aW9uOnBsYXltZWRpYSgnIG5vdCBpbiB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCByZWdleHMgKSBhbmQgJ25vdHBsYXlhYmxlJyBub3QgaW4gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggcmVnZXhzICkgOgogICAgaWYgMTAgLSAxMDogaWlJSUlJSTFpMWlJIC0gaTExaUlpaUlpaSAuIG9PMG9vTyAlIGkxSUlpCiAgICBPT09vT28gLiBzZXRQcm9wZXJ0eSAoICdJc1BsYXlhYmxlJyAsICd0cnVlJyApCiAgZWxzZSA6CiAgIE9PT29PbyAuIHNldFByb3BlcnR5ICggJ0lzUGxheWFibGUnICwgJ3RydWUnICkKIGVsc2UgOgogIG8wTzAgKCAnTk9UIHNldHRpbmcgaXNwbGF5YWJsZScgKyB1cmwgKQogIGlmIDc4IC0gNzg6IGlJaWkxSTExSTFJSTEgKiBvT28wTzBPb28gLiBvT28wTzBPb28gLSBpaTFJSTExSTFpaTFJIC4gaUlpaTFJMTFJMUlJMQogaWYgc2hvd2NvbnRleHQgOgogIG9PbzAwbyA9IFsgXQogIGlmIHNob3djb250ZXh0ID09ICdmYXYnIDoKICAgb09vMDBvIC4gYXBwZW5kICgKICggJ1JlbW92ZSBmcm9tIE5KTVNvY2NlciBGYXZvcml0ZXMnICwgJ1hCTUMuUnVuUGx1Z2luKCVzP21vZGU9NiZuYW1lPSVzKScKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSApICkKICkKICBlbGlmIG5vdCBuYW1lIGluIE9vT29vT09PTyA6CiAgIEkxMTFJMUkgPSAoCiAnJXM/bW9kZT01Jm5hbWU9JXMmdXJsPSVzJmljb25pbWFnZT0lcyZmYW5hcnQ9JXMmZmF2X21vZGU9MCcKICUgKCBzeXMgLiBhcmd2IFsgMCBdICwgdXJsbGliIC4gcXVvdGVfcGx1cyAoIG5hbWUgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCB1cmwgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBpY29uaW1hZ2UgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBmYW5hcnQgKSApCiApCiAgIGlmIHBsYXlsaXN0IDoKICAgIEkxMTFJMUkgKz0gJ3BsYXlsaXN0PScgKyB1cmxsaWIgLiBxdW90ZV9wbHVzICggc3RyICggcGxheWxpc3QgKSAuIHJlcGxhY2UgKCAnLCcgLCAnfHwnICkgKQogICBpZiByZWdleHMgOgogICAgSTExMUkxSSArPSAiJnJlZ2V4cz0iICsgcmVnZXhzCiAgIG9PbzAwbyAuIGFwcGVuZCAoICggJ0FkZCB0byBOSk1Tb2NjZXIgRmF2b3JpdGVzJyAsICdYQk1DLlJ1blBsdWdpbiglcyknICUgSTExMUkxSSApICkKICBPT09vT28gLiBhZGRDb250ZXh0TWVudUl0ZW1zICggb09vMDBvICkKICBpZiA1NCAtIDU0OiBvTzBPb29Pb08gKyBvTzBvMG9vTzAgJSBvTzBvMG9vTzAgJSBpaTExaWkxaWkKIGlmIG5vdCBwbGF5bGlzdCBpcyBOb25lIDoKICBpZiBvMG9PMCAuIGdldFNldHRpbmcgKCAnYWRkX3BsYXlsaXN0JyApID09ICJmYWxzZSIgOgogICBpMUlpMTFpaSA9IG5hbWUgLiBzcGxpdCAoICcpICcgKSBbIDEgXQogICBvT09PT09vID0gWwogKCAnUGxheSAnICsgaTFJaTExaWkgKyAnIFBsYXlMaXN0JyAsICdYQk1DLlJ1blBsdWdpbiglcz9tb2RlPTEzJm5hbWU9JXMmcGxheWxpc3Q9JXMpJwogJSAoIHN5cyAuIGFyZ3YgWyAwIF0gLCB1cmxsaWIgLiBxdW90ZV9wbHVzICggaTFJaTExaWkgKSAsIHVybGxpYiAuIHF1b3RlX3BsdXMgKCBzdHIgKCBwbGF5bGlzdCApIC4gcmVwbGFjZSAoICcsJyAsICd8fCcgKSApICkgKQogXQogICBPT09vT28gLiBhZGRDb250ZXh0TWVudUl0ZW1zICggb09PT09PbyApCiAgIGlmIDUwIC0gNTA6IE8wME9vT29vMDAgKyBvb29PICsgb29PME9vb28wMAogICBpZiAxNSAtIDE1OiBvTzBvMG9vTzAKIE8wMG8wID0geGJtY3BsdWdpbiAuIGFkZERpcmVjdG9yeUl0ZW0gKCBoYW5kbGUgPSBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB1cmwgPSBJaWlJaTExSWkxaUkxICwgbGlzdGl0ZW0gPSBPT09vT28gLCB0b3RhbEl0ZW1zID0gdG90YWwgKQogaWYgMTMgLSAxMzogaUlpaTFJMTFJMUlJMSAqIE9Pb29PT28gLyBPMDBPb09vbzAwICUgb29vTyArIGlJMUlpMTExMTFpSWkKIHJldHVybiBPMDBvMAogaWYgNDEgLSA0MTogb08wb29PCmRlZiBpMWlJMWkgKCB1cmwgLCBuYW1lICwgaWNvbmltYWdlICwgc2V0cmVzb2x2ZWQgPSBUcnVlICkgOgogaWYgc2V0cmVzb2x2ZWQgOgogIE9PT29PbyA9IHhibWNndWkgLiBMaXN0SXRlbSAoIG5hbWUgLCBpY29uSW1hZ2UgPSBpY29uaW1hZ2UgKQogIE9PT29PbyAuIHNldEluZm8gKCB0eXBlID0gJ1ZpZGVvJyAsIGluZm9MYWJlbHMgPSB7ICdUaXRsZScgOiBuYW1lIH0gKQogIE9PT29PbyAuIHNldFByb3BlcnR5ICggIklzUGxheWFibGUiICwgInRydWUiICkKICBPT09vT28gLiBzZXRQYXRoICggc3RyICggdXJsICkgKQogIHhibWNwbHVnaW4gLiBzZXRSZXNvbHZlZFVybCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIFRydWUgLCBPT09vT28gKQogZWxzZSA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggJ1hCTUMuUnVuUGx1Z2luKCcgKyB1cmwgKyAnKScgKQogIGlmIDU5IC0gNTk6IE9vbzAKICBpZiA4OSAtIDg5OiBPT29vT09vICUgaUlpaTFJMTFJMUlJMQogIGlmIDM1IC0gMzU6IG9PMG9vTyArIE8wME9vT29vMDAgLSBPT29vT09vICUgaUkxSWkxMTExMWlJaSAlIGlpMTFpaTFpaSAlIE9Pb29PT28KICBpZiA0NSAtIDQ1OiBvME9vICogaWkxSUkxMUkxaWkxSSAlIEkxaWkxMWlJaTExaQpkZWYgb08wME8wICggbGluayApIDoKIG8wID0gdXJsbGliIC4gdXJsb3BlbiAoIGxpbmsgKQogaTExMUkxMUkgPSBvMCAuIHJlYWQgKCApCiBvMCAuIGNsb3NlICggKQogT29Pb09Pb08gPSBpMTExSTExSSAuIHNwbGl0ICggIkpldHp0IiApCiBpaTFpaTFpMTFJMUkgPSBPb09vT09vTyBbIDEgXSAuIHNwbGl0ICggJ3Byb2dyYW1tL2RldGFpbC5waHA/Y29uc3RfaWQ9JyApCiBpaUlJMWlpaWlpaWkgPSBpaTFpaTFpMTFJMUkgWyAxIF0gLiBzcGxpdCAoICc8YnIgLz48YSBocmVmPSIvJyApCiBpaUlpaWkgPSBpaUlJMWlpaWlpaWkgWyAwIF0gWyA0MCA6IGxlbiAoIGlpSUkxaWlpaWlpaSBbIDAgXSApIF0KIGlpSTFpaSA9IGlpMWlpMWkxMUkxSSBbIDIgXSAuIHNwbGl0ICggIjwvYT48L3A+PC9kaXY+IiApCiBPME9vb09PID0gaWlJMWlpIFsgMCBdIFsgMTcgOiBsZW4gKCBpaUkxaWkgWyAwIF0gKSBdCiBPME9vb09PID0gTzBPb29PTyAuIGVuY29kZSAoICd1dGYtOCcgKQogcmV0dXJuICIgIC0gIiArIE8wT29vT08gKyAiIC0gIiArIGlpSWlpaQogaWYgNDkgLSA0OTogT29vMCAvIG9vb08gLyBpaTFJSTExSTFpaTFJCiBpZiAyNSAtIDI1OiBvME9vICUgTzAgKyBpMUlJaSAtIG9vb08KZGVmIG9Pb08wMG8gKCB1cmwgLCByZWdleCApIDoKIElpSWlJaSA9IG9vaWlpMTFpSUkgKCB1cmwgKQogdHJ5IDoKICBvTyA9IHJlIC4gZmluZGFsbCAoIHJlZ2V4ICwgSWlJaUlpICkgWyAwIF0KICByZXR1cm4gb08KIGV4Y2VwdCA6CiAgbzBPMCAoICdyZWdleCBmYWlsZWQnICkKICBvME8wICggcmVnZXggKQogIHJldHVybgogIGlmIDM4IC0gMzg6IGlpMTFpaTFpaSAlIE8wME9vT29vMDAgKyBpMTFpSWlpSWlpICsgb29PME9vb28wMCArIG9vb08gLyBpMTFpSWlpSWlpCiAgaWYgOTQgLSA5NDogb29PME9vb28wMCAtIG9PbzBPME9vbyArIGlJMUlpMTExMTFpSWkKeGJtY3BsdWdpbiAuIHNldENvbnRlbnQgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCAnbW92aWVzJyApCmlmIDU5IC0gNTk6IG9PMG8wb29PMCAuIG8wT28gLSBpSWlpMUkxMUkxSUkxICsgaUlpaTFJMTFJMUlJMQp0cnkgOgogeGJtY3BsdWdpbiAuIGFkZFNvcnRNZXRob2QgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB4Ym1jcGx1Z2luIC4gU09SVF9NRVRIT0RfVU5TT1JURUQgKQpleGNlcHQgOgogcGFzcwp0cnkgOgogeGJtY3BsdWdpbiAuIGFkZFNvcnRNZXRob2QgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB4Ym1jcGx1Z2luIC4gU09SVF9NRVRIT0RfTEFCRUwgKQpleGNlcHQgOgogcGFzcwp0cnkgOgogeGJtY3BsdWdpbiAuIGFkZFNvcnRNZXRob2QgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgLCB4Ym1jcGx1Z2luIC4gU09SVF9NRVRIT0RfREFURSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiB4Ym1jcGx1Z2luIC4gYWRkU29ydE1ldGhvZCAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSAsIHhibWNwbHVnaW4gLiBTT1JUX01FVEhPRF9HRU5SRSApCmV4Y2VwdCA6CiBwYXNzCiBpZiA1NiAtIDU2OiBpSTFJaTExMTExaUlpICsgb29vTwpJSTFJSTFpSSA9IElpMTFpSTFJSTExaWkgKCApCmlmIDMyIC0gMzI6IG9PME9vb09vTyArIE9Pb29PT28gJSBvb29PIC8gT09vb09PbyArIG9PMG9vTwpvMCA9IE5vbmUKaWlpSTFJMTFpMSA9IE5vbmUKTzBPTzBvb08wMCA9IE5vbmUKaWkxMWkxaUlpSUkxID0gTm9uZQpvbzBvb29vbzAwbyA9IE5vbmUKb29vID0gSWlpaQppaTExaTFpSWlJSTEgPSBOb25lCklpSTExSTExMSA9IE5vbmUKb29vT09vT08gPSBOb25lCmlmIDU0IC0gNTQ6IE8wIC0gb29PME9vb28wMCAuIGlpMUlJMTFJMWlpMUkgJSBvb08wT29vbzAwICsgb29PME9vb28wMAp0cnkgOgogbzAgPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBJSTFJSTFpSSBbICJ1cmwiIF0gKSAuIGRlY29kZSAoICd1dGYtOCcgKQpleGNlcHQgOgogcGFzcwp0cnkgOgogaWlpSTFJMTFpMSA9IHVybGxpYiAuIHVucXVvdGVfcGx1cyAoIElJMUlJMWlJIFsgIm5hbWUiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogb28wb29vb28wMG8gPSB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBJSTFJSTFpSSBbICJpY29uaW1hZ2UiIF0gKQpleGNlcHQgOgogcGFzcwp0cnkgOgogb29vID0gdXJsbGliIC4gdW5xdW90ZV9wbHVzICggSUkxSUkxaUkgWyAiZmFuYXJ0IiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIE8wT08wb29PMDAgPSBpbnQgKCBJSTFJSTFpSSBbICJtb2RlIiBdICkKZXhjZXB0IDoKIHBhc3MKdHJ5IDoKIGlpMTFpMWlJaUlJMSA9IGV2YWwgKCB1cmxsaWIgLiB1bnF1b3RlX3BsdXMgKCBJSTFJSTFpSSBbICJwbGF5bGlzdCIgXSApIC4gcmVwbGFjZSAoICd8fCcgLCAnLCcgKSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBJaUkxMUkxMTEgPSBpbnQgKCBJSTFJSTFpSSBbICJmYXZfbW9kZSIgXSApCmV4Y2VwdCA6CiBwYXNzCnRyeSA6CiBvb29PT29PTyA9IElJMUlJMWlJIFsgInJlZ2V4cyIgXQpleGNlcHQgOgogcGFzcwogaWYgMzYgLSAzNjogaWkxSUkxMUkxaWkxSSAlIGkxMWlJaWlJaWkKbzBPMCAoICJNb2RlOiAiICsgc3RyICggTzBPTzBvb08wMCApICkKaWYgbm90IG8wIGlzIE5vbmUgOgogbzBPMCAoICJVUkw6ICIgKyBzdHIgKCBvMCAuIGVuY29kZSAoICd1dGYtOCcgKSApICkKbzBPMCAoICJOYW1lOiAiICsgc3RyICggaWlpSTFJMTFpMSApICkKaWYgNDcgLSA0NzogaTFJSWkgKyBvTzBPb29Pb08gLiBvT28wTzBPb28gKiBpSTFJaTExMTExaUlpIC4gb08wbzBvb08wIC8gaTFJSWkKaWYgTzBPTzBvb08wMCA9PSBOb25lIDoKIG8wTzAgKCAiSW5kZXgiICkKIE9vb29vME9vMDBvTzAgKCApCiBpZiA1MCAtIDUwOiBPMDBPb09vbzAwIC8gaTFJSWkgJSBPb29vb29vb09PCmVsaWYgTzBPTzBvb08wMCA9PSAxIDoKIG8wTzAgKCAiZ2V0RGF0YSIgKQogSWlpaTExSTFpMUlpMSAoIG8wICwgb29vICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiA4MyAtIDgzOiBvTzBvb08gKiBvTzBvb08gKyBpaTFJSTExSTFpaTFJCmVsaWYgTzBPTzBvb08wMCA9PSAyIDoKIG8wTzAgKCAiZ2V0Q2hhbm5lbEl0ZW1zIiApCiBPME9PME8gKCBpaWlJMUkxMWkxICwgbzAgLCBvb28gKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDU3IC0gNTc6IE8wIC0gTzAgLiBvTzBvb08gLyBpaTExaWkxaWkgLyBpaUlJSUlJMWkxaUkKZWxpZiBPME9PMG9vTzAwID09IDMgOgogbzBPMCAoICJnZXRTdWJDaGFubmVsSXRlbXMiICkKIElpMUkxSWkgKCBpaWlJMUkxMWkxICwgbzAgLCBvb28gKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDIwIC0gMjA6IGlpMUlJMTFJMWlpMUkgKiBvTzBPb29Pb08gLSBPT29vT09vIC0gaUkxSWkxMTExMWlJaSAqIE8wME9vT29vMDAKZWxpZiBPME9PMG9vTzAwID09IDQgOgogbzBPMCAoICJnZXRGYXZvcml0ZXMiICkKIGkxMUkxSSAoICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiA2IC0gNjogb29vTyArIGlpMUlJMTFJMWlpMUkgLyBvT28wTzBPb28gKyBPb28wICUgb08wT29vT29PIC8gSTFpaTExaUlpMTFpCmVsaWYgTzBPTzBvb08wMCA9PSA1IDoKIG8wTzAgKCAiYWRkRmF2b3JpdGUiICkKIHRyeSA6CiAgaWlpSTFJMTFpMSA9IGlpaUkxSTExaTEgLiBzcGxpdCAoICdcXCAnICkgWyAxIF0KIGV4Y2VwdCA6CiAgcGFzcwogdHJ5IDoKICBpaWlJMUkxMWkxID0gaWlpSTFJMTFpMSAuIHNwbGl0ICggJyAgLSAnICkgWyAwIF0KIGV4Y2VwdCA6CiAgcGFzcwogb29Pb29vbzAgKCBpaWlJMUkxMWkxICwgbzAgLCBvbzBvb29vbzAwbyAsIG9vbyAsIElpSTExSTExMSApCiBpZiA0NSAtIDQ1OiBPb29vb29vb09PCmVsaWYgTzBPTzBvb08wMCA9PSA2IDoKIG8wTzAgKCAicm1GYXZvcml0ZSIgKQogdHJ5IDoKICBpaWlJMUkxMWkxID0gaWlpSTFJMTFpMSAuIHNwbGl0ICggJ1xcICcgKSBbIDEgXQogZXhjZXB0IDoKICBwYXNzCiB0cnkgOgogIGlpaUkxSTExaTEgPSBpaWlJMUkxMWkxIC4gc3BsaXQgKCAnICAtICcgKSBbIDAgXQogZXhjZXB0IDoKICBwYXNzCiBJaUlJaWlJICggaWlpSTFJMTFpMSApCiBpZiA5IC0gOTogb08wbzBvb08wIC4gSTFpaTExaUlpMTFpICogaTFJSWkgLiBPb29vb29vb09PCmVsaWYgTzBPTzBvb08wMCA9PSA3IDoKIG8wTzAgKCAiYWRkU291cmNlIiApCiBJMUlJMUlJSTExaWlpICggbzAgKQogaWYgMzIgLSAzMjogT09vb09PbyAuIG9PMG9vTyAlIG8wT28gLSBvTzBPb29Pb08KZWxpZiBPME9PMG9vTzAwID09IDggOgogbzBPMCAoICJybVNvdXJjZSIgKQogTzBPb08wTzAwbzBvTyAoIGlpaUkxSTExaTEgKQogaWYgMTEgLSAxMTogTzAgKyBvME9vCmVsaWYgTzBPTzBvb08wMCA9PSA5IDoKIG8wTzAgKCAiZG93bmxvYWRfZmlsZSIgKQogT28wME8wT08gKCBpaWlJMUkxMWkxICwgbzAgKQogaWYgODAgLSA4MDogaUkxSWkxMTExMWlJaSAlIGlJMUlpMTExMTFpSWkgJSBPMCAtIGkxMWlJaWlJaWkgLiBvb08wT29vbzAwIC8gTzAKZWxpZiBPME9PMG9vTzAwID09IDEwIDoKIG8wTzAgKCAiZ2V0Q29tbXVuaXR5U291cmNlcyIgKQogb28wTyAoICkKIGlmIDEzIC0gMTM6IG8wT28gKyBPMCAtIG9PMG9vTyAlIG9PbzBPME9vbyAvIGlpSUlJSUkxaTFpSSAuIGkxSUlpCmVsaWYgTzBPTzBvb08wMCA9PSAxMSA6CiBvME8wICggImFkZFNvdXJjZSIgKQogSTFJSTFJSUkxMWlpaSAoIG8wICkKIGlmIDYwIC0gNjA6IG9PbzBPME9vbyAuIE9vbzAgJSBvME9vIC0gTzAwT29Pb28wMAplbGlmIE8wT08wb29PMDAgPT0gMTIgOgogbzBPMCAoICJzZXRSZXNvbHZlZFVybCIgKQogaWYgbm90IG8wIC4gc3RhcnRzd2l0aCAoICJwbHVnaW46Ly9wbHVnaW4iICkgb3Igbm90IGFueSAoIHggaW4gbzAgZm9yIHggaW4gSUlpSWlJSTExaSApIDoKICBvTyA9IHhibWNndWkgLiBMaXN0SXRlbSAoIHBhdGggPSBvMCApCiAgeGJtY3BsdWdpbiAuIHNldFJlc29sdmVkVXJsICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICwgVHJ1ZSAsIG9PICkKIGVsc2UgOgogIHByaW50ICdOb3Qgc2V0dGluZyBzZXRSZXNvbHZlZFVybCcKICB4Ym1jIC4gZXhlY3V0ZWJ1aWx0aW4gKCAnWEJNQy5SdW5QbHVnaW4oJyArIG8wICsgJyknICkKICBpZiA3OSAtIDc5OiBPb29vb29vb09PIC8gb08wb29PIC4gTzAKICBpZiA3OSAtIDc5OiBpSTFJaTExMTExaUlpIC0gb08wT29vT29PCmVsaWYgTzBPTzBvb08wMCA9PSAxMyA6CiBvME8wICggInBsYXlfcGxheWxpc3QiICkKIG9vb28wTzBvME9vT08gKCBpaWlJMUkxMWkxICwgaWkxMWkxaUlpSUkxICkKIGlmIDQzIC0gNDM6IGkxSUlpICsgTzAgJSBJMWlpMTFpSWkxMWkgLyBpaUlJSUlJMWkxaUkgKiBvME9vCmVsaWYgTzBPTzBvb08wMCA9PSAxNCA6CiBvME8wICggImdldF94bWxfZGF0YWJhc2UiICkKIEkxaTFJaUkxICggbzAgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDg5IC0gODk6IG8wT28gLiBvT28wTzBPb28gKyBvTzBvb08gLiBPMCAlIGlpMTFpaTFpaQplbGlmIE8wT08wb29PMDAgPT0gMTUgOgogbzBPMCAoICJicm93c2VfeG1sX2RhdGFiYXNlIiApCiBJMWkxSWlJMSAoIG8wICwgVHJ1ZSApCiB4Ym1jcGx1Z2luIC4gZW5kT2ZEaXJlY3RvcnkgKCBpbnQgKCBzeXMgLiBhcmd2IFsgMSBdICkgKQogaWYgODQgLSA4NDogT29vb29vb29PTyArIE8wME9vT29vMDAgLyBvME9vICUgaWkxSUkxMUkxaWkxSSAlIG9PMG9vTyAqIG8wT28KZWxpZiBPME9PMG9vTzAwID09IDE2IDoKIG8wTzAgKCAiYnJvd3NlX2NvbW11bml0eSIgKQogb28wTyAoIFRydWUgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKIGlmIDU4IC0gNTg6IEkxaWkxMWlJaTExaSAtIE9Pb29PT28gLiBpMTFpSWlpSWlpICUgaTExaUlpaUlpaSAvIGkxSUlpIC8gaUkxSWkxMTExMWlJaQplbGlmIE8wT08wb29PMDAgPT0gMTcgOgogbzBPMCAoICJnZXRSZWdleFBhcnNlZCIgKQogbzAgLCBpMWlJaSA9IE9vT0lpaWlpaTExMWkxaWkgKCBvb29PT29PTyAsIG8wICkKIGlmIG8wIDoKICBpMWlJMWkgKCBvMCAsIGlpaUkxSTExaTEgLCBvbzBvb29vbzAwbyAsIGkxaUlpICkKIGVsc2UgOgogIHhibWMgLiBleGVjdXRlYnVpbHRpbiAoICJYQk1DLk5vdGlmaWNhdGlvbihOSk1Tb2NjZXIsRmFpbGVkIHRvIGV4dHJhY3QgcmVnZXguIC0gIiArICJ0aGlzIiArICIsNDAwMCwiICsgSTExaTFpMTFpMUkgKyAiKSIgKQplbGlmIE8wT08wb29PMDAgPT0gMTggOgogbzBPMCAoICJ5b3V0dWJlZGwiICkKIHRyeSA6CiAgaW1wb3J0IHlvdXR1YmVkbAogZXhjZXB0IEV4Y2VwdGlvbiA6CiAgeGJtYyAuIGV4ZWN1dGVidWlsdGluICggIlhCTUMuTm90aWZpY2F0aW9uKE5KTVNvY2NlcixQbGVhc2UgW0NPTE9SIHllbGxvd11pbnN0YWxsIFlvdXR1YmUtZGxbL0NPTE9SXSBtb2R1bGUgLDEwMDAwLCIgIikiICkKIEkxSTFJID0geW91dHViZWRsIC4gc2luZ2xlX1lEICggbzAgKQogaTFpSTFpICggSTFJMUkgLCBpaWlJMUkxMWkxICwgb28wb29vb28wMG8gKQplbGlmIE8wT08wb29PMDAgPT0gMTkgOgogbzBPMCAoICJHZW5lc2lzY29tbW9ucmVzb2x2ZXJzIiApCiBpMWlJMWkgKCBJMTFpSUkgKCBvMCApICwgaWlpSTFJMTFpMSAsIG9vMG9vb29vMDBvICwgVHJ1ZSApCiBpZiAyNCAtIDI0OiBvME9vICogaTFJSWkgJSBvb29PIC8gTzAgKyBpMTFpSWlpSWlpCmVsaWYgTzBPTzBvb08wMCA9PSAyMSA6CiBvME8wICggImRvd25sb2FkIGN1cnJlbnQgZmlsZSB1c2luZyB5b3V0dWJlLWRsIHNlcnZpY2UiICkKIGlpMSAoICcnICwgaWlpSTFJMTFpMSAsICd2aWRlbycgKQplbGlmIE8wT08wb29PMDAgPT0gMjMgOgogbzBPMCAoICJnZXQgaW5mbyB0aGVuIGRvd25sb2FkIiApCiBpaTEgKCBvMCAsIGlpaUkxSTExaTEgLCAndmlkZW8nICkKZWxpZiBPME9PMG9vTzAwID09IDI0IDoKIG8wTzAgKCAiQXVkaW8gb25seSB5b3V0dWJlIGRvd25sb2FkIiApCiBpaTEgKCBvMCAsIGlpaUkxSTExaTEgLCAnYXVkaW8nICkKZWxpZiBPME9PMG9vTzAwID09IDI1IDoKIG8wTzAgKCAiWW91VHViZS9ETW90aW9uIiApCiBPT09PMDBPb29PICggbzAgKQogeGJtY3BsdWdpbiAuIGVuZE9mRGlyZWN0b3J5ICggaW50ICggc3lzIC4gYXJndiBbIDEgXSApICkKZWxpZiBPME9PMG9vTzAwID09IDI2IDoKIG8wTzAgKCAiWW91VHViZS9ETW90aW9uIEZyb20gU2VhcmNoIEhpc3RvcnkiICkKIGlpaUkxSTExaTEgPSBpaWlJMUkxMWkxIC4gc3BsaXQgKCAnOicgKQogT09PTzAwT29vTyAoIG8wICwgc2VhcmNoX3Rlcm0gPSBpaWlJMUkxMWkxIFsgMSBdICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCmVsaWYgTzBPTzBvb08wMCA9PSAyNyA6CiBvME8wICggIlVzaW5nIElNREIgaWQgdG8gcGxheSBpbiBQdWxzYXIiICkKIGlJMWkgPSBPT09PMDBPb29PICggbzAgKQogeGJtYyAuIFBsYXllciAoICkgLiBwbGF5ICggaUkxaSApCmVsaWYgTzBPTzBvb08wMCA9PSAzMCA6CiBvT09vbzAwTzAwbyAoIGlpaUkxSTExaTEgLCBvMCAsIG9vMG9vb29vMDBvICwgb29vICkKIGlmIDMgLSAzOiBPb28wIC8gb08wbzBvb08wCmVsaWYgTzBPTzBvb08wMCA9PSA0MCA6CiBpMUkxSWlpSWkxaSAoICkKIElJSUlJMTFJMUlpSSAoICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiAzNCAtIDM0OiBpMTFpSWlpSWlpIC8gTzAwT29Pb28wMCAqIGlpMUlJMTFJMWlpMUkgLiBvT28wTzBPb28KZWxpZiBPME9PMG9vTzAwID09IDUzIDoKIG8wTzAgKCAiUmVxdWVzdGluZyBKU09OLVJQQyBJdGVtcyIgKQogb09vMCAoIG8wICkKIHhibWNwbHVnaW4gLiBlbmRPZkRpcmVjdG9yeSAoIGludCAoIHN5cyAuIGFyZ3YgWyAxIF0gKSApCiBpZiA3OSAtIDc5OiBPMDBPb09vbzAwCmVsaWYgTzBPTzBvb08wMCA9PSA1MyA6CiBNb3ZpZXMxMjMgKCApCiBpZiAzMSAtIDMxOiBpaTFJSTExSTFpaTFJICUgTzAwT29Pb28wMAogaWYgOTggLSA5ODogT29vMCAqIGlJaWkxSTExSTFJSTEgLiBpaUlJSUlJMWkxaUkgKiBvT28wTzBPb28gLyBvTzBvb08gKyBvb29PCiMgZGQ2NzhmYWFlOWFjMTY3YmM4M2FiZjc4ZTVjYjJmM2YwNjg4ZDNhMwo=]')